define("multilingual/panels/multilingualManage/multilingualManagePanel.rt",["react","lodash","panels","baseUI","baseUILib","symbols","util"],function(e,a,t,n,l,i,s){"use strict";return function(){function i(){var i=s.translate;return e.createElement("div",{},this.state.isMultilingual?e.createElement(t.frames.focusPanelFrame,{key:"multilingual-manage-panel",className:"multilingual-manage-panel",title:i("Manage_Languages_Title"),panelName:this.props.panelName},e.createElement.apply(this,["div",{className:"content"},e.createElement(l.Composites.DropDownLabeled,{},e.createElement(l.TextLabel,{value:"Manage_Languages_Main_Language"}),e.createElement.apply(this,[l.DropDown,{value:this.languageAPI.original.get(),shouldTranslate:!1,placeholder:i("ML_MANAGER_CHOOSE_LANGUAGE"),openOnSelected:!0,onChange:this.onOriginalLanguageChange},a.map(this.getAvailableOriginalLanguages(),function(a,t,n){return e.createElement(l.DropDownOption,{shouldTranslate:!1,key:n,value:t,label:this.getLangLabel(t)})}.bind(this,i))])),e.createElement(n.sectionDividerLabeled,{label:"Manage_Languages_More_Languages"}),a.map(this.getTranslationLanguages(),function(a,t,i){var s=this;return e.createElement("div",{key:i},e.createElement("div",{className:"composite-action-set-horizontal"},e.createElement(l.RichText,{},e.createElement(l.TextLabel,{value:this.getLangLabel(t.code),type:"T03",shouldTranslate:!1})),e.createElement(l.Tooltip,{content:"Manage_Languages_Site_Delete_Tooltip"},e.createElement(l.Button,{className:"btn-delete btn-sm",onClick:function(e,a,t){this.removeLanguage(a.code)}.bind(this,a,t,i)},e.createElement(n.symbol,{name:"delete"}))),e.createElement(l.Tooltip,{content:"Manage_Languages_Site_Show_Language_Tooltip"},e.createElement(l.ToggleSwitch,{className:"lang-toggle",value:t.isPublic,onChange:function(){return s.setPublic(t)}}))),e.createElement("hr",{className:"divider-short"}))}.bind(this,i)),this.state.isAddingNewLanguage?e.createElement("div",{key:"new-language-add-section"},e.createElement(l.Composites.DropDownLabeled,{},e.createElement(l.TextLabel,{value:"Manage_Languages_Site_What_Language"}),e.createElement.apply(this,[l.DropDown,{shouldTranslate:!1,placeholder:i("Manage_Languages_Site_Languages_Choose_Language"),openOnSelected:!0,onChange:this.onAddLanguage},a.map(this.getAvailableLanguages(),function(a,t,n){return e.createElement(l.DropDownOption,{shouldTranslate:!1,key:n,value:t,label:this.getLangLabel(t)})}.bind(this,i))])),e.createElement("hr",{className:"divider-long"})):null,e.createElement(l.Composites.ButtonLeft,{},e.createElement(l.Button,{disabled:this.state.isAddingNewLanguage,className:"btn-text",onClick:this.addNewLanguage},i("Manage_Languages_New_Language")))]),e.createElement(l.Composites.ActionSetHorizontal,{},e.createElement(l.Button,{className:"btn-md",onClick:this.onConfirm},i("Notification_Box_Save_Button")))):null,this.state.isMultilingual?null:e.createElement(t.frames.focusPanelFrame,{key:"multilingual-init-panel",className:"multilingual-init-panel",shouldHideHeader:!0,isSingleInstance:this.props.isSingleInstance,panelName:this.props.panelName,shouldNotCloseOnBlur:this.props.shouldNotCloseOnBlur},e.createElement("div",{className:"popup-template-panel"},e.createElement("div",{className:"panel-header dark"},e.createElement(l.HelpButton,{}),e.createElement(l.CloseButton,{onClick:this.onClose}),e.createElement("h1",{},i("Notification_Box_Manage_Languages_Title")),e.createElement("h3",{},i("Notification_Box_Manage_Languages_Subtitle")),e.createElement("div",{className:"image"},e.createElement(n.symbol,{key:"symbol",name:"onlineStoreManager",className:"popup-symbol"}))),e.createElement("div",{className:"content"},e.createElement("div",{className:"panel-text"},e.createElement(l.Composites.DropDownLabeled,{},e.createElement(l.TextLabel,{value:"Notification_Box_Manage_Languages_Primary_Language"}),e.createElement.apply(this,[l.DropDown,{value:this.state.originalLanguage,shouldTranslate:!1,placeholder:i("ML_MANAGER_CHOOSE_LANGUAGE"),openOnSelected:!0,onChange:this.onInitialOriginalLanguageChange},a.map(this.getAvailableLanguages(),function(a,t,n){return e.createElement(l.DropDownOption,{shouldTranslate:!1,key:n,value:t,label:this.getLangLabel(t)})}.bind(this,i))])))),e.createElement(l.Composites.ActionSetHorizontalSpaced,{},e.createElement(l.Button,{className:"secondary btn-md",onClick:this.onClose},e.createElement("span",{},i("Notification_Box_Cancel_Button"))),e.createElement(l.Button,{disabled:!this.state.originalLanguage,className:"btn-md",onClick:this.enableMultilingual},e.createElement("span",{},i("Notification_Box_Next_Button")))))))}return i.apply(this,[])}}),define("multilingual/siteComponentHelper/siteComponentHelper",["addPanel"],function(e){"use strict";return{addLanguageSelectorToSiteHeader:function(a){var t=e.sections.getSections().menu.languageSelectorSection.props.items[0],n=a.documentServices.siteSegments.getHeader();a.components.add(n,t.structure,void 0,function(e){a.selection.selectComponentByCompRef(e)})}}}),define("multilingual/panels/multilingualManage/multilingualManagePanel",["react","lodash","core","util","multilingual/panels/multilingualManage/multilingualManagePanel.rt","multilingual/siteComponentHelper/siteComponentHelper","coreMultilingual"],function(e,a,t,n,l,i,s){"use strict";var g=s.utils.translationKey;return e.createClass({displayName:"multilingualManagePanel",mixins:[t.mixins.editorAPIMixin,n.translationMixin],propTypes:{title:e.PropTypes.string,subtitle:e.PropTypes.string,panelName:e.PropTypes.string},getKeyboardShortcuts:function(){return{enter:function(){this.onNext()},esc:function(){this.onClose()}}},getAvailableOriginalLanguages:function(){return a.difference(s.languages,this.languageAPI.get())},getAvailableLanguages:function(){return a.difference(s.languages,[this.languageAPI.original.get()].concat(this.languageAPI.get()))},isPublic:function(e){return this.languageAPI.public.get(e)},setPublic:function(e){this.languageAPI.public.set(e.code,!e.isPublic)},getLangLabel:function(e){return n.translate(g.getFullName(e))+" ("+n.translate(g.getShortName(e))+")"},onOriginalLanguageChange:function(e){this.languageAPI.original.set(e)},onInitialOriginalLanguageChange:function(e){this.setState({originalLanguage:e})},getTranslationLanguages:function(){var e=this;return a.map(this.languageAPI.get(),function(a){return{isPublic:e.isPublic(a),code:a}})},addNewLanguage:function(){this.setState({isAddingNewLanguage:!0})},onAddLanguage:function(e){this.languageAPI.add(e),this.setState({isAddingNewLanguage:!1})},removeLanguage:function(e){this.languageAPI.remove(e)},enableMultilingual:function(){this.languageAPI.multilingual.init(this.state.originalLanguage),this.setState({shouldAddElement:!0,isMultilingual:!0})},onClose:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.state.shouldAddElement&&i.addLanguageSelectorToSiteHeader(this.getEditorAPI())},onConfirm:function(){this.onClose()},onNext:function(){this.state.isMultilingual?this.onClose():this.state.originalLanguage&&this.enableMultilingual()},getInitialState:function(){return this.languageAPI=this.getEditorAPI().language,{originalLanguage:null,isAddingNewLanguage:!1,shouldAddElement:!1,isMultilingual:this.languageAPI.multilingual.isEnabled()}},render:l})}),define("multilingual",["multilingual/panels/multilingualManage/multilingualManagePanel"],function(e){"use strict";return{panels:{multilingualManagePanel:e},openMultilingualManagePanel:function(e){e.panelManager.openPanel("multilingual.panels.multilingualManagePanel",{title:"ML_MANAGER_TITLE",subtitle:"ML_MANAGER_SUBTITLE"})}}});
//# sourceMappingURL=multilingual.min.js.map