function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();define("higherOrderComponents/connectEditorAPI/connectEditorAPI",["lodash","react","create-react-class","reduxLibs"],function(e,t,o,r){"use strict";return function(n){return function(i){return o({displayName:r.recompose.wrapDisplayName(i,"ConnectEditor"),contextTypes:{editorAPI:t.PropTypes.object.isRequired},render:function(){var o=n(this.context.editorAPI,this.props),r=e.defaults({},o,this.props);return t.createElement(i,r)}})}}}),define("higherOrderComponents/connectEditorAPI/EditorAPIProvider",["lodash","react"],function(e,t){"use strict";var o=t.createClass({propTypes:{editorAPI:t.PropTypes.object.isRequired,children:t.PropTypes.element.isRequired},childContextTypes:{editorAPI:t.PropTypes.object.isRequired},getChildContext:function(){return{editorAPI:this.props.editorAPI}},render:function(){return t.Children.only(this.props.children)}});return o.displayName="EditorAPIProvider",o}),define("higherOrderComponents/overlappedCompTooltip/overlappedCompTooltip",["reactDOM","lodash","jquery","react","create-react-class","reduxLibs","util","coreUtilsLib","coreBi","constants","baseUI","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,r,n,i,s,p,a,c,l,u){"use strict";var d=c.OVARLAPPING_COMP.DELAY,h=c.OVARLAPPING_COMP.HIDE_DELAY,f=c.OVARLAPPING_COMP.MIN_OVERLAP,g=function(e){return{registeredHideBubbleOnPreview:e.registeredHideBubbleOnPreview,setRegisteredHideBubbleOnPreview:function(t){e.registeredHideBubbleOnPreview=t},registerToGoToPreview:e.preview.registerToGoToPreview,getRelativeToScreenConsideringScroll:e.components.layout.getRelativeToScreenConsideringScroll,getComponentsUnderClick:e.selection.getComponentsUnderClick,previewTop:e.getPreviewPosition().top,previewMode:e.getPreviewMode(),getSitePreference:e.userPreferences.site.get,setSitePreference:e.userPreferences.site.set,getSessionPreference:e.userPreferences.session.get,setSessionPreference:e.userPreferences.session.set,reportBI:e.bi.event,toggleHalfOpacityTools:e.toolsControl.toggleHalfOpacityTools,toggleHideTools:e.toolsControl.toggleHideTools,showFloatingBubble:e.showFloatingBubble,hideFloatingBubble:e.hideFloatingBubble,toggleHideToolsBtnBlink:e.toolsControl.toggleHideToolsBtnBlink}};return function(m){return u(g)(function(u){return n({propTypes:{registeredHideBubbleOnPreview:r.PropTypes.bool,setRegisteredHideBubbleOnPreview:r.PropTypes.func,previewMode:r.PropTypes.bool,previewTop:r.PropTypes.number,getComponentsUnderClick:r.PropTypes.func,getSitePreference:r.PropTypes.func,setSitePreference:r.PropTypes.func,getSessionPreference:r.PropTypes.func,setSessionPreference:r.PropTypes.func,reportBI:r.PropTypes.func,toggleHalfOpacityTools:r.PropTypes.func,toggleHideTools:r.PropTypes.func,showFloatingBubble:r.PropTypes.func,hideFloatingBubble:r.PropTypes.func,registerToGoToPreview:r.PropTypes.func,getRelativeToScreenConsideringScroll:r.PropTypes.func,toggleHideToolsBtnBlink:r.PropTypes.func},displayName:i.recompose.wrapDisplayName(u,"Overlapped"),getInitialState:function(){return this.intersectionComp=null,this.hideQuickTipTimer=null,{quickTipAlreadyShown:!1}},componentDidMount:function(){this.props.registeredHideBubbleOnPreview||(this.props.registerToGoToPreview(this.hideQuickTip),this.props.setRegisteredHideBubbleOnPreview(!0)),this.checkOverlap=p.timeUtils.throttle(this.checkOverlap,d,{leading:!1})},getComponentsLayoutByMouseEvent:function(e){var o=this;return t.map(this.props.getComponentsUnderClick(e),function(e){return o.props.getRelativeToScreenConsideringScroll(e).bounding})},calcOverlapPercentage:function(e,t){var o=s.math.getSquaresIntersection(t,e);return o?(this.intersectionComp=t,o.width*o.height/(t.height*t.width)*100):0},isOverlapping:function(t){var o=this.getComponentsLayoutByMouseEvent(t);if(!this.wrapped)return!1;var r=e.findDOMNode(this.wrapped),n={x:r.offsetLeft,y:r.offsetTop-this.props.previewTop,width:r.offsetWidth,height:r.offsetHeight};for(var i in o)if(o.hasOwnProperty(i)&&this.calcOverlapPercentage(n,o[i])>f)return!0;return!1},hideQuickTip:function(){window.clearTimeout(this.hideQuickTipTimer),this.props.toggleHalfOpacityTools(!1),this.props.hideFloatingBubble()},showQuickTip:function(e){var t=o(window).width()/2,n=e.pageX<t?2:-2,i=r.createElement(l.popoverTemplates.quickTip,{text:"toolbars_hide_tooltip_text",linkActionText:"toolbars_hide_tooltip_link",linkAction:this.quickTipLinkAction,linkMouseEnter:this.quickTipLinkMouseEnter,linkMouseLeave:this.quickTipLinkMouseLeave,symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),s={height:100,width:this.intersectionComp.width,top:e.clientY,left:this.intersectionComp.x+n},p={noArrow:!0,shake:!0,behindPopUps:!0,hideMethod:this.props.toggleHalfOpacityTools.bind(this,!1),alignment:c.UI.TOOLTIP.ALIGNMENT.RIGHT,timeoutForMouseOverBubble:h};this.props.showFloatingBubble(i,s,p,!0),this.props.reportBI(a.events.editor.hide_tools.show_controls_tooltip_appearance)},moveQuickTip:function(){var e=o(window).width()/2,t=r.createElement(l.popoverTemplates.quickTip,{text:"toolbars_show_tooltip_text",symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),n={height:this.props.previewTop+30,width:284,top:0,left:e-142};this.props.showFloatingBubble(t,n,{noArrow:!0,behindPopUps:!0,shouldHaveTransition:!0},!0),this.props.toggleHideToolsBtnBlink(!0)},quickTipCloseAction:function(){this.hideQuickTip(),this.props.reportBI(a.events.editor.hide_tools.show_controls_tooltip_close);var e=this.props.getSessionPreference("hideToolsQuickTipShown")||0;this.props.setSessionPreference("hideToolsQuickTipShown",e+1)},quickTipLinkAction:function(){this.props.toggleHalfOpacityTools(!1),this.props.toggleHideTools(!0),this.props.reportBI(a.events.editor.hide_tools.hide_controls,{origin:"tooltip"}),this.moveQuickTip(),this.props.setSitePreference("hideToolsQuickTipShown",!0)},quickTipLinkMouseEnter:function(){this.props.toggleHalfOpacityTools(!0)},quickTipLinkMouseLeave:function(){this.props.toggleHalfOpacityTools(!1)},resetQuickTip:function(){this.setState({quickTipAlreadyShown:!1})},checkOverlap:function(e){this.props.previewMode||this.props.getSitePreference("hideToolsQuickTipShown")||this.props.getSessionPreference("hideToolsQuickTipShown")>4||this.state.quickTipAlreadyShown||!this.isOverlapping(e)||(this.showQuickTip(e),this.setState({quickTipAlreadyShown:!0}))},wrappedMounted:function(e){this.wrapped=e},onMouseMove:function(e){e.persist(),this.checkOverlap(e)},render:function(){var e=t.assign({},this.props,{onMouseMove:this.onMouseMove,onMouseEnter:this.resetQuickTip,ref:this.wrappedMounted});return r.createElement(u,e)}})}(m))}}),define("higherOrderComponents/panelFrame/panelFrame",["lodash","react","create-react-class","reduxLibs","prop-types","core","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,r,n,i,s){"use strict";var p=function(e){return{registerPanelType:e.panelManager.registerPanelType,closePanelByName:e.panelManager.closePanelByName,openHelpCenter:e.panelManager.openHelpCenter}};return function(a){return s(p)(function(s){return o({propTypes:{selectedComponentType:n.string,onHelpClicked:n.func,panelName:n.string.isRequired,helpId:n.string,isSingleInstance:n.bool,registerPanelType:n.func.isRequired,closePanelByName:n.func.isRequired,openHelpCenter:n.func},displayName:r.recompose.wrapDisplayName(s,"PanelFrame"),getDefaultProps:function(){return{isSingleInstance:!1}},blockOuterScroll:function(e){var t=e.currentTarget,o=e.currentTarget.scrollHeight-e.currentTarget.offsetHeight,r=e.deltaY%3?e.deltaY:10*e.deltaY;t.scrollTop+r<=0?(t.scrollTop=0,e.preventDefault()):t.scrollTop+r>=o&&(t.scrollTop=o,e.preventDefault()),e.stopPropagation()},componentWillMount:function(){this.props.registerPanelType(this.props.panelName,s.displayName,this.props.isSingleInstance)},close:function(){this.props.closePanelByName(this.props.panelName)},openHelpCenter:function(t){if(this.props.helpId){var o={learn_more:!1,origin:i.constants.BI.HELP.ORIGIN.PANEL,panel_name:this.props.panelName,component:this.props.selectedComponentType};this.props.selectedComponentType||e.merge(o,e.pick(t,"component")),this.props.openHelpCenter(this.props.helpId,null,o)}this.props.onHelpClicked&&this.props.onHelpClicked()},render:function(){return t.createElement(s,e.assign({},this.props,{blockOuterScroll:this.blockOuterScroll,openHelpCenter:this.openHelpCenter,close:this.close}))}})}(a))}}),define("higherOrderComponents/reportBiEventOnUiChange/reportBiEventOnUiChange",["lodash","reduxLibs","prop-types","core","coreUtilsLib","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,r,n,i){"use strict";var s=t.recompose.withContext,p=function(e){return{sendSelectedComponentBI:e.selectedComponent.sendSelectedComponentBI}},a={reportUIChange:o.func};return function(t){return i(p)(s(a,function(o){return{reportUIChange:function(i,s,p){var a=r.utils.uiControlsBIUtil.getEventDefinition(i);if(a){var c=r.utils.uiControlsBIUtil.getParams(i,p),l=e.assign({panel_name:t.displayName,control_name:s},c);o.sendSelectedComponentBI(a,l)}else n.log.warn("There is no BI event for the control [%s], in [%s] panel.\n\tDear developer, Please add the control mapping to core/bi/controlsToEvents and the event to core/bi/events.json .",i,t.displayName)}}})(t))}}),define("higherOrderComponents/compPanel/compPanel",["react","lodash","create-react-class","prop-types","util","core","coreUtilsLib","reduxLibs","higherOrderComponents/connectEditorAPI/connectEditorAPI","higherOrderComponents/reportBiEventOnUiChange/reportBiEventOnUiChange"],function(e,t,o,r,n,i,s,p,a,c){"use strict";var l=function(e,o,r){var n=void 0;if(t.isUndefined(o))n=r;else if(t.isArray(o)&&t.isObject(r)){var i=t.pick(r,o);n=t.assign({},e,i)}else n=t.isObject(o)?t.assign({},e,o):t.defaults(_defineProperty({},o,r),e);return n},u=function(e,o){var r=o.selectedComponent||e.selection.getSelectedComponents();if(t.isEmpty(r))return{};var n=e.components.style.getId(r);return{selectedComponents:r,compData:e.components.data.get(r),compProperties:e.components.properties.get(r),compLayout:e.components.layout.getRelativeToStructure(r),compDesign:e.components.design.get(r),compStyleId:n,compStyle:e.theme.styles.get(n),selectedComponentType:e.selection.getSelectedComponentType(),openHelpCenter:e.panelManager.openHelpCenter,updateProperties:e.components.properties.update,updateData:e.components.data.update,updateDesign:e.components.design.update,updateLayout:e.components.layout.updateRelativeToStructure,compBehaviors:e.components.behaviors.get(e.selection.getSelectedComponents())||[],updateBehavior:e.components.behaviors.update,removeBehavior:e.components.behaviors.remove}};return function(d){return a(u)(function(a){return o({displayName:p.recompose.wrapDisplayName(a,"compPanel"),propTypes:{compData:r.object,compDesign:r.object,compLayout:r.object.isRequired,compProperties:r.object,selectedComponentType:r.string.isRequired,openHelpCenter:r.func.isRequired,updateProperties:r.func.isRequired,updateData:r.func.isRequired,updateDesign:r.func.isRequired,updateLayout:r.func.isRequired,updateBehavior:r.func.isRequired,removeBehavior:r.func.isRequired,compBehaviors:r.arrayOf(r.object).isRequired},openHelpCenter:function(e,o){if(e){var r=!t.isNil(o),n={component:this.props.selectedComponentType,learn_more:r?!!o:null,panel_name:this.props.panelName,origin:i.constants.BI.HELP.ORIGIN.PANEL};this.props.openHelpCenter(e,null,n)}},updateProperties:function(e,t,o){var r=l(this.props.compProperties,e,t);r.id=r&&r.id?r.id:this.props.compData&&this.props.compData.id,this.props.updateProperties(this.props.selectedComponents,r,o)},updateData:function(e,t){var o=l(this.props.compData,e,t);o.id=o&&o.id?o.id:this.props.compData&&this.props.compData.id,this.props.updateData(this.props.selectedComponents,o)},updateDesign:function(e,t,o){var r=l(this.props.compData,e,t);r.id=r&&r.id?r.id:this.props.compData&&this.props.compData.id,this.props.updateDesign(this.props.selectedComponents,r,!1,o)},updateLayout:function(e,o){var r=s.objectUtils.cloneDeep(this.props.compLayout);t.isArray(e)?t.merge(r,o):r[e]=o,this.props.updateLayout(this.props.selectedComponents,r)},render:function(){var o=t.defaults({frameProps:n.panelUtils.getFrameProps(this.props),updateProperties:this.updateProperties,updateData:this.updateData,updateDesign:this.updateDesign,updateLayout:this.updateLayout},this.props);return e.createElement(a,o)}})}(c(d)))}}),define("higherOrderComponents/linkUserPreferences/linkUserPreferences",["lodash","react","prop-types","reduxLibs","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,r,n){"use strict";function i(e){return{userPreferences:e.userPreferences}}return function(s,p){return n(i)(function(n,i){var s=function(o){function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),o=null;return t.props.userPrefType&&t.props.dontShowAgainKey&&(o=!!t.props.userPreferences[t.props.userPrefType].get(t.props.dontShowAgainKey)),t.state={dontShowAgain:o},t}return _inherits(r,t.Component),_createClass(r,[{key:"toggleDontShowAgain",value:function(){if(this.props.userPrefType&&this.props.dontShowAgainKey){var e=!this.state.dontShowAgain;this.props.userPreferences[this.props.userPrefType].set(this.props.dontShowAgainKey,e),this.setState({dontShowAgain:e})}}},{key:"render",value:function(){var o=e.assign({},this.props,{toggleDontShowAgain:this.toggleDontShowAgain.bind(this),dontShowAgain:this.state.dontShowAgain});return t.createElement(n,o)}}]),r}();return s.displayName=r.recompose.wrapDisplayName(n,"LinkUserPreferences"),s.propTypes={userPreferences:o.object.isRequired,userPrefType:o.oneOf(["site","session","global"]),dontShowAgainKey:o.string},s.defaultProps=i||{},s}(s,p))}}),define("higherOrderComponents/renderWhenMutated/renderWhenMutated",["lodash","react","create-react-class","reduxLibs"],function(e,t,o,r){"use strict";return function(n){return o({displayName:r.recompose.wrapDisplayName(n,"RenderWhenMutated"),shouldComponentUpdate:function(t){var o=e.keys(n.propTypes),r=this.props;return e.some(o,function(o){var n=r[o],i=t[o];return!(e.isFunction(n)&&e.isFunction(i)||e.isEqual(n,i))})},render:function(){return t.createElement(n,this.props)}})}}),define("higherOrderComponents/noUpdateOnMouseMove/noUpdateOnMouseMove",["lodash","react","create-react-class","reduxLibs","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,r,n){"use strict";var i=function(e){return{isPerformingMouseMoveAction:e.mouseActions.isPerformingMouseMoveAction()}};return function(e){var s=o({displayName:r.recompose.wrapDisplayName(e,"NoUpdateOnMouseMove"),shouldComponentUpdate:function(){return!this.props.isPerformingMouseMoveAction},render:function(){return t.createElement(e,this.props)}});return n(i)(s)}}),define("higherOrderComponents",["higherOrderComponents/connectEditorAPI/connectEditorAPI","higherOrderComponents/connectEditorAPI/EditorAPIProvider","higherOrderComponents/overlappedCompTooltip/overlappedCompTooltip","higherOrderComponents/panelFrame/panelFrame","higherOrderComponents/compPanel/compPanel","higherOrderComponents/linkUserPreferences/linkUserPreferences","higherOrderComponents/renderWhenMutated/renderWhenMutated","higherOrderComponents/noUpdateOnMouseMove/noUpdateOnMouseMove","higherOrderComponents/reportBiEventOnUiChange/reportBiEventOnUiChange"],function(e,t,o,r,n,i,s,p,a){"use strict";return{connectEditorAPI:e,EditorAPIProvider:t,overlappedCompTooltip:o,panelFrame:r,compPanel:n,linkUserPreferences:i,renderWhenMutated:s,noUpdateOnMouseMove:p,reportBiEventOnUiChange:a}});
//# sourceMappingURL=higherOrderComponents.min.js.map