function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("panels/panelManager/panelManager",["lodash","stateManagement"],function(e,t){"use strict";return{create:function(n){return{openPanel:function(e,a,s){n.dispatch(t.panels.logic.updateOrOpenPanel(e,a,s))},openComponentPanel:function(e,a){n.dispatch(t.panels.logic.openComponentPanel(e,a))},replaceComponentPanel:function(a,s){n.dispatch(t.panels.logic.openComponentPanel(a,e.assign({},s,{useLastPanelPosition:!0})))},closePanelByName:function(e){n.dispatch(t.panels.logic.closePanelByName(e))},closeAllPanels:function(){n.dispatch(t.panels.logic.closeOpenedPanels())},getOpenPanels:function(){return t.panels.selectors.selectOpenPanels(n.getState())},registerPanelType:function(e,a,s){n.dispatch(t.panels.actions.setPanelType(e,a,s))},getPanelsOfType:function(a){var s=t.panels.selectors.selectOpenPanels(n.getState());return e.filter(s,{frameType:a})},closeAllPanelsOfType:function(e){n.dispatch(t.panels.logic.closeAllPanelsOfType(e))},openHelpCenter:function(e,a,s){n.dispatch(t.panels.logic.openHelpCenter(e,a,s))},closeHelpCenter:function(){n.dispatch(t.panels.actions.closeHelpCenter())},notifyMouseDown:function(){n.dispatch(t.panels.actions.stageMouseDown())},openPlatformPanel:function(e){n.dispatch(t.panels.logic.openPlatformPanel(e))},openFirstTimePanel:function(e){n.dispatch(t.panels.logic.openFirstTimePanel(e))},updatePanelProps:function(e,a){n.dispatch(t.panels.logic.updatePanel(e,a))}}}}}),define("panels/frames/leftPanelFrame.rt",["react","lodash","symbols","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"left-panel-frame panel-index-"+this.props.panelIndex+" "+this.props.panelClass+(0===this.props.panelIndex?" first-panel":""),style:this.getFrameStyle(),onWheel:this.props.blockOuterScroll,onContextMenu:function(e){this.props.onContextMenu&&this.props.onContextMenu(e)}.bind(this)},this.props.label?e.createElement(a.PanelHeader,{key:"header",className:"light",onClose:this.props.close,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId&&!this.props.onHelpClicked},e.createElement("span",{},this.props.label)):null,e.createElement("div",{id:this.props.id,className:"left-panel-frame-content "+(this.props.className||"")},this.props.children))}}),define("panels/frames/leftPanelFrame",["create-react-class","lodash","prop-types","core","higherOrderComponents","constants","panels/frames/leftPanelFrame.rt"],function(e,t,n,a,s,i,o){"use strict";var l=e({displayName:i.PANEL_TYPES.LEFT,mixins:[a.mixins.editorAPIMixin],PropTypes:{panelClass:n.string.isRequired,panelIndex:n.number.isRequired,label:n.string,onClose:function(e,t){if(e.title&&"function"!=typeof e[t])return new Error("onClose prop must be of type a function")},styleOverride:n.object,openPanelBiEvent:n.object,openPanelBiParams:n.object},getFrameStyle:function(){return this.props.styleOverride},componentWillMount:function(){var e=this.getEditorAPI().panelManager,n=t.filter(e.getOpenPanels(),{frameType:i.PANEL_TYPES.LEFT});t.size(n)>1&&e.closePanelByName(t.head(n).name)},render:o}),r=s.panelFrame(l);return r.pure=l,r}),define("panels/mixins/disableKeyboardShortcutsMixin",["lodash","util"],function(e,t){"use strict";var n=t.keyboardShortcuts,a=0,s=[];return{componentWillMount:function(){var e=!1;n.isEnabled()||(n.enable(),e=!0),s.push(n.getContext()),this.dynamicKeyboardContext=n.CONTEXTS.MODAL_PANEL+"_"+a++,n.registerContext(this.dynamicKeyboardContext,this.getPanelShortcuts()),n.setContext(this.dynamicKeyboardContext),e&&n.disable()},componentWillUnmount:function(){var e=!1;n.isEnabled()||(n.enable(),e=!0),n.unregisterContext(this.dynamicKeyboardContext);var t=s.pop();t!==this.dynamicKeyboardContext&&n.setContext(t),e&&n.disable()},getPanelShortcuts:function(){return this.props.keyboardShortcuts?this.props.shouldExtendDefaultShortcuts?e.assign(this.getDefaultShortcuts(),this.props.keyboardShortcuts):this.props.keyboardShortcuts:this.getDefaultShortcuts()},getDefaultShortcuts:function(){var t=void 0;return t=this.props.isBareMode?e.noop:this.onCancel||this.onEscape||this.close||this.props.close,{esc:t}}}}),define("panels/frames/messagePanelFrame.rt",["react","lodash","baseUI","symbols","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame message-panel-frame-z-index"},e.createElement("div",{className:"dark-frame-overlay"}),e.createElement("div",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"message-panel-frame"},this.getPanelProps()),e.createElement(s.PanelHeader,{className:"dark",onClose:this.onCancel,noHelpBtn:!0},this.props.panelTitle?e.createElement("span",{key:"headerTitle"},this.props.panelTitle):null),e.createElement("div",{className:"content"},this.props.children),e.createElement("div",{className:"panel-footer"},this.props.footerText?e.createElement("div",{key:"footerText",className:"footer-text"},this.props.footerText):null,this.props.dontShowAgainKey&&this.props.userPrefType?e.createElement(s.Checkbox,{key:"dont-show-again-toggle",labelAfterSymbol:!0,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again",value:this.props.dontShowAgain,onChange:this.props.toggleDontShowAgain}):null,this.props.cancelLabel?e.createElement(n.button,{key:"btn-confirm-secondary",className:"btn-confirm-secondary",onClick:this.onCancel,label:this.props.cancelLabel}):null,e.createElement(n.button,{className:"btn-confirm-primary",onClick:this.onConfirm,label:this.props.confirmLabel}))))}}),define("panels/frames/messagePanelFrame",["create-react-class","lodash","prop-types","util","constants","higherOrderComponents","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/messagePanelFrame.rt"],function(e,t,n,a,s,i,o,l){"use strict";var r=e({displayName:s.PANEL_TYPES.MESSAGE,mixins:[a.propTypesFilterMixin,o],propTypes:{panelName:n.string.isRequired,panelTitle:n.string,width:n.string,height:n.string,onConfirm:n.func,confirmLabel:n.string,keyboardShortcuts:n.object,shouldExtendDefaultShortcuts:n.bool,dontShowAgain:n.bool,toggleDontShowAgain:n.func.isRequired,showCancelBtn:n.bool,cancelLabel:n.string,onCancel:n.func,close:n.func,type:n.string,footerText:n.object},getInitialState:function(){return{buttonWasClicked:!1}},getDefaultProps:function(){return{confirmLabel:"messagePanelFrame_Confirm"}},getPanelProps:function(){var e=this.props.width,n=this.props.height;return t({style:{width:e,height:n}}).defaults(this.filteredProps()).omit("children").value()},_closeAndCall:function(e){this.state.buttonWasClicked||(this.setState({buttonWasClicked:!0}),this.props.close(),e&&e())},onConfirm:function(){this._closeAndCall(this.props.onConfirm)},onCancel:function(){this._closeAndCall(this.props.onCancel)},render:l}),c=i.linkUserPreferences(i.panelFrame(r));return c.pure=r,c}),define("panels/mixins/panelDragLimitsMixin",["reactDOM","core","jquery"],function(e,t,n){"use strict";return{getDragLimits:function(a){var s=t.constants.PANELS.PANEL_SIZE_TO_KEEP_IN_VIEW,i=t.utils.stageUtils.getStageLayout(),o=void 0,l=(o=n(this.contentElement?this.contentElement:a?e.findDOMNode(a):e.findDOMNode(this))).height(),r=o.width(),c=i.left-r+s,p=i.right+r-s,u=i.bottom+l-s;return{x:[c,p],y:[i.top+10,u]}}}}),define("panels/frames/toolPanelFrameSimple.rt",["react","lodash","baseUI","symbols","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container tool-panel-frame-container tool-panel-frame-z-index"+(this.props.isBlockingLayerFullScreen?" full-screen":""),onWheel:this.blockOuterScrollIfNecessary},e.createElement("div",{className:"transparent-frame-overlay",onClick:this.onOverlayClick,ref:"closeButton"}),e.createElement("div",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({ref:"contentWrapper",className:"tool-panel-frame"},this.getContentWrapperProps()),this.props.headerTitle?e.createElement(s.PanelHeader,{ref:"header",key:"toolFrameHeader",onMouseDown:function(e){this.startDrag(e,this.getDragLimits(this.refs.contentWrapper),this.refs.contentWrapper)}.bind(this),className:"dragger "+(this.props.lightHeader?"light":"dark"),onClose:this.closePanel,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId},this.props.headerTitle?e.createElement("span",{key:"headerTitle"},this.props.headerTitle):null):null,e.createElement("div",{className:"content"+(this.props.contentClass?" "+this.props.contentClass:"")},this.props.children)))}}),define("panels/frames/panelCloseOrigin",[],function(){"use strict";return{HEADER_CLOSE_BUTTON:"header_close_button",CLICK_OUTSIDE:"click_outside",ESCAPE_PRESS:"escape_press",DONE_BUTTON:"done_button"}}),define("panels/frames/toolPanelFrameSimple",["create-react-class","prop-types","lodash","constants","util","panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/panelDragLimitsMixin","panels/frames/toolPanelFrameSimple.rt","panels/frames/panelCloseOrigin"],function(e,t,n,a,s,i,o,l,r){"use strict";return e({displayName:a.PANEL_TYPES.TOOL,mixins:[s.draggableMixin,i,o],propTypes:{panelName:t.string.isRequired,selectedComponentType:t.string,headerTitle:t.string,width:t.string,height:t.string,top:t.oneOfType([t.string,t.number]),left:t.oneOfType([t.string,t.number]),isBlockingLayerFullScreen:t.bool,shouldBlockOuterScroll:t.bool,contentClass:t.string,onClose:t.func},getContentWrapperProps:function(){var e=["width","height","top","left"],t=n.omit(this.props,"children",e);return t.style=n.pick(this.props,e),t},getContentWrapperElement:function(){return this.refs.contentWrapper},blockOuterScrollIfNecessary:function(){this.props.shouldBlockOuterScroll&&this.blockOuterScroll.apply(this,arguments)},closePanel:function(e){this.props.onClose&&this.props.onClose(e),this.props.close()},onOverlayClick:function(){this.closePanel(r.CLICK_OUTSIDE)},onEscape:function(){this.closePanel(r.ESCAPE_PRESS)},componentDidMount:function(){this.props.onContentElementReady&&this.props.onContentElementReady(this.getContentWrapperElement())},render:l})}),define("panels/frames/toolPanelFrame",["higherOrderComponents","panels/frames/toolPanelFrameSimple"],function(e,t){"use strict";return e.panelFrame(t)}),define("panels/frames/focusPanelFrameSimple.rt",["react","lodash","symbols","util","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame focus-panel-frame-z-index "+(this.props.frameClassName||""),onWheel:this.props.blockOuterScroll,onContextMenu:function(e){this.props.onContextMenu&&this.props.onContextMenu(e)}.bind(this)},e.createElement("div",{className:this.getClassName("focus-panel-frame"),style:this.getWidthHeight()},this.shouldHideHeader()?null:e.createElement(s.PanelHeader,{className:this.getHeaderClassName()+" dark",key:"header",onClose:this.onXButtonClick,onHelp:this.props.openHelpCenter,noHelpBtn:this.props.shouldHideHelp},e.createElement("span",{},this.props.title)),e.createElement("div",{className:this.props.title?"focus-panel-frame-content":"focus-panel-frame-content-no-header",style:{backgroundColor:this.props.containerBackground}},this.props.children)),e.createElement("div",{className:"dark-frame-overlay",onClick:this.handleBlur,style:{backgroundColor:this.props.overlayBackground}}))}}),define("panels/frames/focusPanelFrameSimple",["create-react-class","prop-types","lodash","constants","util","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/focusPanelFrameSimple.rt"],function(e,t,n,a,s,i,o){"use strict";var l={OUT_OF_FOCUS:"out_of_focus",X_BUTTON:"x_button"};return e({mixins:[i],propTypes:{blockOuterScroll:t.func.isRequired,close:t.func.isRequired,openHelpCenter:t.func.isRequired,panelName:t.string.isRequired,width:t.string,height:t.string,title:t.string,headerClassName:t.string,frameClassName:t.string,shouldHideHeader:t.bool,shouldHideHelp:t.bool,shouldNotCloseOnBlur:t.bool,keyboardShortcuts:t.object,shouldExtendDefaultShortcuts:t.bool},displayName:a.PANEL_TYPES.FOCUS,getHeaderClassName:function(){return this.props.headerClassName||"panel-header"},getFrameProps:function(){return{style:{width:this.props.width,height:this.props.height}}},shouldHideHeader:function(){return this.props.shouldHideHeader},shouldCloseFrame:function(e){return!this.props.onClose||!0===this.props.onClose(e)},onXButtonClick:function(){this.closeFrameIfNeeded(l.X_BUTTON)},closeFrameIfNeeded:function(e){this.shouldCloseFrame(e)&&this.props.close()},handleBlur:function(){this.props.shouldNotCloseOnBlur||this.closeFrameIfNeeded(l.OUT_OF_FOCUS)},getClassName:function(e){return s.inheritClassName(this.props,e)},getWidthHeight:function(){var e={};return this.props.width&&(e.width=this.props.width),this.props.height&&(e.height=this.props.height),e},render:o})}),define("panels/frames/focusPanelFrame",["higherOrderComponents","panels/frames/focusPanelFrameSimple"],function(e,t){"use strict";return e.panelFrame(t)}),define("panels/frames/helpPanelFrameSimple.rt",["react","lodash","symbols","baseUI","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"help-panel-frame"},e.createElement(s.PanelHeader,{ref:"header",onMouseDown:function(e){this.startDrag(e,this.getDragLimits())}.bind(this),className:"dragger dark help-panel-frame-drag-handle",onClose:this.closeHelpCenter,noHelpBtn:!0}),e.createElement("iframe",{id:this.props.id,className:this.props.className||"",src:this.getIframeSrc(),ref:"helpIframe"}),e.createElement(a.preloader,{className:t({hidden:!this.state.showLoader}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")}))}}),define("panels/frames/helpPanelFrameSimple",["lodash","reactDOM","create-react-class","prop-types","util","core","constants","panels/frames/helpPanelFrameSimple.rt","helpIds"],function(e,t,n,a,s,i,o,l,r){"use strict";return n({displayName:o.PANEL_TYPES.HELP,mixins:[s.draggableMixin,i.mixins.editorAPIMixin],PropTypes:{helpUrl:a.string.isRequired,closePanelBiEvent:a.object,closePanelBiParams:a.object,openPanelBiEvent:a.object,openPanelBiParams:a.object,isMobileEditor:a.bool},getInitialState:function(){return{showLoader:!0}},getUrlPrefix:function(){return"https://support.wix.com/"+this.getEditorAPI().getLanguageCode()+"/widget/"+r.HELP_CENTER.HELP_WIDGET_ID+"/article/"},componentDidMount:function(){this.props.openPanelBiEvent&&this.props.openPanelBiParams&&this.getEditorAPI().bi.event(this.props.openPanelBiEvent,this.props.openPanelBiParams),t.findDOMNode(this.refs.helpIframe).addEventListener("load",this.hideLoader)},componentWillReceiveProps:function(e){e.isMobileEditor!==this.props.isMobileEditor&&this.closeHelpCenter()},getDragLimits:function(){var e=i.utils.stageUtils.getViewPort();return{y:[e&&e.minY||this.getEditorAPI().editorConfig.topBarHeight]}},componentWillMount:function(){this.getEditorAPI().panelManager.registerPanelType(this.props.panelName,this.constructor.displayName)},componentWillUnmount:function(){this.props.closePanelBiEvent&&this.props.closePanelBiParams&&this.getEditorAPI().bi.event(this.props.closePanelBiEvent,this.props.closePanelBiParams)},closeHelpCenter:function(){this.getEditorAPI().panelManager.closeHelpCenter()},onCancel:function(){this.closeHelpCenter()},hideLoader:function(){this.setState({showLoader:!1})},getIframeSrc:function(){var t=e.assign({panel_name:"",origin:"",editor_working_mode:this.getEditorAPI().viewMode.get()},this.props.biHelpParams),n=e.template("&origin=<%= origin %>&panel_name=<%= panel_name %>&editor_working_mode=<%= editor_working_mode %>")(t);return this.getUrlPrefix()+this.props.helpUrl+n},render:l})}),define("panels/frames/helpPanelFrame",["higherOrderComponents","panels/frames/helpPanelFrameSimple"],function(e,t){"use strict";return e.panelFrame(t)}),define("panels/frames/pagesPanelFrameSimple.rt",["react","lodash","symbols","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:this.generateClassName("pages-panel-frame")},e.createElement(a.PanelHeader,{className:"tag-triangle tag-top dark",onClose:this.props.close,onHelp:this.props.openHelpCenter},this.props.title),e.createElement("div",{className:t(this.getClasses()).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},this.props.children))}}),define("panels/frames/pagesPanelFrameSimple",["create-react-class","prop-types","lodash","core","constants","baseUI","panels/frames/pagesPanelFrameSimple.rt"],function(e,t,n,a,s,i,o){"use strict";return e({displayName:s.PANEL_TYPES.PAGES,mixins:[a.mixins.editorAPIMixin,i.classNameMixin],propTypes:{rootClassNames:t.object},getClasses:function(){return n.merge({},this.props.rootClassNames,{pages:!0,"pages-panel-frame-content":!0})},render:o})}),define("panels/frames/pagesPanelFrame",["higherOrderComponents","panels/frames/pagesPanelFrameSimple"],function(e,t){"use strict";return e.panelFrame(t)}),define("panels/frames/confirmationPanelFrame.rt",["react","lodash","baseUI","symbols","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame confirmation-panel-frame-z-index"},e.createElement("div",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"confirmation-panel-frame "+this.props.type+"-confirmation"},this.getPanelProps()),this.shouldHideHeader()?null:e.createElement(s.PanelHeader,{className:"dark",key:"header",onClose:this.onClose,noHelpBtn:!0},this.props.panelTitle?e.createElement("span",{key:"headerTitle"},this.props.panelTitle):null),e.createElement("div",{className:"content"},this.props.children),this.props.shouldHideFooter?null:e.createElement("footer",{key:"footer"},this.props.shouldHideCancelButton?null:e.createElement(n.button,{key:"cancelButton",className:this.getSecondaryButtonClass(),onClick:this.onCancel,label:this.props.cancelLabel}),e.createElement(n.button,{className:this.getConfirmButtonClass(),onClick:this.onConfirm,label:this.props.confirmLabel}))),e.createElement("div",{className:"dark-frame-overlay"}))}}),define("panels/frames/confirmationPanelFrame",["create-react-class","prop-types","lodash","util","constants","higherOrderComponents","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/confirmationPanelFrame.rt"],function(e,t,n,a,s,i,o,l){"use strict";var r=e({displayName:s.PANEL_TYPES.CONFIRMATION,mixins:[a.propTypesFilterMixin,o],propTypes:{panelName:t.string.isRequired,panelTitle:t.string,width:t.string,height:t.string,onConfirm:t.func,shouldCloseByDefaultOnConfirm:t.bool,onCancel:t.func,onClose:t.func,confirmLabel:t.string,cancelLabel:t.string,shouldHideHeader:t.bool,shouldHideFooter:t.bool,shouldHideCancelButton:t.bool,type:t.oneOf(["important","normal"])},getDefaultProps:function(){return{type:"normal",confirmLabel:"confirmationPanelFrame_Confirm",cancelLabel:"confirmationPanelFrame_Cancel",shouldCloseByDefaultOnConfirm:!0}},getPanelProps:function(){var e=this.props.width,t=this.props.height;return n({style:{width:e,height:t}}).defaults(this.filteredProps()).omit("children").value()},onConfirm:function(){this.props.shouldCloseByDefaultOnConfirm&&this.props.close(),this.props.onConfirm&&this.props.onConfirm()},onCancel:function(){this.props.close(),this.props.onCancel&&this.props.onCancel()},onClose:function(){this.props.onClose?(this.props.close(),this.props.onClose()):this.onCancel()},getConfirmLabel:function(){return this.props.confirmLabel},getCancelLabel:function(){return this.props.cancelLabel},getConfirmButtonClass:function(){return("important"===this.props.type?"btn-danger-primary":"btn-confirm-primary")+" btn-md"},getSecondaryButtonClass:function(){return("important"===this.props.type?"btn-danger-secondary":"btn-confirm-secondary")+" btn-md"},shouldHideHeader:function(){return this.props.shouldHideHeader},shouldHideFooter:function(){return this.props.shouldHideFooter},render:l}),c=i.panelFrame(r);return c.pure=r,c}),define("panels/frames/bgSubPanelFrame.rt",["react","lodash","baseUI","symbols","util","baseUILib"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"background-sub-panel-frame"},this.getPanelProps()),this.props.label?e.createElement(i.PanelHeader,{ref:"header",key:"header",onMouseDown:function(e){this.startDrag(e,this.getDragLimits())}.bind(this),className:"dragger dark",onClose:this.props.close,onHelp:this.props.openHelpCenter},this.props.label?e.createElement("span",{key:"label"},s.translate(this.props.label)):null):null,e.createElement("div",{className:"content"+(this.props.contentClass?" "+this.props.contentClass:"")},this.props.children))}}),define("panels/frames/bgSubPanelFrame",["create-react-class","lodash","prop-types","panels/mixins/panelDragLimitsMixin","constants","util","higherOrderComponents","panels/frames/bgSubPanelFrame.rt"],function(e,t,n,a,s,i,o,l){"use strict";var r=e({displayName:s.PANEL_TYPES.BG_SUB_PANEL,mixins:[i.draggableMixin,a],propTypes:{panelName:n.string.isRequired,title:n.string,width:n.number,height:n.number,top:n.number,left:n.number,contentClass:n.string},getPanelProps:function(){var e=["width","height","top","left"],n={};t.forEach(e,t.bind(function(e){this.props[e]&&(n[e]=this.props[e])},this));var a=t.omit(this.props,"children",e);return a.style=n,a},render:l}),c=o.panelFrame(r);return c.pure=r,c}),define("panels/frames/emptyPanelFrame.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",this.filteredProps(),e.createElement("div",{className:"content"},this.props.children))}}),define("panels/frames/emptyPanelFrame",["create-react-class","prop-types","lodash","util","higherOrderComponents","panels/frames/emptyPanelFrame.rt"],function(e,t,n,a,s,i){"use strict";var o=e({displayName:"emptyPanelFrame",mixins:[a.propTypesFilterMixin],propTypes:{panelName:t.string.isRequired},render:i}),l=s.panelFrame(o);return l.pure=o,l}),define("panels/frames/frames",["panels/frames/leftPanelFrame","panels/frames/messagePanelFrame","panels/frames/toolPanelFrame","panels/frames/focusPanelFrame","panels/frames/helpPanelFrame","panels/frames/pagesPanelFrame","panels/frames/confirmationPanelFrame","panels/frames/bgSubPanelFrame","panels/frames/emptyPanelFrame"],function(e,t,n,a,s,i,o,l,r){"use strict";return{leftPanelFrame:e,messagePanelFrame:t,toolPanelFrame:n,focusPanelFrame:a,helpPanelFrame:s,pagesPanelFrame:i,confirmationPanelFrame:o,bgSubPanelFrame:l,emptyPanelFrame:r}}),define("panels/mixins/statefulKeyboardContextMixin",["lodash","util"],function(e,t){"use strict";var n=t.keyboardShortcuts,a=0,s=[];return{componentWillMount:function(){s.push(n.getContext()),this.myKeyboardContextName=function(e){return(e||"")+n.CONTEXTS.AUTOMATIC+"_"+a++}(this.keyboardShortcutsContextNamePrefix),n.registerContext(this.myKeyboardContextName,this.getCustomKeyboardShortcuts()),n.setContext(this.myKeyboardContextName)},componentWillUnmount:function(){if(n.unregisterContext(this.myKeyboardContextName),this.myKeyboardContextName===n.getContext()){var e=s.pop();n.setContext(e)}s.splice(s.indexOf(this.myKeyboardContextName),1)},getCustomKeyboardShortcuts:function(){return this.getKeyboardShortcuts?this.getKeyboardShortcuts():this.getDefaultShortcuts()},getDefaultShortcuts:function(){return{}}}}),define("panels/mixins/limitInitialPositionToStageMixin",["util","core","jquery"],function(e,t,n){"use strict";return{mixins:[e.singlePassDOMReadWriteMixin],measurePhase:function(e){if(e===this.LIFECYCLE_PHASES.MOUNT){var a=n(this.contentElement),s=t.utils.stageUtils.getStageLayout(),i=a.offset(),o=n(window.document).scrollTop(),l=i.top,r=o+(s.bottom-a.height()),c=s.right-a.width();return{top:Math.min(l,r),left:Math.min(Math.max(i.left,0),c)}}},patchPhase:function(e,t){if(t===this.LIFECYCLE_PHASES.MOUNT){n(this.contentElement).offset({top:e.top,left:e.left})}}}}),define("panels/mixins/reportBiEventOnUiChangeMixin",["prop-types","lodash","core","coreUtilsLib"],function(e,t,n,a){"use strict";function s(e,s,o){(function(e,s,o){var l=n.utils.uiControlsBIUtil.getEventDefinition(e);if(l){var r=n.utils.uiControlsBIUtil.getParams(e,o),c=t.merge({panel_name:this.constructor.displayName,control_name:s},r);this.getEditorAPI().selectedComponent.sendSelectedComponentBI(l,c)}else a.log.warn(i,e,this.constructor.displayName)}).call(this,e,s,o)}var i="There is no BI event for the control [%s], in [%s] panel.\n\tDear developer, Please add the control mapping to core/bi/controlsToEvents and the event to core/bi/events.json .";return{childContextTypes:{reportUIChange:e.func},componentDidMount:function(){if(!t.isFunction(this.getEditorAPI))throw new Error("You must use editorAPIMixin to use the reportBiEventOnUiChangeMixin")},getChildContext:function(){return{reportUIChange:s.bind(this)}}}}),define("panels/mixins/mixins",["panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/statefulKeyboardContextMixin","panels/mixins/panelDragLimitsMixin","panels/mixins/limitInitialPositionToStageMixin","panels/mixins/reportBiEventOnUiChangeMixin"],function(e,t,n,a,s){"use strict";return{disableKeyboardShortcutsMixin:e,statefulKeyboardContextMixin:t,panelDragLimitsMixin:n,limitInitialPositionToStageMixin:a,reportBiEventOnUiChangeMixin:s}}),define("panels/helpPanels/helpPanel.rt",["react","lodash","panels/frames/helpPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,helpUrl:this.props.helpUrl})}}),define("panels/helpPanels/helpPanel",["create-react-class","lodash","util","panels/helpPanels/helpPanel.rt"],function(e,t,n,a){"use strict";return e({displayName:"exampleHelpPanel",PropTypes:{helpUrl:function(e,t){if(!n.validate.url(e[t]))return new Error("helpUrl prop must be a string representing a valid url")}},render:a})}),define("panels/helpPanels/helpPanels",["panels/helpPanels/helpPanel"],function(e){"use strict";return{helpPanel:e}}),define("panels/errorPages/constants",[],function(){"use strict";return{404:{panelName:"404-errorPanel",title:"DYNAMIC_PAGES_404_ERROR_TITLE",symbol:"404_Error_message_illustration",errorBodyTop:"DYNAMIC_Pages_404_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error404",errorBodyBottom:"DYNAMIC_Pages_404_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"},500:{panelName:"500-errorPanel",title:"DYNAMIC_PAGES_500_ERROR_TITLE",symbol:"500_Error_message_illustration",errorBodyTop:"DYNAMIC_Pages_500_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error500",errorBodyBottom:"DYNAMIC_Pages_500_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"},403:{panelName:"403-errorPanel",title:"DYNAMIC_PAGES_403_ERROR_TITLE",symbol:"403_page_forbidden_message_illustration",errorBodyTop:"DYNAMIC_Pages_403_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error403",errorBodyBottom:"DYNAMIC_Pages_403_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"},other:{panelName:"other-errorPanel",title:"DYNAMIC_PAGES_GENERAL_ERROR_TITLE",symbol:"general_error_message_illustration",errorBodyTop:"DYNAMIC_Pages_General_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error",errorBodyBottom:"DYNAMIC_Pages_General_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"}}}),define("panels/errorPages/errorPanel.rt",["react","lodash","baseUI","symbols","util","baseUILib"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame error-page-panel-frame-z-index"},e.createElement("div",{className:"confirmation-panel-frame info-error-page error-page-panel"},e.createElement(i.PanelHeader,{className:"dark",key:"header",onClose:this.onClose,noHelpBtn:!0},e.createElement("span",{key:"headerTitle"},this.getConstants().title)),e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"error-logo"},e.createElement(n.symbol,{name:this.getConstants().symbol})),e.createElement("div",{className:"description-wrapper"},e.createElement("span",{className:"description-line"},s.translate(this.getConstants().errorBodyTop)),e.createElement("br",{}),e.createElement("span",{className:"description-line"},e.createElement("b",{},this.props.routerAddress)),e.createElement("br",{}),e.createElement("span",{className:"description-line"},s.translate(this.getConstants().errorBodyBottom)))),e.createElement("footer",{},e.createElement(n.button,{key:"cancelButton",className:"btn-confirm-secondary  btn-md",onClick:this.openErrorPageInNewTab,label:this.getConstants().btnViewErrorPage}),e.createElement(n.button,{className:"btn-confirm-primary  btn-md",onClick:this.onClose,label:this.getConstants().btnClose}))),e.createElement("div",{className:"dark-frame-overlay"}))}}),define("panels/errorPages/errorPanel",["create-react-class","lodash","core","util","panels/errorPages/constants","panels/errorPages/errorPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"404_errorPopup",propTypes:{},mixins:[a.translationMixin,n.mixins.editorAPIMixin],openErrorPageInNewTab:function(){window.open(this.getConstants().routerAddress)},getConstants:function(){if(this.constants)return this.constants;var e=s[this.props.errorInfo.statusCode];return e?(e=t.clone(e)).title=a.translate(e.title):(e=s.other,(e=t.clone(e)).title=a.translate(e.title).replace("{error_code}",this.props.errorInfo.statusCode)),this.constants=e,e},onClose:function(){this.getEditorAPI().panelManager.closePanelByName("panels.errorPages.errorPagePanel")},render:i})}),define("panels/errorPages/errorPagesPanels",["panels/errorPages/errorPanel"],function(e){"use strict";return{errorPagePanel:e}}),define("panels/focusPanels/welcomeVideoPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","symbols"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,isBareMode:!0,className:"welcome-screen-panel "+(this.props.className||""),onClose:this.handleShouldCloseOnBlur,keyboardShortcuts:this.getKeyboardShortcuts(),shouldNotCloseOnBlur:this.props.shouldNotCloseOnBlur},e.createElement("header",{className:"panel-header dark",key:"header"},e.createElement("button",{className:"close",onClick:function(){this.closeByX()}.bind(this)},e.createElement(s.symbol,{name:"headerCloseButton"})),e.createElement("div",{className:"welcome-panel-header-title"},this.props.title),e.createElement("div",{className:"welcome-panel-header-subtitle"},this.props.subtitle),e.createElement("div",{className:"videoInput-wrapper"},e.createElement("iframe",{src:this.props.linkedVideoData,frameBorder:"0",allowFullScreen:!0}),e.createElement("div",{className:"video-pixel-cover"}))),e.createElement("div",{className:"content "+this.getContentClass()},e.createElement("p",{},this.getContent("line1")," ",this.getContent("link")),e.createElement("p",{},this.getContent("line2"))),"\n    ",this.props.children,"\n\n")}}),define("panels/focusPanels/welcomeVideoPanel",["create-react-class","prop-types","lodash","core","util","panels/focusPanels/welcomeVideoPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=a.bi;return e({displayName:"welcomeScreenPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{title:t.string,subtitle:t.string,linkedVideoData:t.string,content:t.object,contentClass:t.string,className:t.string,panelName:t.string,onCloseByX:t.func,onCloseByESC:t.func},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},closeByX:function(){n.isFunction(this.props.onCloseByX)&&this.props.onCloseByX(),this.close()},getKeyboardShortcuts:function(){return{esc:this.closeByESC}},closeByESC:function(){n.isFunction(this.props.onCloseByESC)?this.props.onCloseByESC():this.getEditorAPI().bi.event(o.events.welcomeVideoPanel.WELCOME_SCREEN_CLOSED,{panel_name:this.props.panelName,origin:"ESC"}),this.close()},handleShouldCloseOnBlur:function(){return this.getEditorAPI().bi.event(o.events.welcomeVideoPanel.WELCOME_SCREEN_CLOSED,{panel_name:this.props.panelName,origin:"outerClick"}),!0},getContent:function(e){var t=this.props.content;return t?s.translate(t[e]):""},getContentClass:function(){return this.props.contentClass||""},render:i})}),define("panels/focusPanels/exampleFocusPanel.rt",["react","lodash","panels/frames/focusPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{title:"Example Focus Panel",panelName:this.props.panelName,className:"example-focus-panel"},e.createElement("iframe",{className:"content-iframe",src:"http://www.w3schools.com"}))}}),define("panels/focusPanels/exampleFocusPanel",["create-react-class","panels/focusPanels/exampleFocusPanel.rt"],function(e,t){"use strict";return e({displayName:"exampleFocusPanel",render:t})}),define("panels/focusPanels/blogManagerPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"blog-manager-panel"},e.createElement(a,{panelName:this.props.panelName,className:"blog-manager-panel",shouldHideHeader:!0},e.createElement("iframe",{id:"blogManager",ref:"iframe",width:"100%",height:"100%",src:this.state.src,frameBorder:"0",allowFullScreen:!0})))}}),define("panels/focusPanels/blogManagerPanel",["reactDOM","create-react-class","prop-types","lodash","util","core","panels/focusPanels/blogManagerPanel.rt"],function(e,t,n,a,s,i,o){"use strict";return t({displayName:"blogManagerDialog",mixins:[s.postMessageMixin,i.mixins.editorAPIMixin],propTypes:{blogManagerAppPathType:n.string,api:n.object},getInitialState:function(){return{src:this.props.api.frameUrl}},componentWillMount:function(){this.setPostMessageHandler(null,this.onMessageFromDialog)},onMessageFromDialog:function(e){switch(e.type){case"ready":this.onReady();break;case"anchors":e.payload.pageId&&this.onAnchorsRequest(e.payload.pageId);break;case"cancel":void 0!==e.payload&&e.payload.postsUnchanged||this.props.api.reloadAppPartsMethod(),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}},onAnchorsRequest:function(t){var n=JSON.stringify({type:"anchors",payload:{anchorsData:this.props.api.getAnchorsByPage(t),pageId:t}});e.findDOMNode(this.refs.iframe).contentWindow.postMessage(n,"*")},onReady:function(){var t=JSON.stringify({type:"settings",payload:{isOpenFromSantaEditor:!0,themeData:this.props.api.themeData,themeDataSchema:this.props.api.themeDataSchema,WIXAPPS_EDITOR_STYLES:this.props.api.WIXAPPS_EDITOR_STYLES,CK_EDITOR_FONT_STYLES:this.props.api.CK_EDITOR_FONT_STYLES,CustomUsedFontsUrl:this.props.api.CustomUsedFontsUrl,FontsCssUrls:this.props.api.FontsCssUrls,FontsData:this.props.api.FontsData,FontsMetadata:this.props.api.FontsMetadata,pagesData:this.props.api.pagesData,currentPageId:this.props.api.currentPageId,charSet:this.props.api.charSet,siteUrl:this.props.api.siteUrl,isSitePublished:this.props.api.isSitePublished,imageOrganizerUrl:this.props.api.imageOrganizerUrl,urlFormat:this.props.api.urlFormat,blogPageTitle:this.props.api.blogPageTitle,singlePostLayout:this.props.api.singlePostLayout,siteTitle:this.props.api.siteTitle,isHeroImageEnabled:this.props.api.isHeroImageEnabled,isHttpsEnabled:this.props.api.isHttpsEnabled}});e.findDOMNode(this.refs.iframe).contentWindow.postMessage(t,"*")},render:o})}),define("panels/focusPanels/shoutOutTemplatesPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"shoutout-templates-panel"},e.createElement(a,{panelName:"panels.focusPanels.shoutOutTemplatesPanel",className:"shoutout-templates-panel",shouldHideHeader:!0,onClose:this.onClose},e.createElement("iframe",{id:"shoutOutTemplates",ref:"iframe",width:"100%",height:"100%",src:this.props.frameUrl,frameBorder:"0",allowFullScreen:!0})))}}),define("panels/focusPanels/shoutOutTemplatesPanel",["create-react-class","prop-types","lodash","core","util","panels/focusPanels/shoutOutTemplatesPanel.rt"],function(e,t,n,a,s,i){"use strict";var o={evid:91,src:36,endpoint:"shout",sampleRatio:0,fields:{is_first:"bool",msid:"guid",referral_info:"string"}};return e({displayName:"shoutOutDialog",mixins:[a.mixins.editorAPIMixin,s.postMessageMixin],propTypes:{frameUrl:t.object},onClose:function(){return this.getEditorAPI().bi.event(o,{is_first:!0,referral_info:"editor panel"}),!0},componentWillMount:function(){this.setPostMessageHandler(null,this._onMessageFromDialog)},_onMessageFromDialog:function(e){"cancel"===e.type&&this.getEditorAPI().panelManager.closePanelByName("panels.focusPanels.shoutOutTemplatesPanel")},render:i})}),define("panels/focusPanels/aviaryPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,shouldHideHelp:!0,title:s.translate("AVIARY_PANEL_TITLE"),className:"aviary-panel",onClose:this.onCloseFrame},e.createElement("div",{className:"aviary-dialog"},e.createElement("div",{ref:"content",id:"aviary_dialog_editor_content_wrapper"}),e.createElement("div",{id:"message",className:t({hidden:!this.state.showMessage}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement("div",{className:"message-bg"},e.createElement("span",{className:t({hidden:null==this.state.counter}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),id:"progress"},e.createElement("span",{id:"counter"},this.state.counter,"%")),e.createElement("span",{id:"messageContent"},this.state.messageText),e.createElement("span",{id:"cancel-button",className:t({hidden:!this.state.showCancelButton}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.onCancelClicked},s.translate("AVIARY_CANCEL_UPLOAD"))))))}}),define("panels/focusPanels/aviaryPanel",["reactDOM","create-react-class","prop-types","lodash","jquery","core","util","panels/focusPanels/aviaryPanel.rt","coreUtilsLib"],function(e,t,n,a,s,i,o,l,r){"use strict";function c(e){var t={},n=e.imageLink.value,a=n.uri,s=/(^https?)|(^data)/.test(a)?"":"/static/media/",i=/(jpg$)|(jpeg$)/i.test(a)?"image/jpeg":"image/png";return(n.width>C||n.height>C)&&(a=a+"_"+C),t.tmpImageSrc=N+s+a,t.tmpImageType=i,t}function p(e,t,n,a,s,i){e=e||"GET";var o=new window.XMLHttpRequest;o.open(e,t,!0),o.onreadystatechange=function(){4===o.readyState&&(200===o.status||304===o.status?s(o):a(o))},o.setRequestHeader("Content-type",i||"text/plain"),o.send(n)}function u(e,t){!function(e,t){var n=function(e){try{e=JSON.parse(e.responseText)}catch(t){e.status="error",e.errorDescription="Parse error: ticket returned unexpected response"}t(e)};p("GET",e+"?accept=json",null,n,n,"text/plain")}(S+"/media/tickets/get",function(n){var s=n.responseValue;if(!s)return _("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+v.AVIARY_UPLOAD_GET_TICKET_FAILED.errorCode),P.call(this,!0),!1;(function(e,t,n){var s=m,i=function(){var e=this.responseXML||this.responseText;n(s(e))},o={datauri:t,ut:e,s:"media"},l=[],r=void 0;for(r in o)o.hasOwnProperty(r)&&l.push(r+"="+o[r]);l=l.join("&");var c={onLoad:i,onError:i,onTimeout:i,onUploadProgress:function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);this.setState({counter:t})}}.bind(this),onAbort:this.onAbort};(function(e,t,n,s,i,o){e=e||"GET",s=s||{};var l=!0,r="undefined"!=typeof XDomainRequest;r?(this._xhrObject=new window.XDomainRequest,l=void 0):this._xhrObject=new window.XMLHttpRequest;var c=this._xhrObject;c.open(e,t,l),c.timeout=3e5,c.onload=s.onLoad||a.noop,c.onerror=s.onError||a.noop,c.ontimeout=s.onTimeout||a.noop,c.onprogress=s.onProgress||a.noop,c.upload&&c.upload.addEventListener("progress",s.onUploadProgress||a.noop,!1);r||(c.onabort=s.onAbort||a.noop,c.setRequestHeader("Content-type",i||"text/plain"),c.withCredentials=Boolean(o));c.send(n)}).call(this,"POST",T,l,c,"application/x-www-form-urlencoded",!1)}).call(this,s,e,t)}.bind(this))}function d(){var e=this.getEditorAPI(),t=e.selection.getSelectedComponents(),n=e.components.layout.get(t);return n.width+":"+n.height}function m(e){var t=void 0,n=void 0,a=void 0;if("string"==typeof e?(a=new window.Element("div")).innerHTML=e:a=e,a?n=(t=a.querySelector("upload")).getAttribute("success"):(t={getAttribute:function(){return"No Response Error"}},n=!1),o.stringUtils.isTrue(n)){var s=a.querySelector("properties"),i=a.querySelector("sys_meta");return{status:t.getAttribute("errorDescription"),originalName:i.getAttribute("original_file"),mimeType:i.getAttribute("mime_type"),fileUrl:i.getAttribute("file_url"),iconUrl:i.getAttribute("icon_url"),fileSize:i.getAttribute("file_size"),width:i.getAttribute("width"),height:i.getAttribute("height"),ver:i.getAttribute("ver"),fileName:s.getAttribute("file_name")}}return{status:"error",origin:t.getAttribute("origin"),errorCode:t.getAttribute("errorCode"),errorDescription:t.getAttribute("errorDescription")}}function h(e){if("error"===(e=e||{}).status||"timeout"===e.status)return P.call(this,!1),_("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+v.AVIARY_UPLOAD_TO_STATIC_FAILED.errorCode),!1;var t=new Date,n=[t.getFullYear(),t.getMonth()+1,t.getDate(),[t.getHours(),t.getMinutes(),t.getSeconds()].join(":")].join("-");this._newImageUri=e.fileName,e.originalName=(this.props.imageLink.value.title||"Edited Image")+" "+n,function(e){var t=function(e){var t="<mediaItemList>";return t+="<mediaItem",t+=' mediaType="picture',t+='" componentType="photo',t+='" fileName="'+e.fileName,t+='" originalFileName="'+e.originalName,t+='" fileSize="'+e.fileSize,t+='" width="'+e.width,t+='" height="'+e.height,t+='" mimeType="'+e.mimeType,t+='" iconURL="'+e.iconUrl,t+='" version="'+e.ver,t+='" tags="'+y,t+='" />\n',t+="</mediaItemList>"}(e),n=S+"/media/private/add",s=function(){(function(){(function(){if(!this._newImageSize||!this._newImageUri)return;var e=this.props.imageLink.value.originalImageDataRef;e||delete(e=a.cloneDeep(this.props.imageLink.value)).originalImageDataRef;this.props.imageLink.requestChange({height:this._newImageSize.height,width:this._newImageSize.width,uri:this._newImageUri,originalImageDataRef:e}),this._newImageSize=null,this._newImageUri=null}).call(this),function(){this.setState({disableCloseButton:!1})}.call(this),g.call(this,{result:"OK"})}).call(this)}.bind(this);p("POST",n,t,function(){return _("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+v.AVIARY_UPLOAD_UPDATE_MEDIA_FAILED.errorCode),!1},s,"application/xml")}.call(this,e)}function g(e){e=e||{},this.state.disableCloseButton||(this._aviaryCloseCause=e.result||"CANCEL",k.close(),this._forceClose||this.setTimeoutNamed("close",function(){this._forceClose=!0}.bind(this),2e3))}function f(e,t){var n=void 0;n=e?{messageText:e,showMessage:!0}:{showMessage:!1},t?(n.showCancelButton=!0,window.XDomainRequest||(n.counter=0)):a.merge(n,{showCancelButton:!1,counter:null}),this.setState(n)}function P(e,t,n){k&&window.AV&&window.AV.paintWidgetInstance&&(e?(k.disableControls(),k.showWaitIndicator(),this.setState({disableCloseButton:!0}),f.call(this,t,n)):(k.enableControls(),k.hideWaitIndicator(),this.setState({disableCloseButton:!1,showMessage:!1})))}function _(e,t,n){var a=t&&b(t);(window&&window.confirm||function(){})(a,n)}function E(e){return function(){L.reactFunctions[e]&&L.reactFunctions[e]()}}var b=o.translate,C=1500,N=o.serviceTopology.htmlEditorRootUrl;N=N?N.replace(/html\/editor\/?/,""):"http://editor.wix.com/";var I=o.serviceTopology.mediaServerRoot,S="//editor."+I,T="//0.static."+I+"/api/add_file",y="edited image",v={AVIARY_MISSING_ID_IN_SKIN:{errorCode:21030,desc:"Missing an id on this._skinParts.content, it is required for Aviary to work"},AVIARY_DIALOG_WRONG_DATA_TYPE:{errorCode:21031,desc:"Data is missing or Data Type is not an Image Data"},AVIARY_NOT_LOADED:{errorCode:21032,desc:"Aviary.js was not loaded after 5000ms"},AVIARY_FORCE_CLOSED:{errorCode:21033,desc:"Aviary dialog was not closed on first try, forced it to close on second try"},AVIARY_UPLOAD_GET_TICKET_FAILED:{errorCode:21034,params:{c1:"error message"},desc:"Failed on getting ticket for upload."},AVIARY_UPLOAD_TO_STATIC_FAILED:{errorCode:21035,params:{c1:"error message"},desc:"Uploading image to statics failed."},AVIARY_UPLOAD_UPDATE_MEDIA_FAILED:{errorCode:21036,params:{c1:"error message"},desc:"Updating private media with uploaded file failed."},AVIARY_RETURNED_AN_ERROR:{errorCode:21037,params:{c1:"error message",i1:"error code"},desc:"Aviary editor failed on external script error."},AVIARY_REACHED_INNER_SAVE_FUNCTION:{errorCode:21038,desc:"Aviary somehow called its inner save function, this does not supposed to happen."}},k=void 0,L={reactFunctions:{},onLoad:E("onLoad"),onAviarySave:E("onAviarySave"),onAviaryClose:E("onAviaryClose"),onAviaryReady:E("onAviaryReady"),onAviarySaveButtonClick:E("onAviarySaveButtonClick"),onError:E("onError")};return t({displayName:"aviaryPanel",mixins:[o.postMessageMixin,r.timersMixins.timeoutsMixin,i.mixins.editorAPIMixin],propTypes:{imageLink:n.object,onDialogResult:n.func,editorAPI:n.object.isRequired},getInitialState:function(){var e=c(this.props);return a.merge(e,{tmpImageId:"some_random_id_"+Date.now(),disableCloseButton:!0,showMessage:!0,messageText:null,showCancelButton:!1,counter:null}),e},componentWillReceiveProps:function(e){this.setState(c(e))},componentDidMount:function(){(function(){L.reactFunctions={onLoad:this.onLoad,onAviarySave:this.onAviarySave,onAviaryClose:this.onAviaryClose,onAviaryReady:this.onAviaryReady,onAviarySaveButtonClick:this.onAviarySaveButtonClick,onError:this.onError},k?L.onLoad():k=new window.Aviary.Feather({apiKey:"57b23071b",apiVersion:3,tools:"crop,orientation,enhance,effects,frames,brightness,contrast,saturation,warmth,focus,sharpness,draw,redeye,whiten,blemish,stickers,text",maxSize:C,theme:"minimum",noCloseButton:!0,displayImageSize:!0,onLoad:L.onLoad,onSave:L.onAviarySave,onClose:L.onAviaryClose,onReady:L.onAviaryReady,onSaveButtonClicked:L.onAviarySaveButtonClick,onError:L.onError,appendTo:"aviary_dialog_editor_content_wrapper",language:function(e){return e?e.toLowerCase():"en"}(this.getEditorAPI().getLanguageCode()),launchDelay:0})}).call(this),this.setTimeoutNamed("aviaryIsDeadTimer",function(){this.setState({disableCloseButton:!1})}.bind(this),1e4),f.call(this,b("AVIARY_LOAD_MESSAGE","Loading Image Editor..."),!1)},componentWillMount:function(){var e=s("<img/>",{id:this.state.tmpImageId,src:this.state.tmpImageSrc,type:this.state.tmpImageType,crossOrigin:""});this.image=e.get(0)},launchAviary:function(){var e=b("AVIARY_ORIGINAL_ASPECT");k.launch({image:this.state.tmpImageId,cropPresetDefault:e,cropPresets:[[e,d.call(this)],"Custom"]})},onLoad:function(){var e=b("AVIARY_ORIGINAL_ASPECT");k.launch({image:this.image,cropPresetDefault:e,cropPresets:[[e,d.call(this)],"Custom"]})},onAviarySave:function(){return!1},onAviaryClose:function(){this.clearTimeoutNamed("close"),this._forceClose=!1,this.props.onDialogResult&&this.props.onDialogResult(this._aviaryCloseCause)},onAviaryReady:function(){this.clearTimeoutNamed("aviaryIsDeadTimer"),this.setState({showMessage:!1,disableCloseButton:!1})},onAviarySaveButtonClick:function(){var t=JSON.parse(k.getActionList()),n=a.get(t,"actionlist.length",0)>1,s=e.findDOMNode(this.refs.content).querySelector("#avpw_canvas_element"),i="";return n?(P.call(this,!0,b("AVIARY_WAIT_MESSAGE","Uploading image, please wait..."),!0),i=encodeURIComponent(s.toDataURL(this.state.tmpImageType)),this._newImageSize={width:s.width,height:s.height},u.call(this,i,h.bind(this))):g.call(this,{result:"CANCEL"}),!1},onProgress:function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);this.setState({counter:t})}},onAbort:function(){return P.call(this,!1),this._xhrObject=null,!1},onError:function(e){return _(0,"ERROR_AVIARY_GENERAL_MESSAGE","Codes: "+v.AVIARY_RETURNED_AN_ERROR.errorCode+", "+e.code),!1},onCloseFrame:function(){g.call(this)},componentWillUnmount:function(){g.call(this)},onCancelClicked:function(){this._xhrObject?(this._xhrObject.abort(),window.XDomainRequest&&this.onAbort()):P.call(this,!1)},render:function(){return l.call(this)}})}),define("panels/focusPanels/organizeImagesPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util","symbols"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,helpId:this.state.helpId,className:"organize-images-panel",shouldNotCloseOnBlur:!0,shouldHideHeader:!0,onClose:this.onPanelClose,width:Math.round(.8*window.innerWidth).toString(),height:Math.round(.8*window.innerHeight).toString()},e.createElement("iframe",{id:"organizeImages",ref:"iframe",className:t({hidden:!this.state.show,transition:!0}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onLoad:this.onLoad,width:"100%",height:"100%",src:this.getFrameUrl(),frameBorder:"0",allowTransparency:!0}),e.createElement(n.preloader,{ref:"preloader",className:t({hidden:this.state.show,transition:!0}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")}))}}),define("panels/focusPanels/organizeImagesPanel",["reactDOM","create-react-class","prop-types","lodash","util","panels/focusPanels/organizeImagesPanel.rt","pms","core","helpIds","higherOrderComponents","coreUtilsLib"],function(e,t,n,a,s,i,o,l,r,c,p){"use strict";function u(){this.getEditorAPI().bi.event(S.ORGIMAGES_DIALOG_LOADED,{c1:"new Organize Images"}),this._isReady=!0;var e=function(){return{images:this.props.imageDatas,translation:s.imageOrganizerUtils.getTranslation(this.props.galleryType),topology:s.serviceTopology,isPreset:this.props.isPreset,userSets:this.userSets}}.call(this);this._pms.send("set",e)}function d(e){var t=e.data&&e.data.helpId;if(t){var n={panel_name:this.props.panelName,origin:l.constants.BI.HELP.ORIGIN.PANEL,component:this.getEditorAPI().selection.getSelectedComponentType()};this.getEditorAPI().panelManager.openHelpCenter(t,null,null,n)}}function m(){var e=h.call(this),t=void 0,n=void 0;this.props.galleryType===I?(n="6377d68a-a81f-4fd7-a675-f5a79f7e7ea9",t=s.translate("ORGANIZE_ICONS_DIALOG_TITLE")):(n=r.EXTERNAL.ORGANIZE_IMAGES,t=s.translate("OrganizeImages_IMAGES_DIALOG_TITLE")),this.setState({helpId:n,title:t,show:!0}),e.contentWindow.focus()}function h(){return e.findDOMNode(this.refs.iframe)}function g(e){var t=this.props.createImageDataItem();return a.merge(t,e),t}function f(e){var t=e.data,n=this.props.imageDatas,s=void 0,i=a.map(t,a.bind(function(e){return s=a.includes(e.id,"new_")?g.call(this,e.data):function(e,t){var n=void 0,s=a.find(e,{id:t.id});return s&&(n=a.merge(s.data,t.data)),n}(n,e),function(e){a.get(e,"title.length",0)>100&&(e.title=e.title.substring(0,100))}(s),s},this));this.props.imagesChanged(i)}function P(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}function _(e){var t=this.getEditorAPI(),n=e.data,s=t.bi.event;p.log.info("bi events",e),a.forOwn(n,function(e,t){s(S[t],n[t])})}function E(e){var t=this.getEditorAPI(),n=e.data,a=n.params||{};p.log.info("bi events",e),t.bi.event(S[n.name],a)}function b(e){e=e.data;var t=this.getEditorAPI();t.openLinkPanel({defaultLinkType:"ExternalLink",link:e.data.link,callback:function(n){n&&n.type||(n=null),this._pms.send("setLink",{link:n,linkText:n?s.link.getLinkValueAsString(t,n,!0):"",imgData:e,id:e.id})}.bind(this)})}function C(e,t,n){var i=void 0,o={title:"ORGANIZE_IMAGES_MEDIA_MNGR_TITLE",submit:"ORGANIZE_IMAGES_MEDIA_MNGR_SUBMIT"},l=this.getEditorAPI().mediaServices.mediaManager;switch(this.props.galleryType){case I:a.forEach(o,function(e,t){o[t]=e.replace("IMAGES","ICONS")}),i=l.categories.ICON_SOCIAL;break;default:i=l.categories.IMAGE}var r=e?"_MANY":"_ONE";l.open(i,{multiSelect:e,translation:{title:s.translate(o.title+r),submitButton:n?s.translate("MMGR_submitbutton_gallery_uploads_choose"):s.translate("MMGR_submitbutton_gallery_uploads_add")},callback:t.bind(this)})}function N(){return"new_"+T++}var I="socialIcons",S=l.bi.events.organizeImages,T=0,y=t({displayName:"organizeImagesPanel",mixins:[s.postMessageMixin,l.mixins.editorAPIMixin],propTypes:{imageDatas:n.arrayOf(n.object).isRequired,isPreset:n.bool.isRequired,galleryType:n.oneOf(["images",I]).isRequired,imagesChanged:n.func.isRequired,createImageDataItem:n.func.isRequired},getUserPrefs:function(){return this.getEditorAPI().getUserPreferences()},getInitialState:function(){return this.userSets=this.getUserPrefs().global.get("OrganizeImages"),this._pms=new o({connectionID:"OrganizeImages"}),this._pms.on("ready",u,this),this._pms.on("setup",m,this),this._pms.on("closed",P,this),this._pms.on("openLinkDialog",b,this),this._pms.on("save",f,this),this._pms.on("bi",E,this),this._pms.on("biChanges",_,this),this._pms.on("openHelpCenter",d,this),this._pms.on("openMediaGallery",this.openMediaGallery,this),this._pms.on("openMediaGalleryForReplace",this.openMediaGalleryForReplace,this),{show:!1}},openMediaGallery:function(){C.call(this,!0,function(e){if(e){var t=[];a.forEach(e,a.bind(function(e){var n=g.call(this,{uri:e.fileName,height:e.height,width:e.width,title:e.title||e.fileName});t.push({id:N(),data:n,linkText:""})},this)),this._pms.send("add",t)}},!1)},openMediaGalleryForReplace:function(e){var t=e.data.position;C.call(this,!1,function(e){if(e){var n=[];a.forEach(e,a.bind(function(e){var t=g.call(this,{uri:e.fileName,height:e.height,width:e.width,title:e.title||e.fileName});n.push({id:N(),data:t,linkText:""})},this)),n.length<=0||this._pms.send("replace",{position:t,data:n[0]})}},!0)},getFrameUrl:function(){return s.imageOrganizerUtils.getFrameUrl(this.props.galleryType)},componentDidMount:function(){this._pms.setTargetWindow(h.call(this).contentWindow),h.call(this).addEventListener("load",this.onFrameLoad)},onFrameLoad:function(){this._pms.on("setUserSets",this.setUserSettings,this)},setUserSettings:function(e){var t=this.userSets=e.data;this.getUserPrefs().global.set("OrganizeImages",a.assign(t,{saveNow:!0})).catch(a.noop)},onPanelClose:function(){var e=this.getEditorAPI();return!this._isReady||(this._pms.send("saveAndClose"),e.bi.event(S.ORGIMAGES_CLICK_CLOSE),!1)},render:i}),v=c.connectEditorAPI(function(e){var t=e.selection.getSelectedComponents();return{imageDatas:function(e,t){return a.map(e.items,function(e){var n=e.link;return{id:N(),data:e,linkText:n?s.link.getLinkValueAsString(t,n,!0):""}})}(e.components.data.get(a.head(t)),e)}})(y);return v.pure=y,v}),define("panels/focusPanels/popupTemplateMapper",["lodash"],function(e){"use strict";return function(t,n){return{close:e.partial(t.panelManager.closePanelByName,n.panelName),openHelpCenter:t.panelManager.openHelpCenter,selectedComponentType:t.selection.getSelectedComponentType()}}}),define("panels/focusPanels/popupTemplate.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","baseUILib","symbols","util"],function(e,t,n,a,s,i,o){"use strict";return function(){function l(){var l=o.translate;return e.createElement(n,{shouldHideHeader:!0,isSingleInstance:this.props.isSingleInstance,panelName:this.props.panelName,shouldNotCloseOnBlur:this.props.shouldNotCloseOnBlur},e.createElement("div",{className:"popup-template-panel "+(this.props.className||"")},e.createElement("div",{className:"panel-header dark"},e.createElement("button",{className:"close",onClick:this.props.close},e.createElement(i.symbol,{name:"headerCloseButton"})),this.props.h1text?e.createElement("h1",{key:"h1text"},l(this.props.h1text)):null,this.props.h2text?e.createElement("h2",{key:"h2text"},l(this.props.h2text)):null,e.createElement("div",{className:"image "+(this.props.imageClassName||"")},this.props.symbolName?e.createElement(a.symbol,{key:"symbol",name:this.props.symbolName,className:"popup-symbol"}):null)),e.createElement("div",{className:"content"},e.createElement("div",{className:"panel-text"},e.createElement("span",{},l(this.props.bodyText)+" "),this.props.helpId?e.createElement("span",{key:"learnMoreLink",className:"learn-more-link",onClick:this.openLearnMore},l("Notification_Box_Learn_More")):null),e.createElement("div",{className:"bottom-controls"},this.props.hideDontShowCheckbox?null:e.createElement(s.Checkbox,{value:this.props.dontShowAgain,onChange:this.props.toggleDontShowAgain,key:"dont-show-again-checkbox",labelAfterSymbol:!0,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again"}),this.hasCustomButtons()?null:e.createElement(a.button,{className:"btn-ok btn-md",onClick:this.props.close,label:this.props.btnText||"Notification_Box_Got_It",key:"2097"}),this.hasCustomButtons()?e.createElement.apply(this,["span",{key:"2367"},t.map(this.props.buttons,function(t,n,a){return e.createElement(s.Button,{key:a,className:n.className,onClick:this.handleBtnClick.bind(this,n),automationId:n.automationId},n.icon?e.createElement(i.symbol,{key:"symbol-"+n.icon,className:n.label?"symbol-with-label":"",name:n.icon}):null,e.createElement("span",{"data-hint-id":n.hintId},"\n                            ",t(n.label),"\n                        "))}.bind(this,l))]):null))))}return l.apply(this,[])}}),define("panels/focusPanels/popupTemplate",["create-react-class","prop-types","lodash","core","higherOrderComponents","panels/focusPanels/popupTemplateMapper","panels/focusPanels/popupTemplate.rt"],function(e,t,n,a,s,i,o){"use strict";function l(e,t,a){var s="Warning: Failed propType: ";return!e.symbolName^!e.imageClassName?e[t]&&!n.isString(e[t])?new Error(s+"Invalid prop `"+t+"` of type `"+_typeof(e[t])+"` supplied to `"+a+"`, expected `string`."):void 0:new Error(s+a+" must have either symbolName or imageClassName but not both.")}var r=e({displayName:"popupTemplate",propTypes:{close:t.func.isRequired,panelName:t.string.isRequired,h1text:t.string,h2text:t.string,symbolName:l,imageClassName:l,bodyText:t.string,btnText:t.string,buttons:t.arrayOf(t.object),helpId:t.string,dontShowAgain:t.bool,toggleDontShowAgain:t.func.isRequired,hideDontShowCheckbox:t.bool,shouldNotCloseOnBlur:t.bool},openLearnMore:function(){var e={component:this.props.selectedComponentType,panel_name:this.props.panelName,origin:a.constants.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.props.openHelpCenter(this.props.helpId,null,e)},handleBtnClick:function(e){n.isFunction(e.onClick)&&e.onClick(),this.props.close()},hasCustomButtons:function(){return this.props.buttons&&this.props.buttons.length},render:o}),c=s.connectEditorAPI(i)(s.renderWhenMutated(r)),p=s.linkUserPreferences(c);return p.pure=r,p}),define("panels/focusPanels/outOfGridMobilePanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"Notification_Box_Out_Grid_Mobile_Title",h2text:"Notification_Box_Out_Grid_Mobile_Subtitle",symbolName:"outOfGridMobile",bodyText:"Notification_Box_Out_Grid_Mobile_Text",helpId:"769b8807-30b7-4ee4-8a7b-93674099732f",dontShowAgainKey:n.constants.USER_PREFS.OUT_OF_GRID.MOBILE.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfGridMobilePanel",["create-react-class","core","panels/focusPanels/outOfGridMobilePanel.rt"],function(e,t,n){"use strict";return e({displayName:"outOfGridMobilePanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/outOfGridDesktopPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,className:"out-of-grid-desktop-panel",h1text:"Notification_Box_Out_Grid_Desktop_Title",h2text:"Notification_Box_Out_Grid_Desktop_Subtitle",symbolName:"outOfGridDesktop",bodyText:"Notification_Box_Out_Grid_Desktop_Text",helpId:"b712fa83-f939-4ec4-ab68-b7f968d90fab",dontShowAgainKey:n.constants.USER_PREFS.OUT_OF_GRID.DESKTOP.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfGridDesktopPanel",["create-react-class","core","panels/focusPanels/outOfGridDesktopPanel.rt"],function(e,t,n){"use strict";return e({displayName:"outOfGridDesktopPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/outOfContainerGridPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"Notification_Box_Out_Column_Desktop_Title",imageClassName:"container-out-of-grid",bodyText:"Notification_Box_Out_Column_Desktop_Text",helpId:"88ed6daf-e9e1-4531-bdfb-bc00fafdb9d0",dontShowAgainKey:n.constants.USER_PREFS.OUT_OF_GRID.CONTAINER.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfContainerGridPanel",["create-react-class","core","panels/focusPanels/outOfContainerGridPanel.rt"],function(e,t,n){"use strict";return e({displayName:"outOfContainerGridPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/dragToHeaderPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"Notification_Box_Header_Added_Title",h2text:"Notification_Box_Header_Added_Subtitle",symbolName:"showOnAllPages",bodyText:"Notification_Box_Header_Added_Text",helpId:"db639aa7-f012-4526-9390-ef466c95f19d",dontShowAgainKey:n.constants.USER_PREFS.DRAG_TO_HEADER.DONT_SHOW_AGAIN,userPrefType:n.constants.USER_PREFS.TYPES.SITE})}}),define("panels/focusPanels/dragToHeaderPanel",["create-react-class","core","panels/focusPanels/dragToHeaderPanel.rt"],function(e,t,n){"use strict";return e({displayName:"dragToHeaderPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/attachToSOSPPanelMapper",[],function(){"use strict";return function(e){return{closePanel:e.panelManager.closePanelByName,openHelpCenter:e.panelManager.openHelpCenter,userPreferences:e.userPreferences}}}),define("panels/focusPanels/attachToSOSPPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","symbols","util"],function(e,t,n,a,s,i){"use strict";return function(){return function(){var t=i.translate;return e.createElement(n,{ref:"panelFrame",className:"popup-medium attach-to-sosp-panel",shouldHideHeader:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement(a.Composites.BigPanelHeader,{},e.createElement(a.PanelHeaderCenteredText,{title:"Notification_Box_MembersBar_Added_Title",subtitle:"Notification_Box_MembersBar_Added_Subtitle",titleType:"T16",onClose:this.onClose}),e.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},e.createElement("img",{className:"illustration",src:this.getIllustrationSrc()}))),e.createElement(a.Composites.PanelContent,{},e.createElement(a.Composites.RichText,{},e.createElement(a.RichText,{type:"T06"},e.createElement("p",{},t("Notification_Box_MembersBar_Added_Text"),"\n                    ",e.createElement("a",{onClick:this.onLearnMoreClick}," ",t("Notification_Box_Learn_More")))))),e.createElement(a.Composites.ActionSetHorizontal,{},e.createElement(a.Checkbox,{value:this.state.doNotShowAgain,label:"Notification_Box_Dont_Show_Again",labelAfterSymbol:!0,onChange:this.onDoNotShowAgainClick}),e.createElement(a.Button,{className:"btn-md",onClick:this.onClose},e.createElement("span",{},t("Notification_Box_Got_It")))))}.apply(this,[])}}),define("panels/focusPanels/attachToSOSPPanel",["create-react-class","prop-types","core","util","helpIds","higherOrderComponents","panels/focusPanels/attachToSOSPPanelMapper","panels/focusPanels/attachToSOSPPanel.rt"],function(e,t,n,a,s,i,o,l){"use strict";var r=e({displayName:"AttachDetachSOSPPanel",propTypes:{panelName:t.string.isRequired,closePanel:t.func.isRequired,openHelpCenter:t.func.isRequired,userPreferences:t.object.isRequired},getInitialState:function(){return{doNotShowAgain:!!this.props.userPreferences.site.get(n.constants.USER_PREFS.SOSP.PANELS.ATTACH_DO_NOT_SHOW_AGAIN)}},getKeyboardShortcuts:function(){return{esc:this.onClose}},getIllustrationSrc:function(){var e=2===a.browserUtil.getDevicePixelRatio()?"panels/focusPanels/addRemoveFromBarRetina.gif":"panels/focusPanels/addRemoveFromBar.gif";return a.media.getMediaUrl(e)},onClose:function(){this.state.doNotShowAgain&&this.props.userPreferences.site.set(n.constants.USER_PREFS.SOSP.PANELS.ATTACH_DO_NOT_SHOW_AGAIN,!0),this.props.closePanel(this.props.panelName)},onLearnMoreClick:function(){this.props.openHelpCenter(s.LEARN_MORE.SOSP_ATTACH_PANEL)},onDoNotShowAgainClick:function(){this.setState({doNotShowAgain:!this.state.doNotShowAgain})},render:l});return i.connectEditorAPI(o)(i.renderWhenMutated(r))}),define("panels/focusPanels/detachedFromSOSPPanelMapper",[],function(){"use strict";return function(e){return{closePanel:e.panelManager.closePanelByName,openHelpCenter:e.panelManager.openHelpCenter,userPreferences:e.userPreferences}}}),define("panels/focusPanels/detachedFromSOSPPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","symbols","util"],function(e,t,n,a,s,i){"use strict";return function(){return function(){var t=i.translate;return e.createElement(n,{ref:"panelFrame",className:"popup-medium detached-from-sosp-panel",shouldHideHeader:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement(a.Composites.BigPanelHeader,{},e.createElement(a.PanelHeaderCenteredText,{title:"Notification_Box_MemberSidebar_Move_Element_Title",subtitle:"Notification_Box_Membersidebar_Move_Element_Subtitle",titleType:"T16",onClose:this.onClose}),e.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},e.createElement("img",{className:"illustration",src:this.getIllustrationSrc()}))),e.createElement(a.Composites.PanelContent,{},e.createElement(a.Composites.RichText,{},e.createElement(a.RichText,{type:"T06"},e.createElement("p",{},t("Notification_Box_Membersidebar_Move_Body"),"\n                    ",e.createElement("a",{onClick:this.onLearnMoreClick},t("Notification_Box_Membersidebar_Move_Link")))))),e.createElement(a.Composites.ActionSetHorizontal,{},e.createElement(a.Checkbox,{value:this.state.doNotShowAgain,label:"Notification_Box_Dont_Show_Again",labelAfterSymbol:!0,onChange:this.onDoNotShowAgainClick}),e.createElement(a.Button,{className:"btn-md",onClick:this.onClose},e.createElement("span",{},t("Notification_Box_Membersidebar_Move_Close")))))}.apply(this,[])}}),define("panels/focusPanels/detachedFromSOSPPanel",["create-react-class","prop-types","core","util","helpIds","higherOrderComponents","panels/focusPanels/detachedFromSOSPPanelMapper","panels/focusPanels/detachedFromSOSPPanel.rt"],function(e,t,n,a,s,i,o,l){"use strict";var r=e({displayName:"DetachedFromSOSPPanel",propTypes:{panelName:t.string.isRequired,closePanel:t.func.isRequired,openHelpCenter:t.func.isRequired,userPreferences:t.object.isRequired},getInitialState:function(){return{doNotShowAgain:!!this.props.userPreferences.site.get(n.constants.USER_PREFS.SOSP.PANELS.DETACH_DO_NOT_SHOW_AGAIN)}},getKeyboardShortcuts:function(){return{esc:this.onClose}},getIllustrationSrc:function(){var e=2===a.browserUtil.getDevicePixelRatio()?"panels/focusPanels/addRemoveFromBarRetina.gif":"panels/focusPanels/addRemoveFromBar.gif";return a.media.getMediaUrl(e)},onClose:function(){this.state.doNotShowAgain&&this.props.userPreferences.site.set(n.constants.USER_PREFS.SOSP.PANELS.DETACH_DO_NOT_SHOW_AGAIN,!0),this.props.closePanel(this.props.panelName)},onLearnMoreClick:function(){this.props.openHelpCenter(s.LEARN_MORE.SOSP_DETACH_PANEL)},onDoNotShowAgainClick:function(){this.setState({doNotShowAgain:!this.state.doNotShowAgain})},render:l});return i.connectEditorAPI(o)(i.renderWhenMutated(r))}),define("panels/focusPanels/spotifySearchFocusPanel.rt",["react","lodash","panels/frames/focusPanelFrame","helpIds"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{ref:"focusPanelFrame",title:this.translateIfNeeded("Spotify_Player_Settings_Search"),panelName:this.props.panelName,selectedComponentType:this.props.selectedComponentType,className:"spotify-search-panel",helpId:a.EXTERNAL.SEARCH_SPOTIFY},e.createElement("iframe",{className:"content-iframe",src:this.props.iframeSrc}))}}),define("panels/focusPanels/spotifySearchFocusPanel",["create-react-class","lodash","core","util","panels/focusPanels/spotifySearchFocusPanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"spotifySearch",mixins:[n.mixins.editorAPIMixin,a.translationMixin,a.postMessageMixin],render:s,componentDidMount:function(){this.setPostMessageHandlerNamed("spotifySearch",this.props.id,this.onMessageFromDialog)},onMessageFromDialog:function(e){t.isFunction(this.props.callback)&&this.props.callback(e),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}})}),define("panels/focusPanels/iTunsLinkMaker.rt",["react","lodash","panels/frames/focusPanelFrame","helpIds"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{title:this.translateIfNeeded("iTunes_Link_Maker_Title"),panelName:this.props.panelName,helpId:a.EXTERNAL.SEARCH_ITUNES,className:"itunes-link-maker"},e.createElement("iframe",{className:"content-iframe",src:"https://linkmaker.itunes.apple.com"}))}}),define("panels/focusPanels/iTunsLinkMaker",["create-react-class","lodash","util","panels/focusPanels/iTunsLinkMaker.rt"],function(e,t,n,a){"use strict";return e({displayName:"iTunesLinkMaker",mixins:[n.translationMixin],render:a})}),define("panels/focusPanels/pageAppInstallingPanelMapper",[],function(){"use strict";return function(e){return{closePanel:e.panelManager.closePanelByName,openHelpCenter:e.panelManager.openHelpCenter}}}),define("panels/focusPanels/pageAppInstalling.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","symbols","util"],function(e,t,n,a,s,i){"use strict";return function(){return function(){var t=i.translate;return e.createElement(n,{ref:"panelFrame",shouldHideHeader:!0,className:"member-area-added-panel popup-medium",shouldNotCloseOnBlur:this.props.isInstalling,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement(a.Composites.BigPanelHeader,{},e.createElement(a.PanelHeaderCenteredText,{title:this.getTitleText(),shouldTranslate:!1,subtitle:this.getSubtitleText(),onClose:this.props.isInstalling?void 0:this.onClose}),e.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},e.createElement("img",{className:"illustration",src:this.getIllustrationSrc(),alt:"app installing illustration"}))),e.createElement(a.Composites.PanelContent,{},e.createElement(a.Composites.RichText,{},e.createElement(a.RichText,{type:"T06"},e.createElement("p",{},this.getBodyText())))),e.createElement(a.Composites.ActionSetHorizontal,{},e.createElement(a.Button,{onClick:this.onClose,disabled:this.props.isInstalling,className:"btn-md"},e.createElement("span",{},t(this.getButtonText())))))}.apply(this,[])}}),define("panels/focusPanels/pageAppInstalling",["create-react-class","prop-types","util","higherOrderComponents","panels/focusPanels/pageAppInstallingPanelMapper","panels/focusPanels/pageAppInstalling.rt"],function(e,t,n,a,s,i){"use strict";var o=e({displayName:"pageAppInstallingPanel",mixins:[n.translationMixin],propTypes:{closePanel:t.func.isRequired,isInstalling:t.bool.isRequired,appName:t.string.isRequired},getTitleText:function(){var e={appName:this.props.appName};return this.translateTemplate("tpa_messages_new_page_added_popup_title",e)},getSubtitleText:function(){return this.translateTemplate("tpa_messages_new_page_added_popup_subtitle",{})},getBodyText:function(){var e={appName:this.props.appName};return this.translateTemplate("tpa_messages_new_page_added_popup_body",e)},getButtonText:function(){return this.props.isInstalling?"tpa_messages_new_page_added_popup_button":"tpa_messages_new_page_added_popup_button_getstarted"},getKeyboardShortcuts:function(){return{esc:function(){this.props.isInstalling&&this.onClose()}}},onClose:function(){this.props.closePanel(this.props.panelName)},getIllustrationSrc:function(){var e=void 0;return e=this.props.isInstalling?2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/appLoaderRetina.gif":"panels/focusPanels/appLoader.gif":2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/appLoaderSuccessRetina.gif":"panels/focusPanels/appLoaderSuccess.gif",n.media.getMediaUrl(e)},render:i});return a.connectEditorAPI(s)(a.renderWhenMutated(o))}),define("panels/focusPanels/howToVideoGalleryPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{ref:"panelFrame",frameClassName:"how-to-video-gallery-frame",className:"how-to-video-gallery-panel",shouldHideHeader:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement("div",{className:"panel-content"},e.createElement(a.Composites.BigPanelHeader,{},e.createElement(a.PanelHeaderCenteredText,{title:"HowTo_Videos_Panel_Title",subtitle:"HowTo_Videos_Panel_Subtitle",onClose:this.onClose})),e.createElement("iframe",{className:"gallery-iframe",src:this.getIframeSrc()})))}}),define("panels/focusPanels/howToVideoGalleryPanel",["create-react-class","lodash","core","util","panels/focusPanels/howToVideoGalleryPanel.rt"],function(e,t,n,a,s){"use strict";function i(){return"https://apps."+a.serviceTopology.baseDomain}var o=1290;return e({displayName:"howToVideoGalleryPanel",mixins:[a.translationMixin,n.mixins.editorAPIMixin],componentDidMount:function(){window.addEventListener("message",this.iframeMessageHandler)},componentWillUnmount:function(){window.removeEventListener("message",this.iframeMessageHandler)},getStageWidth:function(){return n.utils.stageUtils.getStageLayout().width+this.getEditorAPI().getPreviewPosition().left},iframeMessageHandler:function(e){(e.origin||e.originalEvent.origin)===i()&&"dealerButtonClick"===t.get(e,"data.event")&&this.getEditorAPI().panelManager.openPanel("panels.focusPanels.howToVideoPlayer",{videoId:e.data.details.clickType,origin:"TOP_BAR_HELP",withOverlay:!1,withShadow:!1},!0)},getIframeSrc:function(){var e=this.getEditorAPI().documentServices.generalInfo.getMetaSiteId(),t=this.getStageWidth();return i()+function(e){var t="/wix-dealer-webapp/api/lightboxViewer/EDITOR_VIDEO_GALLERY";return t+=e<o?"_SMALL/":"/"}(t)+e},getKeyboardShortcuts:function(){return{esc:this.onClose}},onClose:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:s})}),define("panels/focusPanels/feedbackPanel.rt",["react","lodash","panels/frames/focusPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{ref:"panelFrame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,onClose:this.panelWillClose,isBareMode:!0},e.createElement("iframe",{className:"feedback-iframe",src:this.getIframeSrc(),width:"500",height:"743",ref:"iframe"}))}}),define("panels/focusPanels/feedbackPanel",["create-react-class","prop-types","lodash","core","util","constants","panels/focusPanels/feedbackPanel.rt"],function(e,t,n,a,s,i,o){"use strict";function l(){return"//feedback."+s.serviceTopology.baseDomain}function r(){return window.location.protocol+l()}var c=["ReactSource","experiments","experimentsoff","editorexp","viewerexp"];return e({propTypes:{panelName:t.string.isRequired},displayName:"feedbackPanel",mixins:[a.mixins.editorAPIMixin],getIframeSrc:function(){var e=this.getEditorAPI(),t=e.documentServices.generalInfo.getSiteId(),a=e.documentServices.generalInfo.getMetaSiteId();return r()+"/shareSite/"+t+"?metaSiteId="+a+function(){var e=s.url.getParameterByName("feedbackVersion"),t=n(c).map(function(e){var t=s.url.getParameterByName(e);return t?"&"+e+"="+t:null}).compact().join("");return e&&(t+="&rc="+e),t}()},componentDidMount:function(){window.addEventListener("message",this.iframeMessageHandler)},componentWillUnmount:function(){this.closeTimeout&&window.clearTimeout(this.closeTimeout),window.removeEventListener("message",this.iframeMessageHandler)},iframeMessageHandler:function(e){var t=this.getEditorAPI();if(e.origin.substring(e.origin.indexOf("//"))===l()){var s=e.data&&JSON.parse(e.data);switch(s.action){case"feedbackhelp":var i=function(e){switch(e){case"ShareHelpPro":return"4ca0f60b-3c8e-48c2-9259-8d70c8564101";case"ReadHelp":return"38fac604-38ba-4d83-97eb-3fbc8f702762";case"ReadHelpPro":return"4e1993e1-ece8-4478-b553-139926f66bfc";default:return"cb9a32fa-b217-4e31-b2e6-905dd8e2116c"}}(n.get(s,"helpType"));t.panelManager.openHelpCenter(i,null,{component:this.props.id,origin:a.constants.BI.HELP.ORIGIN.PANEL,panel_name:"panels.focusPanels.feedbackPanel"});break;case"feedbackclose":this.getEditorAPI().panelManager.closePanelByName(this.props.panelName);break;case"opensitesettings":t.account.openSettings("authorization","feedback")}}},panelWillClose:function(){if(!this.closeTimeout)return this.closeTimeout=window.setTimeout(function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}.bind(this),i.FEEDBACK.CLOSE_PANEL_TIMEOUT),n.get(this.refs,"iframe.contentWindow")&&this.refs.iframe.contentWindow.postMessage("panelClosed",r()),!1},render:o})}),define("panels/focusPanels/getTrafficPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:a.translate("Notification_Box_Get_Traffic_Title"),subtitle:a.translate("Notification_Box_Get_Traffic_Description"),linkedVideoData:this.linkedVideoData(),panelName:this.props.panelName,className:"getTrafficPanel",shouldNotCloseOnBlur:!0},e.createElement("div",{className:"get-traffic-description content"},e.createElement("span",{className:"text-before-link"},this.getDescription(0)),e.createElement("a",{className:"get-found-link",href:"#",onClick:function(){this.searchOnGoogle()}.bind(this)},this.getDescription(2)),e.createElement("span",{className:"text-after-link"},this.getDescription(1))),e.createElement("div",{className:"buttons"},e.createElement(s.button,{label:"Notification_Box_Get_Traffic_Submit_Website_Button_Label",onClick:function(){this.getFoundOnGoogle()}.bind(this)})))}}),define("panels/focusPanels/getTrafficPanel",["create-react-class","lodash","core","util","panels/focusPanels/getTrafficPanel.rt"],function(e,t,n,a,s){"use strict";var i=n.bi,o=a.translate("Notification_Box_Get_Traffic_Video_URL"),l=[];return e({propTypes:{},displayName:"getTrafficPanel",mixins:[n.mixins.editorAPIMixin,a.translationMixin],getFoundOnGoogle:function(){this.sendPanelGetFoundEvent("getFoundOnGoogle");var e=this.translateIfNeeded("Notification_Box_Get_Traffic_Submit_Website_Button_Link");window.open(e,"_blank")},getPublicUrl:function(){var e=this.getEditorAPI().documentServices.generalInfo.getPublicUrl();return e&&(e=e.replace(/.*?:\/\//g,"")),e},searchOnGoogle:function(){var e=this.getPublicUrl("https://www.google.co.il/?#q=site:"),t="https://www.google.co.il/?#q=site:"+e;e&&window.open(t,"_blank"),this.sendSearchOnGoogleEvent(t)},getContentClass:function(){return"only-new"},linkedVideoData:function(){return o},getDescription:function(e){if(t.isEmpty(l)){var n="site:"+this.getPublicUrl(),a={domain_address:n},s=this.translateTemplate("Notification_Box_Get_Traffic_Bottom_Text",a,this.getEditorAPI());(l=s.split(n)).push(n)}return l.length>=e?l[e]:""},sendSearchOnGoogleEvent:function(e){var t=this.getEditorAPI(),n=i.events.getTrafficPanel.GET_TRAFFIC_SEARCH_GOOGLE_CLICK,a={site_id:t.documentServices.generalInfo.getSiteId(),url:e};t.bi.event(n,a)},sendPanelGetFoundEvent:function(e){var t=this.getEditorAPI(),n=i.events.getTrafficPanel.GET_TRAFFIC_GET_FOUND_ON_GOOGLE_CLICK,a={site_id:t.documentServices.generalInfo.getSiteId(),origin:e,video_url:o};t.bi.event(n,a)},render:s})}),define("panels/focusPanels/promotionModalPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","baseUI","symbols"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,className:"promo-popup-panel "+this.props.className},function(){var n=this.getImageContainerClass();return e.createElement("header",{className:"panel-header dark"},e.createElement("button",{className:"close",onClick:function(e){this.close()}.bind(this,n)},e.createElement(i.symbol,{name:"headerCloseButton"})),e.createElement("div",{className:"title-line-1"},a.translate(this.props.headerFirstLineText)),this.props.headerSecondLineText?e.createElement("div",{className:"title-line-2",key:"headerSecondLine"},"\n            ",a.translate(this.props.headerSecondLineText),"\n        "):null,e.createElement(n,{className:"image-wrapper",onClick:this.props.isImageLinkActive?this.handleAction.bind(this,"image"):t.noop},e.createElement("img",{ref:"image",src:this.props.imageSrc}),e.createElement("div",{className:"overlay-box-1"}),e.createElement("div",{className:"overlay-box-2"}),e.createElement("div",{className:"overlay-box-3"}),e.createElement(n,{})))}.apply(this,[]),e.createElement("div",{className:"content"},e.createElement("p",{},a.translate(this.props.bodyText),this.props.bodyLinkText?e.createElement("a",{key:"link",onClick:function(){this.handleAction("date kink")}.bind(this)},a.translate(this.props.bodyLinkText)):null),this.props.bodyBottomText?e.createElement("p",{key:"bodyBottomText"},a.translate(this.props.bodyBottomText)):null,e.createElement(s.button,{label:this.props.actionText,onClick:function(){this.handleAction("submission button")}.bind(this)})))}}),define("panels/focusPanels/promotionModalPanel",["create-react-class","prop-types","lodash","core","util","panels/focusPanels/promotionModalPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"promotionModalPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{headerFirstLineText:t.string,headerSecondLineText:t.string,imageSrc:t.string,bodyText:t.string,bodyLinkText:t.string,isImageLinkActive:t.bool,actionText:t.string,actionUrl:t.string,biEvent:t.object},getDefaultProps:function(){return{isImageLinkActive:!0}},getImageContainerClass:function(){return this.props.isImageLinkActive?"a":"div"},handleAction:function(e){this.sendSubmitVideoClickedBI(e),window&&window.open(s.translate(this.props.actionUrl))},sendSubmitVideoClickedBI:function(e){var t={origin:e};this.getEditorAPI().bi.event(this.props.biEvent,t)},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:i})}),define("panels/focusPanels/sizeRestrictionPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:this.props.title,symbolName:"bigtopin",bodyText:this.props.content,dontShowAgainKey:n.constants.PANELS.PIN_TOO_BIG.PIN_TOO_BIG_DONT_SHOW_AGAIN,helpId:"7827a21e-04e0-4bdd-9ee0-b68677fa7a5a",userPrefType:"site"})}}),define("panels/focusPanels/sizeRestrictionPanel",["create-react-class","core","lodash","stateManagement","panels/focusPanels/sizeRestrictionPanel.rt"],function(e,t,n,a,s){"use strict";return e({mixins:[t.mixins.editorAPIMixin],displayName:"sizeRestrictionPanel",componentDidMount:function(){var e=this.getEditorAPI(),n=e.store;n.dispatch(a.bi.event(t.bi.events.pinToScreen.NOTIFICATION_TOO_BIG,{state:this.props.state,component_type:a.selection.selectors.getSelectedComponentType(n.getState(),e.documentServices)}))},render:s})}),define("panels/focusPanels/newEditorWelcomeScreenPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:a.translate("Notification_Box_New_Template_Title"),subtitle:a.translate("Notification_Box_New_Template_Subtitle"),linkedVideoData:this.linkedVideoData(),contentClass:this.getContentClass(),content:this.getContent(),panelName:this.props.panelName,shouldNotCloseOnBlur:!0},e.createElement("div",{className:"buttons"},this.props.isEligibleForSwitch?e.createElement(s.button,{label:"Notification_Box_Back_To_Old_Editor",onClick:function(){this.back()}.bind(this),key:"Notification_Box_Back_To_Old_Editor",className:"btn-confirm-secondary"}):null,e.createElement(s.button,{label:this.props.nextBtnLabel,onClick:function(){this.next()}.bind(this)})))}}),define("panels/focusPanels/newEditorWelcomeScreenPanel",["create-react-class","prop-types","lodash","core","util","panels/focusPanels/newEditorWelcomeScreenPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=a.bi,l=void 0;return e({displayName:"newEditorWelcomeScreenPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{isEligibleForSwitch:t.bool,onNextClick:t.func.isRequired,nextBtnLabel:t.string.isRequired,onBackClick:t.func.isRequired},next:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onNextClick()},back:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onBackClick()},linkClick:function(){var e=this.props.isEligibleForSwitch?"LEARN_MORE_CLICK_WITH_BACK_OPTION":"LEARN_MORE_CLICK_WITHOUT_BACK_OPTION";this.sendBIEvent(e);var t=s.translate("SWITCH_EDITORS_LP_LINK");window&&window.open(t)},getContentClass:function(){return this.props.isEligibleForSwitch?"switch-to-old":"only-new"},getContent:function(){var e={};return this.props.isEligibleForSwitch?(e.line1="Notification_Box_Switch_Editor_Description",e.link="Notification_Box_Switch_Editor_Link",e.line2=""):(e.line1="Notification_Box_New_Template_Line1",e.link="Notification_Box_New_Template_Link",e.line2="Notification_Box_New_Template_Line2"),e},linkedVideoData:function(){return"//www.youtube.com/embed/"+s.translate("SWITCH_EDITORS_PR_VIDEO")},sendBIEvent:function(e){var t=this.getEditorAPI(),n=o.events.newEditorWelcomeScreens[e],a={site_id:t.documentServices.generalInfo.getSiteId()};n.fields.duration&&(a.duration=Date.now()-l),t.bi.event(n,a)},componentDidMount:function(){l=Date.now();var e=this.props.isEligibleForSwitch?"POP_UP_OPEN_WITH_BACK_OPTION":"POP_UP_OPEN_WITHOUT_BACK_OPTION";this.sendBIEvent(e)},render:i})}),define("panels/focusPanels/editorMigrationFailedPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,shouldHideHelp:!0,shouldHideHeader:!0,shouldNotCloseOnBlur:!0,isBareMode:!0,className:"editor-compatibility-panel"},e.createElement("header",{className:"save-publish-panel-header header"},e.createElement("div",{className:"header-content"},e.createElement("span",{className:"title"},s.translate("Notification_Box_Wrong_Editor_Title")),e.createElement("div",{className:"subtitle"},s.translate("Notification_Box_Wrong_Editor_Subtitle")))),e.createElement(n.symbol,{name:"coffee",className:"coffee-img"}),e.createElement("div",{className:"content"},e.createElement("div",{},e.createElement("span",{},s.translate("Notification_Box_Wrong_Editor_Line1")),e.createElement("span",{},e.createElement("a",{target:"_blank",href:this.getHref()},s.translate("Notification_Box_Wrong_Editor_Link"))),e.createElement("span",{}," ",s.translate("Notification_Box_Wrong_Editor_Line2"))),e.createElement(n.button,{label:"Notification_Box_Wrong_Editor_Continue",onClick:this.onClick,className:"button"})))}}),define("panels/focusPanels/editorMigrationFailedPanel",["create-react-class","lodash","panels/focusPanels/editorMigrationFailedPanel.rt"],function(e,t,n){"use strict";return e({displayName:"editorMigrationFailedPanel",render:n,onClick:function(){var e=function(e,n,a){var s=new RegExp("([?&])"+n+"=.*?(&|$)","i"),i=t.includes(e,"?")?"&":"?";return e.match(s)?e.replace(s,"$1"+n+"="+a+"$2"):e+i+n+"="+a}(window.document.location.href,"forceEditorVersion","old");window.location=e},getHref:function(){return"http://www.wix.com/website/templates/html/new/1"}})}),define("panels/focusPanels/focusPanelMixin",[],function(){"use strict";var e=void 0;return{componentDidMount:function(){e=Date.now()},startNow:function(){this.sendPanelClosedBIEvent("startNow"),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},getContentClass:function(){return"only-new"},sendBIEventWhenClosedByX:function(){this.sendPanelClosedBIEvent("xButton")},sendBIEventWhenClosedByESC:function(){this.sendPanelClosedBIEvent("ESC")},sendPanelClosedBIEvent:function(t){var n=this.getEditorAPI(),a={site_id:n.documentServices.generalInfo.getSiteId(),duration:Date.now()-e,origin:t,video_url:this.props.linkedVideoData,panel_name:this.constructor.displayName};n.bi.event(this.getBIEvent(),a)}}}),define("panels/focusPanels/welcomeScreenVideoPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:this.props.title,subtitle:this.props.subtitle,linkedVideoData:this.props.linkedVideoData,panelName:this.props.panelName,onCloseByX:this.sendBIEventWhenClosedByX,onCloseByESC:this.sendBIEventWhenClosedByESC,shouldNotCloseOnBlur:!0},e.createElement("div",{className:"buttons"},e.createElement(s.button,{label:this.props.buttonLabel,onClick:function(){this.startNow()}.bind(this)})))}}),define("panels/focusPanels/newUserIntroVideoPanel",["create-react-class","lodash","core","panels/focusPanels/focusPanelMixin","panels/focusPanels/welcomeScreenVideoPanel.rt"],function(e,t,n,a,s){"use strict";var i=n.bi;return e({displayName:"newUserIntroVideoPanel",mixins:[n.mixins.editorAPIMixin,a],getBIEvent:function(){return i.events.newUserIntroVideoPanel.INTRO_VIDEO_CLOSE},render:s})}),define("panels/focusPanels/cameFromADIVideoPanel",["create-react-class","lodash","core","panels/focusPanels/focusPanelMixin","panels/focusPanels/welcomeScreenVideoPanel.rt"],function(e,t,n,a,s){"use strict";var i=n.bi;return e({displayName:"ADIVideoPanel",mixins:[n.mixins.editorAPIMixin,a],getBIEvent:function(){return i.events.cameFromADIVideoPanel.CAME_FROM_ADI_INTRO_VIDEO_CLOSE},render:s})}),define("panels/focusPanels/howToVideoPlayer.rt",["react","lodash","baseUI","panels/frames/emptyPanelFrame"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:"howToVideoPlayer",className:"how-to-video-player panel-frame-container"},e.createElement("div",{key:"darkOverlay",className:t({"dark-overlay":this.props.withOverlay,"close-overlay":!this.props.withOverlay}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.handleClickClose}),e.createElement("div",{className:t({"container-iframe":!0,"with-shadow":this.props.withShadow}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement("div",{className:"close",onClick:this.handleClickClose},e.createElement(n.symbol,{name:"close_video_icon_reg"})),e.createElement("iframe",{id:"how-to-video-player-iframe",src:this.getIframeSrcUrl()})))}}),define("panels/focusPanels/howToVideoPlayer",["jquery","create-react-class","prop-types","core","lodash","panels/focusPanels/howToVideoPlayer.rt","panels/mixins/disableKeyboardShortcutsMixin"],function(e,t,n,a,s,i,o){"use strict";return t({displayName:"howToVideoPlayer",mixins:[o,a.mixins.editorAPIMixin],propTypes:{videoId:n.string.isRequired,origin:n.string.isRequired,withShadow:n.bool,withOverlay:n.bool},getDefaultProps:function(){return{withShadow:!0,withOverlay:!0}},componentDidMount:function(){var t={videoID:this.props.videoId,origin:this.props.origin};this.getEditorAPI().bi.event(a.bi.events.videoPlayer.OPEN,t),this.startTime=Date.now(),window.focus();var n=function(){new window.YT.Player("how-to-video-player-iframe",{events:{onStateChange:function(e){e.data===window.YT.PlayerState.ENDED&&this.close({code:"VIDEO_ENDED"})}.bind(this)}})};window.YT?window.YT.Player&&window.YT.PlayerState&&n.call(this):(window.onYouTubeIframeAPIReady=function(){n.call(this),delete window.onYouTubeIframeAPIReady}.bind(this),e.getScript("//www.youtube.com/iframe_api"))},getIframeSrcUrl:function(){return"https://www.youtube.com/embed/"+this.props.videoId+"?rel=0&autoplay=1&color=red&controls=1&showinfo=0&fs=0&enablejsapi=1&origin=http://editor.wix.com&modestbranding=1"},close:function(e){var t=this.getEditorAPI(),n={videoID:this.props.videoId,duration:Date.now()-this.startTime,origin:e.code};t.bi.event(a.bi.events.videoPlayer.CLOSE,n),t.panelManager.closePanelByName(this.props.panelName)},handleClickClose:function(){this.close({code:"X_BUTTON"})},handleClickOverlay:function(){this.close({code:"CLOSE_OVERLAY"})},getKeyboardShortcuts:function(){return{esc:this.close}},render:i})}),define("panels/focusPanels/newEditorListWelcomeScreenPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","util","symbols"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,isBareMode:!0,className:"new-editor-list-welcome-screen-panel"},e.createElement("header",{className:"panel-header dark",key:"header"},e.createElement("div",{className:"welcome-panel-header-title"},s.translate("list_migration_welcome_screen_title")),e.createElement(i.symbol,{name:"listWelcomeScreenAsset"})),e.createElement("div",{className:t({content:!0,"only-new":!this.props.isEligibleForSwitch,"switch-to-old":this.props.isEligibleForSwitch}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement("p",{},"\n            ",s.translate("list_migration_welcome_screen_text_paragraph_1_before_changes_link"),"\n            ",e.createElement("a",{href:this.getChangesPageUrl(),target:"_blank"},s.translate("list_migration_welcome_screen_text_paragraph_1_changes_link")),s.translate("list_migration_welcome_screen_text_paragraph_1_after_changes_link"),"\n        "),e.createElement("p",{},s.translate("list_migration_welcome_screen_text_paragraph_2"))),e.createElement("div",{className:"buttons"},this.props.isEligibleForSwitch?e.createElement(a.button,{label:"Notification_Box_Back_To_Old_Editor",onClick:function(){this.back()}.bind(this),key:"Notification_Box_Back_To_Old_Editor",className:"btn-confirm-secondary"}):null,e.createElement(a.button,{label:"Notification_Box_Start_Now",onClick:function(){this.next()}.bind(this)})))}}),define("panels/focusPanels/newEditorListWelcomeScreenPanel",["create-react-class","prop-types","lodash","util","panels/focusPanels/newEditorListWelcomeScreenPanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"newEditorListWelcomeScreen",propTypes:{isEligibleForSwitch:t.bool,onNextClick:t.func.isRequired,onBackClick:t.func.isRequired},next:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onNextClick()},back:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onBackClick()},getChangesPageUrl:function(){var e=a.languages.getLanguageCode();return"https://www.wix.com/support/html5/new-wix-editor-june-2015/list/kb/information-about-moving-to-the-new-editor-with-the-list-builder".replace("www.wix.com",("en"===e?"www":e)+".wix.com")},render:s})}),define("panels/focusPanels/createNewTextBoxPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"text_box_too_much_text_error_message_title",symbolName:"createNewTextBox",bodyText:"text_box_too_much_text_error_message_text",hideDontShowCheckbox:!0,isSingleInstance:this.props.isSingleInstance})}}),define("panels/focusPanels/createNewTextBoxPanel",["create-react-class","core","panels/focusPanels/createNewTextBoxPanel.rt"],function(e,t,n){"use strict";return e({displayName:"createNewTextBoxPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/siteImageOptimizationPanel.rt",["react","lodash","baseUILib","core","baseUI","panels/frames/focusPanelFrame","util","helpIds"],function(e,t,n,a,s,i,o,l){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,title:o.translate("SITE_IMAGE_QUALITY_SETTINGS_PANEL_HEADER_TITLE"),ref:"frame",helpId:l.SETTINGS.IMAGE_OPTIMIZATION,className:"site-image-optimisation-panel"},e.createElement("div",{className:"image-optimisation-thumbnailsWithIcons"},e.createElement("div",{className:"rich-text-paragraph"},e.createElement("p",{className:"rich-text-paragraph-content"},o.translate("SITE_IMAGE_QUALITY_SETTINGS_PANEL_DESCRIPTION"))),e.createElement(s.thumbnailsWithIcons,{valueLink:this.linkedQualityPresets(),options:this.getImageQualityPresetsOptions()})),e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"action-buttons"},e.createElement(s.button2,{label:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_CANCEL_BUTTON",onClick:this.closeImageQualityPanel,className:"default image-optimisation-cancel"}),e.createElement(s.button2,{label:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_APPLY_BUTTON",disabled:this.isApplyDisabled(),onClick:this.handleApplyQuality,className:"default image-optimisation-done"})))}}),define("panels/focusPanels/siteImageOptimizationPanel",["core","create-react-class","prop-types","lodash","panels/focusPanels/siteImageOptimizationPanel.rt"],function(e,t,n,a,s){"use strict";var i=["none","mild","regular","moderate","strong","maximum"],o=[{unsharpMask:{radius:0,amount:0,threshold:0},quality:90},{unsharpMask:{radius:.33,amount:1,threshold:0}},{unsharpMask:{radius:.66,amount:1,threshold:.01}},{unsharpMask:{radius:1.2,amount:1,threshold:.01}},{unsharpMask:{radius:2,amount:1,threshold:0}},{unsharpMask:{radius:4,amount:1,threshold:0}}],l=[{title:"IMAGE_QUALITY_NAME_NONE",tooltip:"IMAGE_QUALITY_NAME_NONE_TOOLTIP",value:0,symbolName:"image-quality-none"},{title:"IMAGE_QUALITY_NAME_GLOBAL_MILD",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_MILD_TOOLTIP",value:1,symbolName:"image-quality-mild"},{title:"IMAGE_QUALITY_NAME_GLOBAL_REGULAR",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_REGULAR_TOOLTIP",value:2,symbolName:"image-quality-regular"},{title:"IMAGE_QUALITY_NAME_GLOBAL_MODERATE",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_MODERATE_TOOLTIP",value:3,symbolName:"image-quality-moderate"},{title:"IMAGE_QUALITY_NAME_GLOBAL_STRONG",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_STRONG_TOOLTIP",value:4,symbolName:"image-quality-strong"},{title:"IMAGE_QUALITY_NAME_GLOBAL_MAXIMUM",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_MAXIMUM_TOOLTIP",value:5,symbolName:"image-quality-maximum"}];return t({mixins:[e.mixins.editorAPIMixin],displayName:"siteImageOptimization",propTypes:{unsharpMask:n.shape({radius:n.number,amount:n.number,threshold:n.number})},getInitialState:function(){var e=this.getGlobalImageQualityData()||o[2];return{selectedIndex:function(e,t){return a.findIndex(t,function(t){return a.isEqual(t,e)})}(e,o),selectedValue:e}},getImageQualityPresetsOptions:function(){return l},linkedQualityPresets:function(){return{value:this.state.selectedIndex,requestChange:function(e){this.setState({selectedValue:o[e],selectedIndex:e})}.bind(this)}},handleApplyQuality:function(){this.isApplyDisabled()||(this.updateGlobalImageQualityData(this.state.selectedValue),this.sendQualityApplyBI(this.state.selectedIndex),this.closeImageQualityPanel())},sendQualityApplyBI:function(t){var n=this.state.selectedValue;this.getEditorAPI().bi.event(e.bi.events.siteImageQualitySettingsPanel.site_image_quality_settings_panel_apply,{origin:"global",preset:i[t]||"custom",unsharp_amount:100*n.unsharpMask.amount,unsharp_radius:100*n.unsharpMask.radius,unsharp_threshold:100*n.unsharpMask.threshold})},closeImageQualityPanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},isApplyDisabled:function(){var e=this.getGlobalImageQualityData();return-1===this.state.selectedIndex||!this.getGlobalImageQualityData()&&2===this.state.selectedIndex||a.isEqual(e,this.state.selectedValue)},getGlobalImageQualityData:function(){var e=this.getEditorAPI().documentServices.media.imageQuality.get();return a.isEmpty(e)?null:a.pick(e,["unsharpMask","quality"])},updateGlobalImageQualityData:function(e){var t=this.getEditorAPI();t.documentServices.media.imageQuality.reset(),t.documentServices.media.imageQuality.update(e),t.documentServices.wixapps.classics.reloadApp("blog"),this.getEditorAPI().history.add("site image quality panel - update quality")},render:s})}),define("panels/focusPanels/siteMembersSettingsPanel.rt",["react","lodash","baseUILib","baseUI","panels/frames/focusPanelFrame","util","helpIds","experiment"],function(e,t,n,a,s,i,o,l){"use strict";return function(){return e.createElement(s,{panelName:this.props.panelName,title:i.translate("Pages_Member_Signup_Settings_Title"),ref:"frame",helpId:o.SITE_MEMBERS.SETTINGS,className:"site-members-settings-panel"},e.createElement("div",{className:"content"},e.createElement(n.Composites.RichText,{},e.createElement(n.RichText,{className:"light"},i.translate("Pages_Member_Signup_Settings_Description"),"\n            ")),e.createElement(n.Divider,{}),e.createElement("div",{className:"settings"},e.createElement(n.Composites.RadioButtonsLabeled,{},e.createElement(n.InfoIcon,{text:"Pages_Member_Signup_Permission_Settings_Dropdown_Tooltip"}),e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Permission_Settings_Dropdown_Label"}),e.createElement(n.RadioButtons,{value:this.state.autoApproval,options:this.getAutoApprovalOptions(),onChange:t.partial(this.onRadioButtonsClick,"autoApproval")})),e.createElement(n.Divider,{}),e.createElement(n.Composites.RadioButtonsLabeled,{},e.createElement(n.InfoIcon,{text:"Pages_Member_Signup_Display_Settings_Dropdown_Tooltip"}),e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Display_Settings_Dropdown_Label"}),e.createElement(n.RadioButtons,{value:this.state.loginDialogFirst,options:this.getLoginFirstOptions(),onChange:t.partial(this.onRadioButtonsClick,"loginDialogFirst")})))),e.createElement("div",{className:"social-login-settings",key:"smSocialLoginSettingsSection"},e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"header"},"\n            ",i.translate("Pages_Member_Signup_Settings_Social_Label"),"\n        "),e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"options"},e.createElement("section",{className:"social-option"},e.createElement(a.symbol,{name:"mba_social_panel_google_plus_new",className:"icon google"}),e.createElement(a.toggle,{name:"switch",valueLink:this.linkState("socialLoginGoogleEnabled"),label:"Member_Login_Settings_Social_Google"})),e.createElement(n.Divider,{long:!0}),e.createElement("section",{className:"social-option"},e.createElement(a.symbol,{name:"mba_social_panel_facebook",className:"icon facebook"}),e.createElement(a.toggle,{name:"switch",valueLink:this.linkState("socialLoginFacebookEnabled"),label:"Member_Login_Settings_Social_Facebook"})))),e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"actions"},e.createElement("div",{className:"link-container"},e.createElement(a.symbol,{name:"sparkling-bulb-reg"}),e.createElement("a",{className:"link",onClick:this.openHowToHelpCenter},i.translate("Member_Login_Settings_Learn_How"))),e.createElement(a.button,{label:"Pages_Member_Signup_Settings_Done",onClick:this.applySettings,className:"btn-confirm-primary btn-md"})))}}),define("panels/focusPanels/siteMembersSettingsNewPanel.rt",["react","lodash","baseUILib","baseUI","panels/frames/focusPanelFrame","util","helpIds","experiment"],function(e,t,n,a,s,i,o,l){"use strict";return function(){function l(s){var i=this.getTabValues();return e.createElement("div",{className:"member-settings-panel-content"},e.createElement(a.horizontalTabs,{shouldTranslate:!0,options:this.getTabs(),value:this.state.selectedTab,onChange:this.selectTab,className:"tabbed"}),e.createElement("div",{className:"tab-content"},e.createElement(n.Composites.RichText,{},e.createElement(n.RichText,{className:"light"},s("Pages_Member_Signup_Settings_Description"))),this.state.selectedTab===i.GENERAL?e.createElement("div",{className:"general-settings",key:"smSettingsTab"},e.createElement(n.Divider,{}),e.createElement(n.Composites.RadioButtonsLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Permission_Settings_Dropdown_Label"}),e.createElement(n.RadioButtons,{value:this.state.autoApproval,options:this.getAutoApprovalOptions(),onChange:t.partial(this.onRadioButtonsClick,"autoApproval")})),e.createElement(n.Divider,{}),e.createElement(n.Composites.RadioButtonsLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Display_Settings_Dropdown_Label"}),e.createElement(n.RadioButtons,{value:this.state.loginDialogFirst,options:this.getLoginFirstOptions(),onChange:t.partial(this.onRadioButtonsClick,"loginDialogFirst")}))):null,this.state.selectedTab===i.SOCIAL?e.createElement("div",{className:"social-login-settings settings",key:"smSocialLoginSettingsSection"},e.createElement(n.Divider,{long:!0}),e.createElement(n.SectionDivider,{},s("Pages_Member_Signup_Settings_Social_Label")),e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"options"},e.createElement("section",{className:"social-option"},e.createElement(a.symbol,{name:"mba_social_panel_google_plus_new",className:"icon google"}),e.createElement(a.toggle,{name:"switch",valueLink:this.linkState("socialLoginGoogleEnabled"),label:"Member_Login_Settings_Social_Google"})),e.createElement(n.Divider,{long:!0}),e.createElement("section",{className:"social-option"},e.createElement(a.symbol,{name:"mba_social_panel_facebook",className:"icon facebook"}),e.createElement(a.toggle,{name:"switch",valueLink:this.linkState("socialLoginFacebookEnabled"),label:"Member_Login_Settings_Social_Facebook"}))),this.isSocialAppInstalled()?e.createElement("div",{key:"shouldDisplayCommunityToggle"},e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.SectionDividerWithInfoIcon,{},e.createElement(n.InfoIcon,{shouldTranslate:!0,text:"Member_Login_Settings_Community_Settings_Info_Tooltip"}),e.createElement(n.SectionDivider,{},s("Member_Login_Settings_Settings_Community_Label"),"\n                        ")),e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"options"},e.createElement("section",{className:"social-option"},e.createElement(a.symbol,{name:"communityIcon",className:"icon community"}),e.createElement(a.toggle,{name:"switch",valueLink:this.linkState("joinCommunityEnabled"),label:"Member_Login_Settings_Community_Join"})))):null):null,this.state.selectedTab===i.TERMS_AND_CONDITIONS?function(s,i){var o=this,l=this.getArticles();return e.createElement("div",{className:"signup-policies-settings settings",key:"smSignupPoliciesSection"},e.createElement(n.CustomScroll,{},e.createElement("div",{className:"policies-segment-header"},e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.SectionDividerWithInfoIcon,{},e.createElement(n.InfoIcon,{shouldTranslate:!0,linkText:"Pages_Member_Signup_Settings_Terms_Of_Use_Link_Label_",onLinkClick:function(){return o.openExamplePolicy(l.TERMS_OF_USE)},text:"Pages_Member_Signup_Settings_Terms_Of_Use_Info_Tooltip"}),e.createElement(n.SectionDivider,{},s("Pages_Member_Signup_Settings_Terms_Of_Use_Divider_Label"),"\n                            ")),e.createElement(n.Divider,{long:!0})),e.createElement("div",{className:"options"},e.createElement("section",{className:"option"},e.createElement(a.toggle,{name:"switch",value:this.state.termsOfUseLinkVisible,onChange:t.partial(this.toggleEditPoliciesVisibility,"termsOfUseLinkVisible"),label:"Pages_Member_Signup_Settings_Terms_Of_Use_Toggle_Label"}))),this.state.termsOfUseLinkVisible?e.createElement("div",{key:"ifTermsOfUseVisible",className:"policy-link-area"},e.createElement(n.Composites.ActionWithSymbolLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Settings_Policies_Link_Header",shouldTranslate:!0}),e.createElement(n.ActionWithSymbol,{action:t.partial(this.openLinkPanelFor,"termsOfUseLink")},"\n                                ",this.getLabelForPolicyPage("termsOfUseLink"),"\n                            "))):null,e.createElement("div",{className:"policies-segment-header"},e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.SectionDividerWithInfoIcon,{},e.createElement(n.InfoIcon,{shouldTranslate:!0,linkText:"Pages_Member_Signup_Settings_Terms_Of_Use_Link_Label_",onLinkClick:function(){return o.openExamplePolicy(l.PRIVACY_POLICY)},text:"Pages_Member_Signup_Settings_Privacy_Policy_Tooltip"}),e.createElement(n.SectionDivider,{},s("Pages_Member_Signup_Settings_Privacy_Policy_Divider_Label"),"\n                            ")),e.createElement(n.Divider,{long:!0})),e.createElement("div",{className:"options"},e.createElement("section",{className:"option"},e.createElement(a.toggle,{name:"switch",value:this.state.privacyPolicyLinkVisible,onChange:t.partial(this.toggleEditPoliciesVisibility,"privacyPolicyLinkVisible"),label:"Pages_Member_Signup_Settings_Privacy_Policy_Toggle_Label"}))),this.state.privacyPolicyLinkVisible?e.createElement("div",{key:"ifPrivacyPolicyVisible",className:"policy-link-area"},e.createElement(n.Composites.ActionWithSymbolLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Settings_Policies_Link_Header",shouldTranslate:!0}),e.createElement(n.ActionWithSymbol,{action:t.partial(this.openLinkPanelFor,"privacyPolicyLink")},"\n                                ",this.getLabelForPolicyPage("privacyPolicyLink"),"\n                            "))):null,this.isSocialAppInstalled()?e.createElement("div",{key:"shouldShowCodeOfConductSection"},e.createElement("div",{className:"policies-segment-header"},e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.SectionDividerWithInfoIcon,{},e.createElement(n.SectionDivider,{},s("Pages_Member_Signup_Settings_Code_Of_Conduct_Divider_Label"),"\n                                ")),e.createElement(n.Divider,{long:!0})),e.createElement("div",{className:"options"},e.createElement("section",{className:"option"},e.createElement(a.toggle,{name:"switch",value:this.state.codeOfConductLinkVisible,onChange:t.partial(this.toggleEditPoliciesVisibility,"codeOfConductLinkVisible"),label:"Pages_Member_Signup_Settings_Code_Of_Conduct_Toggle_Label"}))),this.state.codeOfConductLinkVisible?e.createElement("div",{key:"ifCodeOfConductVisible",className:"policy-link-area"},e.createElement(n.Composites.ActionWithSymbolLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Settings_Policies_Link_Header",shouldTranslate:!0}),e.createElement(n.ActionWithSymbol,{action:t.partial(this.openLinkPanelFor,"codeOfConductLink")},"\n                                    ",this.getLabelForPolicyPage("codeOfConductLink"),"\n                                "))):null):null))}.apply(this,[s,i]):null),e.createElement(n.Divider,{long:!0}),e.createElement("footer",{className:"actions"},e.createElement(a.button,{label:"Pages_Member_Signup_Settings_Done",onClick:this.applySettings,className:"btn-confirm-primary btn-md done-button"})))}return function(){var t=i.translate;return e.createElement(s,{panelName:this.props.panelName,title:t("Pages_Member_Signup_Settings_Title"),ref:"frame",helpId:o.SITE_MEMBERS.SETTINGS,className:"site-members-settings-new-panel"},l.apply(this,[t]))}.apply(this,[])}}),define("panels/focusPanels/siteMembersSettingsPanel",["react","create-react-class","lodash","core","helpIds","panels/focusPanels/siteMembersSettingsPanel.rt","panels/focusPanels/siteMembersSettingsNewPanel.rt","experiment","pmrpc","util"],function(e,t,n,a,s,i,o,l,r,c){"use strict";var p={GOOGLE:"google",FACEBOOK:"facebook"},u={TERMS_OF_USE:"termsOfUse",PRIVACY:"privacyPolicy",CODE_OF_CONDUCT:"codeOfConduct"},d={GENERAL:"general",SOCIAL:"social",TERMS_AND_CONDITIONS:"terms"},m={TERMS_OF_USE:s.SITE_MEMBERS.TERMS_OF_USE_EXAMPLE,PRIVACY_POLICY:s.SITE_MEMBERS.PRIVACY_POLICY_EXAMPLE};return t({displayName:"siteMembersSettingsPanel",mixins:[a.mixins.editorAPIMixin,e.addons.LinkedStateMixin],getInitialState:function(){var e=this.getEditorAPI(),t={selectedTab:d.GENERAL,autoApproval:e.siteMembers.isAutoApproval(),loginDialogFirst:e.siteMembers.isLoginDialogFirst(),socialLoginGoogleEnabled:e.siteMembers.isSocialLoginEnabled(p.GOOGLE),socialLoginFacebookEnabled:e.siteMembers.isSocialLoginEnabled(p.FACEBOOK)};return this.isShowNewSiteMembersSettingsPanel()?n.assign(t,{joinCommunityEnabled:e.siteMembers.isJoinCommunityEnabled(),termsOfUseLinkVisible:e.siteMembers.isSignupPoliciesFieldEnabled(u.TERMS_OF_USE),privacyPolicyLinkVisible:e.siteMembers.isSignupPoliciesFieldEnabled(u.PRIVACY),codeOfConductLinkVisible:e.siteMembers.isSignupPoliciesFieldEnabled(u.CODE_OF_CONDUCT),termsOfUseLink:e.siteMembers.getSignupPoliciesLink(u.TERMS_OF_USE),privacyPolicyLink:e.siteMembers.getSignupPoliciesLink(u.PRIVACY),codeOfConductLink:e.siteMembers.getSignupPoliciesLink(u.CODE_OF_CONDUCT),hasSocialPages:!1}):t},componentWillMount:function(){var e=this,t=this.getEditorAPI(),n=t.documentServices.tpa.app.getDataByAppDefId("14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9");n?function(e,t,n){r.api.request(t.applicationId,{target:e.documentServices.platform.getAppsContainer()}).then(n).catch(function(){n({Error:"Application API not found."})})}(t,n,function(t){return t.hasSocialPages(function(t){return e.setState({hasSocialPages:t})})}):this.setState({hasSocialPages:!1})},closePanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},getTabs:function(){return[{label:"Member_Login_Settings_General_Tab_Title",value:d.GENERAL},{label:"Member_Login_Settings_Social_Tab_Title",value:d.SOCIAL},{label:"Member_Login_Settings_Policies_Tab_Title",value:d.TERMS_AND_CONDITIONS}]},getLabelForPolicyPage:function(e){return this.state[e+"Item"]?c.link.getLinkValueAsString(this.getEditorAPI(),this.state[e+"Item"]):this.state[e]?c.link.getLinkValueAsString(this.getEditorAPI(),this.getEditorAPI().data.getById(this.state[e].replace("#",""))):c.translate("Pages_Member_Signup_Settings_Policies_Link_Label")},getTabValues:function(){return d},getArticles:function(){return m},selectTab:function(e){this.setState({selectedTab:e})},isShowNewSiteMembersSettingsPanel:function(){return l.isOpen("se_santaMembers")},isSocialAppInstalled:function(){return this.state.hasSocialPages},toggleEditPoliciesVisibility:function(e){this.setState(_defineProperty({},e,!this.state[e]))},linkPanelCallback:function(e,t){n.isObject(t)&&this.setState(_defineProperty({},e+"Item",t)),n.isString(t)&&this.setState(_defineProperty({},""+e,t)),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_settings_signup_link_to_policy,{name:e,action:"set-link",type:n.isObject(t)?t.type:this.getEditorAPI().data.getById(t.replace("#",""))})},applySettings:function(){var e=this,t=this.getEditorAPI().siteMembers,s=this.state,i=s.autoApproval,o=s.loginDialogFirst,l=s.socialLoginGoogleEnabled,r=s.socialLoginFacebookEnabled;t.isAutoApproval()!==i&&t.setAutoApproval(i),t.isLoginDialogFirst()!==o&&(t.setLoginDialogFirst(o),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_settings_signup_settings,{name:"shown first",value:this.state.loginDialogFirst?"login":"signup"})),t.isSocialLoginEnabled(p.GOOGLE)!==l&&(t.setSocialLoginVendorStatus(p.GOOGLE,l),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_settings_google_login_changed,{googlePlus:l})),t.isSocialLoginEnabled(p.FACEBOOK)!==r&&(t.setSocialLoginVendorStatus(p.FACEBOOK,r),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_settings_facebook_login_changed,{facebook:r})),this.isShowNewSiteMembersSettingsPanel()&&(this.isSocialAppInstalled()&&t.isJoinCommunityEnabled()!==this.state.joinCommunityEnabled&&(t.setJoinCommunityStatus(this.state.joinCommunityEnabled),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_settings_signup_settings,{name:"join the community",value:this.state.joinCommunityEnabled?"checked":"unchecked"})),n.forEach(n.values(u),function(n){(function(e,t,n){return e.isSignupPoliciesFieldEnabled(n)!==t[n+"LinkVisible"]&&(t[n+"LinkItem"]||t[n+"Link"])})(t,e.state,n)&&(t.setSignupPoliciesFieldStatus(n,e.state[n+"LinkVisible"]),e.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_settings_signup_settings,{name:n,value:e.state[n+"LinkVisible"]?"on":"off"})),e.state[n+"LinkItem"]&&t.setSignupPoliciesLink(n,e.state[n+"LinkItem"])})),this.closePanel()},openHowToHelpCenter:function(){this.getEditorAPI().panelManager.openHelpCenter(s.SITE_MEMBERS.HOW_TO,{},{origin:this.props.panelName,panel_name:this.props.panelName})},openExamplePolicy:function(e){this.getEditorAPI().panelManager.openHelpCenter(e,{},{})},getAutoApprovalOptions:function(){return[{label:"Pages_Member_Signup_Permission_Settings_Dropdown_Automatic",value:!0},{label:"Pages_Member_Signup_Permission_Settings_Dropdown_Manual",value:!1}]},getLoginFirstOptions:function(){return[{label:"Pages_Member_Signup_Display_Settings_Dropdown_Signup",value:!1},{label:"Pages_Member_Signup_Display_Settings_Dropdown_Login",value:!0}]},onRadioButtonsClick:function(e,t){this.setState(_defineProperty({},e,t))},openLinkPanelFor:function(e){var t=this.getEditorAPI();t.openLinkPanel({visibleSections:{PageLink:!0,AnchorLink:!0,NoLink:!1,PhoneLink:!1,ExternalLink:!1,EmailLink:!1,DocumentLink:!1,LoginToWixLink:!1,EdgeAnchorLinks:!1,PopupLink:!1},link:function(e,t,n){return t[n+"Item"]?t[n+"Item"]:t[n]?e.data.getById(t[n].replace("#","")):null}(t,this.state,e),showAllPopups:!0,pageTabTitle:"LINK_PANEL_TAB_ANCHOR",pageTabPageDropDownTitle:"PLATFORM_LINK_MENU_PAGE_PAGE_OPTION",anchorTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_PAGELINK_LABEL",title:"Pages_Member_Signup_Settings_Policies_Link_Header",callback:n.partial(this.linkPanelCallback,e)}),this.getEditorAPI().bi.event(a.bi.events.topbar.pages.top_bar_PAGES_settings_signup_link_to_policy,{name:e,action:"click",type:"none"})},render:function(){return(this.isShowNewSiteMembersSettingsPanel()?o:i).apply(this)}})}),define("panels/focusPanels/newFeaturesVideoPanel",["create-react-class","lodash","core","panels/focusPanels/focusPanelMixin","panels/focusPanels/welcomeScreenVideoPanel.rt"],function(e,t,n,a,s){"use strict";var i=n.bi;return e({displayName:"newFeaturesVideoPanel",mixins:[n.mixins.editorAPIMixin,a],getBIEvent:function(){return i.events.newFeaturesVideoPanel.NEW_FEATURES_INTRO_VIDEO_CLOSE},render:s})}),define("panels/commonControls/buttonWithSpinner/buttonWithSpinner.rt",["react","lodash","baseUI","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement(a.Button,{className:t(this.getButtonClasses()).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")+" "+(this.props.className||""),disabled:this.props.disabled,onClick:this.onClick},e.createElement("div",{className:"btn-content "+t({"hidden-content":!this.isStatus("initial")}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")}," ",this.props.children," "),e.createElement("div",{className:"intermidiate-states"},this.isStatus("pending")?e.createElement("div",{className:"spinner",key:"spinner"}):null,this.isStatus("success")?e.createElement("div",{className:"appearance-container",key:"success"},e.createElement(n.symbol,{name:"check",className:"success-icon"})):null,this.isStatus("error")?e.createElement("div",{className:"appearance-container",key:"error"},e.createElement("div",{className:"error-container"},"!")):null))}}),define("panels/commonControls/buttonWithSpinner/buttonWithSpinner",["create-react-class","prop-types","lodash","panels/commonControls/buttonWithSpinner/buttonWithSpinner.rt"],function(e,t,n,a){"use strict";return e({displayName:"ButtonWithSpinner",propTypes:{class:t.string,disabled:t.bool,onClick:t.func,fadeDuration:t.number,dontReturnToInitialState:t.bool,allowToClickAfterFail:t.bool},getInitialState:function(){return{status:"initial",hadFail:!1,clickCounter:0}},getButtonClasses:function(){return{"btn-with-spinner":!0,"success-status":"success"===this.state.status,"error-status":"error"===this.state.status}},onClick:function(e){var t=0===this.state.clickCounter&&this.props.dontReturnToInitialState,n=this.props.allowToClickAfterFail&&this.state.hadFail;(t||n)&&(this.setState({status:"pending"}),this.props.onClick(e,this.onSuccess,this.onError)),this.setState({clickCounter:this.state.clickCounter+1})},onSuccess:function(){this.changeStatusAndReturnToInitial("success")},onError:function(){this.changeStatusAndReturnToInitial("error"),this.setState({hadFail:!0})},changeStatusAndReturnToInitial:function(e){var t="error"===e&&this.props.allowToClickAfterFail;this.setState({status:e}),!t&&this.props.dontReturnToInitialState||window.setTimeout(function(){this.setState({status:"initial"})}.bind(this),this.props.fadeDuraion||2300)},isStatus:function(e){return e===this.state.status},render:a})}),define("panels/focusPanels/accessibilityPanel.rt",["react","lodash","baseUILib","baseUI","util","panels/frames/focusPanelFrame","panels/commonControls/buttonWithSpinner/buttonWithSpinner","helpIds","experiment"],function(e,t,n,a,s,i,o,l,r){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,shouldHideHeader:!0,onClose:this.onPanelClose},e.createElement("div",{className:"accessibility-panel"},e.createElement(n.PanelHeaderCenteredText,{title:"SITE_ACCESSIBLITY_SETTINGS_PANEL_HEADER_TITLE",subtitle:"SITE_ACCESSIBLITY_SETTINGS_PANEL_SUB_TITLE",onHelp:this.openHeaderHelp,onClose:this.closeByXButton}),e.createElement("div",{className:"accessibility-panel-content"},e.createElement("div",{className:"accessibility-settings"},e.createElement("div",{className:"accessibility-settings-block"},e.createElement("div",{className:"accessibility-settings-block-icon"},e.createElement(a.symbol,{name:"keyboardAccessibility"})),e.createElement("div",{className:"accessibility-settings-block-info"},e.createElement("div",{className:"accessibility-settings-block-title"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS_TITLE")),e.createElement("div",{className:"accessibility-settings-block-description"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS_TEXT"))),e.createElement("div",{className:"accessibility-settings-block-control"},e.createElement(n.Tooltip,{content:"SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS_TOOLTIP",isOpen:this.state.visualFocusTootlipOpen,disabled:this.state.visualFocusEnabled},e.createElement(n.ToggleSwitch,{value:this.state.visualFocusEnabled,onChange:this.toggleVisualFocus})))))),e.createElement("div",{className:"accessibility-panel-footer"},e.createElement("div",{className:"accessibility-panel-footer-content"},e.createElement("div",{className:"accessibility-learn-more"},e.createElement("span",{className:"accessibility-learn-more-text"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_LINK_TO_KB_TEXT")),e.createElement(n.Button,{className:"btn-text accessibility-learn-more-link",onClick:this.openLearnMoreLink},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_LINK_TO_KB"))),e.createElement(n.Button,{className:"accessibility-done-btn btn-confirm-secondary btn-md",onClick:this.closeByCloseButton},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_CLOSE_BUTTON"))))))}}),define("panels/focusPanels/accessibilityPanel",["create-react-class","lodash","core","helpIds","panels/focusPanels/accessibilityPanel.rt"],function(e,t,n,a,s){"use strict";return e({propTypes:{},displayName:"accessibilityPanel",mixins:[n.mixins.editorAPIMixin],successStatusDuration:1e3,getInitialState:function(){return{visualFocusEnabled:this.getEditorAPI().accessibility.visualFocus.get(),visualFocusTootlipOpen:!1}},componentDidMount:function(){var e=this.getEditorAPI();e.bi.event(n.bi.events.accessibilityPanel.opened,{visual_ind_toggle:e.accessibility.visualFocus.get()?"on":"off",site_id:e.documentServices.generalInfo.getSiteId()})},openHelpLink:function(e){var t={learn_more:Boolean(e),panel_name:this.props.panelName,origin:n.constants.BI.HELP.ORIGIN.PANEL};this.getEditorAPI().panelManager.openHelpCenter(a.EXTERNAL.ACCESSIBILITY_PANEL,{},t)},openHeaderHelp:function(){this.openHelpLink(!1)},openLearnMoreLink:function(){this.openHelpLink(!0)},close:function(e){var t=this.getEditorAPI();t.bi.event(n.bi.events.accessibilityPanel.close,{visual_ind_toggle:t.accessibility.visualFocus.get()?"on":"off",closeMethod:e,site_id:t.documentServices.generalInfo.getSiteId()}),t.panelManager.closePanelByName(this.props.panelName)},closeByXButton:function(){this.close("X")},closeByCloseButton:function(){this.close("close")},onPanelClose:function(e){this.close(e)},activateReordering:function(e,a,s){var i=this.getEditorAPI(),o=t.now();i.bi.event(n.bi.events.accessibilityPanel.click_reordering_button,{site_id:i.documentServices.generalInfo.getSiteId()}),i.accessibility.reorderComponents(function(){var e=Math.floor(t.now()-o);i.bi.event(n.bi.events.accessibilityPanel.reordering_has_finished,{duration:e,site_id:i.documentServices.generalInfo.getSiteId()}),a()},s)},toggleVisualFocus:function(){var e=this.getEditorAPI(),a=!this.state.visualFocusEnabled;this.getEditorAPI().accessibility.visualFocus.set(a),this.setState({visualFocusEnabled:a,visualFocusTootlipOpen:!a}),e.bi.event(n.bi.events.accessibilityPanel.click_enable_visual_indicator,{site_id:e.documentServices.generalInfo.getSiteId(),value:a?"ON":"OFF"}),t.delay(function(){this.setState({visualFocusTootlipOpen:!1})}.bind(this),4e3)},render:s})}),define("panels/focusPanels/mobileEditorFirstTimePanel.rt",["react","lodash","panels/focusPanels/popupTemplate","core"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,className:"mobile-editor-first-time",h1text:"Notification_Box_Mobile_FirstTime_Title",imageClassName:"check-your-mobile-site-image",bodyText:"Notification_Box_Mobile_FirstTime_Text",dontShowAgainKey:a.constants.USER_PREFS.MOBILE_EDITOR.FIRST_TIME_PANEL.DONT_SHOW_AGAIN,shouldNotCloseOnBlur:!0,userPrefType:"site"})}}),define("panels/focusPanels/mobileEditorFirstTimePanel",["create-react-class","prop-types","core","panels/focusPanels/mobileEditorFirstTimePanel.rt"],function(e,t,n,a){"use strict";return e({displayName:"mobileEditorFirstTimePanel",propTypes:{panelName:t.string.isRequired},mixins:[n.mixins.editorAPIMixin],render:a})}),define("panels/focusPanels/checkYourMobileSitePanelMapper",[],function(){"use strict";return function(e){return{togglePreview:e.preview.togglePreview,setMobileEditor:e.setMobileEditor,onClose:function(){e.waitForChangesApplied(e.topBar.animateModeSwitch)}}}}),define("panels/focusPanels/checkYourMobileSitePanel.rt",["react","lodash","panels/focusPanels/popupTemplate","core"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,className:"check-your-mobile-site",buttons:this.buttons,imageClassName:"check-your-mobile-site-image",h1text:"Notification_Box_Mobile_Preview_Text_Title",bodyText:"Notification_Box_Mobile_Preview_Text_Body",hideDontShowCheckbox:!0,shouldNotCloseOnBlur:!0})}}),define("panels/focusPanels/checkYourMobileSitePanel",["create-react-class","lodash","prop-types","higherOrderComponents","panels/focusPanels/checkYourMobileSitePanelMapper","panels/focusPanels/checkYourMobileSitePanel.rt"],function(e,t,n,a,s,i){"use strict";var o=e({displayName:"checkYourMobileSitePanel",propTypes:{panelName:n.string.isRequired,togglePreview:n.func.isRequired,setMobileEditor:n.func.isRequired,onClose:n.func.isRequired},backToEditor:function(){this.props.togglePreview()},goToMobilePreview:function(){this.props.setMobileEditor()},componentWillMount:function(){this.buttons=[{className:"btn-md btn-confirm-secondary",onClick:this.backToEditor,label:"Notification_Box_Mobile_Preview_Button_Back_to_Editor",automationId:"back-to-editor"},{className:"btn-md",onClick:this.goToMobilePreview,label:"Notification_Box_Mobile_Preview_Button_See_Mobile_Site",automationId:"see-mobile-site"}]},componentWillUnmount:function(){this.props.onClose()},render:i});return a.connectEditorAPI(s)(a.renderWhenMutated(o))}),define("panels/focusPanels/focusPanels",["panels/focusPanels/welcomeVideoPanel","panels/focusPanels/exampleFocusPanel","panels/focusPanels/blogManagerPanel","panels/focusPanels/shoutOutTemplatesPanel","panels/focusPanels/aviaryPanel","panels/focusPanels/organizeImagesPanel","panels/focusPanels/outOfGridMobilePanel","panels/focusPanels/outOfGridDesktopPanel","panels/focusPanels/outOfContainerGridPanel","panels/focusPanels/dragToHeaderPanel","panels/focusPanels/attachToSOSPPanel","panels/focusPanels/detachedFromSOSPPanel","panels/focusPanels/spotifySearchFocusPanel","panels/focusPanels/iTunsLinkMaker","panels/focusPanels/pageAppInstalling","panels/focusPanels/howToVideoGalleryPanel","panels/focusPanels/feedbackPanel","panels/focusPanels/getTrafficPanel","panels/focusPanels/promotionModalPanel","panels/focusPanels/sizeRestrictionPanel","panels/focusPanels/newEditorWelcomeScreenPanel","panels/focusPanels/editorMigrationFailedPanel","panels/focusPanels/newUserIntroVideoPanel","panels/focusPanels/cameFromADIVideoPanel","panels/focusPanels/howToVideoPlayer","panels/focusPanels/newEditorListWelcomeScreenPanel","panels/focusPanels/createNewTextBoxPanel","panels/focusPanels/popupTemplate","panels/focusPanels/siteImageOptimizationPanel","panels/focusPanels/siteMembersSettingsPanel","panels/focusPanels/newFeaturesVideoPanel","panels/focusPanels/accessibilityPanel","panels/focusPanels/mobileEditorFirstTimePanel","panels/focusPanels/checkYourMobileSitePanel"],function(e,t,n,a,s,i,o,l,r,c,p,u,d,m,h,g,f,P,_,E,b,C,N,I,S,T,y,v,k,L,A,O,D,M){"use strict";return{welcomeVideoPanel:e,exampleFocusPanel:t,blogManagerPanel:n,shoutOutTemplatesPanel:a,aviaryPanel:s,organizeImagesPanel:i,outOfGridMobilePanel:o,outOfGridDesktopPanel:l,outOfContainerGridPanel:r,dragToHeaderPanel:c,attachToSOSPPanel:p,detachedFromSOSPPanel:u,spotifySearchFocusPanel:d,iTunsLinkMaker:m,howToVideoGalleryPanel:g,pageAppInstallingPanel:h,feedbackPanel:f,getTrafficPanel:P,promotionModalPanel:_,sizeRestrictionPanel:E,newEditorWelcomeScreenPanel:b,editorMigrationFailedPanel:C,newUserIntroVideoPanel:N,cameFromADIVideoPanel:I,howToVideoPlayer:S,newEditorListWelcomeScreenPanel:T,createNewTextBoxPanel:y,popupTemplate:v,siteImageOptimizationPanel:k,siteMembersSettingsPanel:L,newFeaturesVideoPanel:A,accessibilityPanel:O,mobileEditorFirstTimePanel:D,checkYourMobileSitePanel:M}}),define("panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,confirmLabel:"Pages_Settings_Delete_Last_Page_Message_Confirmation",className:"delete-page-confirmation",panelTitle:a.translate("Pages_Settings_Delete_Last_Page_Message_Title")},e.createElement("div",{className:"icon"},e.createElement(s.symbol,{name:"plaster"})),e.createElement("div",{},e.createElement("p",{},a.translate("Pages_Settings_Delete_Last_Page_Message")),e.createElement("p",{},a.translate("Pages_Settings_Delete_Last_Page_Message2")),e.createElement("p",{},a.translate("Pages_Settings_Delete_Last_Page_Message3"),"\n            ",e.createElement("a",{key:"page-settings-tab-privacy-member-url",href:"https://www.wix.com/support/html5/",target:"_blank"},e.createElement(s.button,{label:"Pages_Settings_Delete_Last_Page_Message_Link",className:"btn-text"})),".\n        ")))}}),define("panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage",["create-react-class","core","lodash","panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage.rt"],function(e,t,n,a){"use strict";return e({displayName:"deleteLastPageMessage",mixins:[t.mixins.editorAPIMixin],render:a})}),define("panels/messagePanels/deletePageMessage/deletePageMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,confirmLabel:"Pages_Settings_Delete_Page_Delete",cancelLabel:"Pages_Settings_Delete_Page_Cancel",className:"important delete-page-message",panelTitle:a.translate(this.props.isPopup?"Pages_Settings_Delete_Popup_Title":"Pages_Settings_Delete_Page_Title")},e.createElement("div",{className:"delete-page-message"},e.createElement("div",{className:"icon"},e.createElement(s.symbol,{name:"deleteGeneralIcon"})),e.createElement("div",{className:"message"},a.translate(this.props.isPopup?"Pages_Settings_Delete_Popup_Message":"Pages_Settings_Delete_Page_Message")+" "+this.props.pageTitle+a.translate("Pages_Settings_Delete_Page_Message_End"))))}}),define("panels/messagePanels/deletePageMessage/deletePageMessage",["create-react-class","lodash","panels/messagePanels/deletePageMessage/deletePageMessage.rt"],function(e,t,n){"use strict";return e({displayName:"deletePageMessage",render:n})}),define("panels/messagePanels/exampleMessagePanel.rt",["react","lodash","panels/frames/messagePanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,width:"500",height:"500",onConfirm:this.onConfirm,confirmLabel:"OK",title:"Hello"},e.createElement("div",{},"content here"))}}),define("panels/messagePanels/exampleMessagePanel",["create-react-class","lodash","panels/messagePanels/exampleMessagePanel.rt","coreUtilsLib"],function(e,t,n,a){"use strict";return e({displayName:"exampleMessage",onConfirm:function(){a.log.info("onConfirm called")},render:n})}),define("panels/messagePanels/siteRevisionsPanel.rt",["react","lodash","baseUI","util","panels/frames/messagePanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{ref:"frame",panelName:this.props.panelName,panelTitle:a.translate("TOPBAR_SITE_HISTORY_MSG_TITLE"),confirmLabel:"TOPBAR_SITE_HISTORY_MSG_BUTTON",onConfirm:this.onConfirm,className:"site-revisions-panel",onCancel:this.onCloseFrame},e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"image-container"},e.createElement(n.symbol,{name:"siteHistoryClipart"})),e.createElement("div",{className:"description-container"},e.createElement("p",{},a.translate("TOPBAR_SITE_HISTORY_MSG_BODY1")),e.createElement("p",{},a.translate("TOPBAR_SITE_HISTORY_MSG_BODY2")))))}}),define("panels/messagePanels/siteRevisionsPanel",["react","create-react-class","panels/messagePanels/siteRevisionsPanel.rt"],function(e,t,n){"use strict";return t({displayName:"siteRevisionsPanel",mixins:[e.addons.LinkedStateMixin],onConfirm:function(){this.props.onButtonClick&&this.props.onButtonClick(!0)},onCloseFrame:function(){this.props.onButtonClick&&this.props.onButtonClick(!1)},render:n})}),define("panels/messagePanels/switchToOldEditorConfirmationPanel.rt",["react","lodash","util","baseUI","panels/frames/messagePanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{ref:"frame",panelName:this.props.panelName,className:"switch-to-old-editor",panelTitle:n.translate(this.props.title),confirmLabel:"Notification_Box__ToOldEditor_Button_ToOldEditor",onConfirm:this.handleBackToOld,cancelLabel:"Notification_Box__ToOldEditor_Button_Cancel",onCancel:this.close},e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"logo"},e.createElement(a.symbol,{name:"switchToOldEditorPanel"})),e.createElement("div",{className:"text"},e.createElement("div",{className:"message"},n.translate("Notification_Box__ToOldEditor_Text1")),e.createElement("div",{className:"message"},e.createElement("p",{},n.translate("Notification_Box__ToOldEditor_Text2"),"\n                    ",e.createElement("a",{onClick:function(){this.linkClick()}.bind(this)},n.translate("Notification_Box__ToOldEditor_link")))))))}}),define("panels/messagePanels/switchToOldEditorConfirmationPanel",["create-react-class","prop-types","lodash","core","util","panels/messagePanels/switchToOldEditorConfirmationPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"switchToOldEditorConfirmationPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{title:t.string.isRequired,messageBody:t.string.isRequired},handleBackToOld:function(){s.cookie.setUserPetriOverrideCookie("SantaEditorUserOverride","old"),window.onbeforeunload=null,window.location.reload(!0)},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},linkClick:function(){if(window){var e=this.getEditorAPI().getLanguageCode(),t="https://{$lang}.wix.com/support/html5/new-wix-editor-june-2015/using-your-editor/kb/suggestions-and-feedback-new-wix-editor-2015".replace("{$lang}","en"===e?"www":e);window.open(t)}},render:i})}),define("panels/messagePanels/concurrentUsers/concurrentUserPanel.rt",["react","lodash","util","symbols","panels/frames/confirmationPanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{panelName:this.props.panelName,className:"concurrent-user-panel",onConfirm:this.onOk,confirmLabel:this.text().ok,shouldHideCancelButton:!0,type:this.props.isFirstUser?"normal":"important",panelTitle:n.translate(this.text().title)},e.createElement("div",{className:"panel-inner"},e.createElement("div",{className:"concurrent-users-panel-img"},e.createElement(a.symbol,{name:this.props.isFirstUser?this.symbols.firstUser:this.symbols.secondUser})),e.createElement("div",{className:"textual-content"},e.createElement("div",{className:"sub-title"},e.createElement("span",{className:"concurrent-user"},this.getConcurrentUserToDisplay()),"\n          ",n.translate(this.text().description),"\n        "),e.createElement.apply(this,["ul",{className:"recommendation-list"},t.map(this.getRecommendations(),function(t,a){return e.createElement("li",{},e.createElement("span",{className:"number"},a+1,"."),e.createElement("span",{className:"description"},n.translate(t)))}.bind(this))]))))}}),define("panels/messagePanels/concurrentUsers/concurrentUserPanel",["create-react-class","prop-types","lodash","core","util","panels/messagePanels/concurrentUsers/concurrentUserPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=["CONCURRENT_EDITING_SOMEBODY_JOINED_OPT_1","CONCURRENT_EDITING_SOMEBODY_JOINED_OPT_2"],l=["CONCURRENT_EDITING_ALREADY_OPEN_OPT_1","CONCURRENT_EDITING_ALREADY_OPEN_OPT_2"],r={first:{title:"CONCURRENT_EDITING_SOMEBODY_JOINED_TITLE",description:"CONCURRENT_EDITING_SOMEBODY_JOINED_DESCRIPTION",ok:"CONCURRENT_EDITING_SOMEBODY_JOINED_OK_BUTTON"},second:{title:"CONCURRENT_EDITING_ALREADY_OPEN_TITLE",description:"CONCURRENT_EDITING_ALREADY_OPEN_DESCRIPTION",ok:"CONCURRENT_EDITING_ALREADY_OPEN_OK_BUTTON"}},c=0;return e({displayName:"ConcurrentUserPanel",mixins:[a.mixins.editorAPIMixin],symbols:{firstUser:"concurrentUsersPopupsBlue",secondUser:"concurrentUsersPopupsRed"},propTypes:{isFirstUser:t.bool.isRequired,concurrentUsers:t.arrayOf(t.string).isRequired,concurrentUserToDisplay:t.string},componentDidMount:function(){c=0===c?1:2},text:function(){return this.props.isFirstUser?r.first:r.second},getRecommendations:function(){return this.props.isFirstUser?o:l},getConcurrentUserToDisplay:function(){var e=this.props.concurrentUserToDisplay||n.head(this.props.concurrentUsers);return"wixStaff"===e&&(e=s.translate("CONCURRENT_EDITING_SOMEBODY_JOINED_DESCRIPTION_WIX_STAFF")),e},onOk:function(){var e=a.bi.events.concurrentUsers.CONCURRENT_USERS_POPUP_OK_CLICK,t={user:this.props.isFirstUser?"first":"second",count:this.props.concurrentUsers.length,is_first:1===c};this.getEditorAPI().bi.event(e,t)},render:i})}),define("panels/messagePanels/messagePanels",["panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage","panels/messagePanels/deletePageMessage/deletePageMessage","panels/messagePanels/exampleMessagePanel","panels/messagePanels/siteRevisionsPanel","panels/messagePanels/switchToOldEditorConfirmationPanel","panels/messagePanels/concurrentUsers/concurrentUserPanel"],function(e,t,n,a,s,i){"use strict";return{deleteLastPageMessage:e,deletePageMessage:t,exampleMessage:n,siteRevisionsPanel:a,switchToOldEditorConfirmationPanel:s,concurrentUserPanel:i}}),define("panels/toolPanels/pagesSelector/pageItem.rt",["react","lodash","baseUI","baseUILib","symbols","core"],function(e,t,n,a,s,i){"use strict";return function(){return function(){var o=this.props.dataSource,l=this.getEditorAPI(),r=this.validatePage();return e.createElement("div",{className:t(this.getItemClassNames(o)).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(n.tooltip,{disabled:r.valid,shouldTranslate:!1,value:r.message},e.createElement("label",{className:"item-label"},o.pageData?e.createElement(a.Checkbox,{key:"toggle",disabled:!r.valid,value:this.isSelected(),onChange:this.handleToggleChanged}):null,e.createElement("span",{className:"page-name"},o.label),o.pageData&&l.pages.isHomePage(o.pageData.id)?e.createElement(s.symbol,{name:"pageItemHomeIcon",key:"isHome"}):null,o.pageData&&i.utils.tpaTypeUtils.isTPA(o.pageData)&&!i.utils.tpaTypeUtils.isTPASpecialPage(l,o.pageData)?e.createElement(s.symbol,{name:"actionButtonSpecialPages",key:"isTpaPage"}):null,o.pageData&&i.utils.blogTypeUtils.isBlogSectionPage(l,o.pageData)?e.createElement(s.symbol,{name:"actionButtonBlogPages",key:"isBlogPage"}):null,o.type.isLink?e.createElement(s.symbol,{name:"pageItemLinkIcon",key:"isLink"}):null,o.type.isDropdown?e.createElement(s.symbol,{name:"pageItemDropdownIcon",key:"isDropDown"}):null,o.isVisible?null:e.createElement(s.symbol,{name:"pageItemHideIcon",key:"isHidden"}))))}.apply(this,[])}}),define("panels/toolPanels/pagesSelector/pageItem",["react","create-react-class","prop-types","core","lodash","panels/toolPanels/pagesSelector/pageItem.rt"],function(e,t,n,a,s,i){"use strict";return t({mixins:[a.mixins.editorAPIMixin,e.addons.LinkedStateMixin],displayName:"pageSelectorPageItem",propTypes:{isSubMenu:n.bool,isSubMenuLast:n.bool,validatePage:n.func,selectedPageIds:n.array.isRequired,dataSource:n.object.isRequired,toggleSelection:n.func},handleToggleChanged:function(e){this.props.toggleSelection&&this.props.toggleSelection(this.getPageId(),e)},getItemClassNames:function(e){var t=this.validatePage().valid;return{"pages-selector-item":!0,"current-page":!1,"item-hidden":!e.isVisible,"item-disabled":!t,"item-first-level":!this.props.isSubMenu,"item-second-level":this.props.isSubMenu,"item-second-level-last":this.props.isSubMenuLast,"item-is-page":e.type.isPage}},isSelected:function(){return s.includes(this.props.selectedPageIds,this.getPageId())},validatePage:function(){var e=this.getPageId(),t=[this.props.validatePage||s.noop,s.constant({valid:!0})];return s.reduce(t,s.bind(function(t,n){return t||n(e,this)},this),void 0)},getPageId:function(){return this.props.dataSource.pageData&&this.props.dataSource.pageData.id},render:i})}),define("panels/toolPanels/pagesSelector/treeNode.rt",["react","lodash"],function(e,t){"use strict";return function(){return function(){var n=this.getTreeViewClass(),a=this.props.nodeContent,s=this.getChildren().length;return this.hasChildren(),e.createElement("li",{"data-numofchildren":s,className:t({"has-children":this.hasChildren(),"pages-tree-node":!0}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(a,this.passNodeContentProps(this.props.dataSource)),e.createElement(n,t.assign({},{isCollapsed:this.state.collapsed},this.passNodeProps())))}.apply(this,[])}}),define("panels/toolPanels/pagesSelector/pagesSelectorPanel.rt",["react","lodash","util","baseUI","baseUILib","symbols","popups","panels/toolPanels/pagesSelector/pageItem","panels/toolPanels/pagesSelector/treeNode.rt","panels/frames/toolPanelFrame"],function(e,t,n,a,s,i,o,l,r,c){"use strict";return function(){function i(){var i=o.mappers.pagesSelectorPanel(this.getEditorAPI());return e.createElement(c,function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({onContentElementReady:this.cacheContentElement,top:this.props.top,left:this.props.left,key:"pages-selector-panel",keyboardShortcuts:this.getKeyboardShortcuts(),className:"pages-selector-panel",headerTitle:n.translate("Popups_Settings_Pages_Panel_Header")},t.omit(this.props,"children")),i.selectAll.visible?e.createElement("div",{className:"description-block",key:"selectAll_description"},"\n        ",n.translate("Popups_Settings_Pages_Panel_Text"),"\n    "):null,i.selectAll.visible?e.createElement("div",{className:"select-all-block",key:"selectAll_control"},e.createElement(s.Checkbox,{disabled:i.selectAll.disabled,labelAfterSymbol:!0,value:i.selectAll.checked,indeterminate:i.selectAll.indeterminate,onChange:this.toggleOpenOnAllPages,label:"Popups_Settings_Pages_All_Toggle"})):null,e.createElement(s.CustomScroll,{},function(n){var s=this.getEditorAPI();return e.createElement("div",{className:"pages-selector-scrollbox"},e.createElement(a.treeView,{className:"pages-tree ",dataSource:this.getTreeDataSource(),editorAPI:s,nodeContent:l,nodeTemplate:r,validatePage:t.partial(this.validatePage,n),selectedPageIds:n.selectedPageIds,toggleSelection:this.toggleOpenOnPage,isRoot:!0}))}.apply(this,[i])))}return this.getEditorAPI().pages.popupPages.getCurrentPopup()?i.apply(this,[]):null}}),define("panels/toolPanels/pagesSelector/pagesSelectorPanel",["create-react-class","lodash","util","core","popups","panels/mixins/limitInitialPositionToStageMixin","panels/toolPanels/pagesSelector/pagesSelectorPanel.rt"],function(e,t,n,a,s,i,o){"use strict";return e({displayName:"pagesSelectorPanel",mixins:[a.mixins.editorAPIMixin,n.draggableMixin,n.translationMixin,i],toggleOpenOnPage:function(e,t){var n=this.getEditorAPI();t?s.actions.openBehaviors.assignOpenBehaviorToPage(n,e):s.actions.openBehaviors.removeOpenBehaviorFromPage(n,e)},toggleOpenOnAllPages:function(e){var t=this.getEditorAPI();e?s.actions.openBehaviors.assignOpenBehaviorToAllPages(t):s.actions.openBehaviors.removeOpenBehaviorFromAllPages(t)},validatePage:function(e,n){if(t.has(e.occupiedPages,n))return{valid:!1,message:this.translateTemplate("Popups_Settings_Triggers_Page_Has_Popup_Tooltip",{POPUP_NAME:'"'+e.occupiedPages[n]+'"'},this.getEditorAPI())}},getKeyboardShortcuts:function(){var e={},t=n.browserUtil.getKeyboardSpecialKey().value;return e[t+" + z"]=this.getEditorAPI().history.undo,e[[t+" + y",t+" + shift + z"].join(",")]=this.getEditorAPI().history.redo,e},getTreeDataSource:function(){var e=this.getEditorAPI(),n=e.pages.dynamicPages.getMenuItems(),a=e.mainMenu.getMenuItemsTreeForPagesFixed(),s=t.flatMap(n,"items");return a.concat(s)},cacheContentElement:function(e){this.contentElement=e},render:o})}),define("panels/toolPanels/exampleToolPanel.rt",["react","lodash","panels/frames/toolPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,headerTitle:"Tools Panel",width:"500",height:"200",top:this.props.top,left:this.props.left},e.createElement("div",{},"content here"))}}),define("panels/toolPanels/exampleToolPanel",["create-react-class","lodash","panels/toolPanels/exampleToolPanel.rt"],function(e,t,n){"use strict";return e({displayName:"exampleToolPanel",getDefaultProps:function(){return{top:"200px",left:"300px"}},render:n})}),define("panels/toolPanels/linkPanel/linkPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","util","symbols","experiment"],function(e,t,n,a,s,i,o,l){"use strict";return function(){function r(n,l){var r=this.getPagesWithAnchors();return e.createElement(a.tabs.tab,{name:"AnchorLink",className:"anchor",key:"anchorLinkTab"},t.isEmpty(r)?e.createElement("div",{key:"noAnchorsWrapper",className:"no-anchors"},e.createElement("div",{className:"symbol-container"},e.createElement(o.symbol,{name:"noLink"})),e.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_NO_ANCHOR_TITLE")),e.createElement("p",{},this.translateIfNeeded("LINK_PANEL_NO_ANCHOR_TEXT")),e.createElement(a.button,{className:"btn-text",label:"Anchor_Settings_How_Link_Text",onClick:this.openLearnMoreOnAnchor})):null,t.isEmpty(r)?null:e.createElement("label",{className:"dropdown-title",key:"pagesDropDownAnchorTabLabel"},i.translate(this.props.anchorTabPageDropDownTitle?this.props.anchorTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL")),t.isEmpty(r)?null:e.createElement.apply(this,[s.DropDown,{shouldTranslate:!1,value:this.linkToPage().value,searchBox:!0,onChange:this.linkToPage().requestChange,key:"pagesDropDownAnchorTab",optionsContainerClassName:"link-panel-options-container"},t.map(this.getPagesWithAnchors(),function(t,n,a,i,o){return e.createElement(s.DropDownOption,{className:i.level?"level"+i.level:"",key:i.id,value:i.id,label:i.title+this.getCurrentPageThisTranslate(i.id)+" "+this.getRouterTypeForPageId(i.id),shouldTranslate:!1})}.bind(this,n,l,r))]),t.isEmpty(r)?null:e.createElement(s.Divider,{long:!0,key:"anchorDivider",className:"dropdown-link-separator"}),t.isEmpty(r)||!this.isDynamicPage(this.state.page.id)||this.isCollectionPageOrHasOneRoute()?null:e.createElement("label",{className:"dropdown-title",key:"innerRouteDropDownLabel"},i.translate("LINK_PANEL_PAGE_INNER_ROUTES_DROP_DOWN_LABEL")),t.isEmpty(r)||!this.isDynamicPage(this.state.page.id)||this.isCollectionPageOrHasOneRoute()?null:e.createElement.apply(this,[s.DropDown,{shouldTranslate:!1,searchBox:!0,disabled:!this.shouldShowInnerRoutesDropDown(),key:"innerRouteDropDown",value:this.linkToInnerRoute().value,optionsContainerClassName:"link-panel-options-container",onChange:this.linkToInnerRoute().requestChange},t.map(this.getInnerRoutesDropDown(),function(t,n,a,i,o){return e.createElement(s.DropDownOption,{shouldTranslate:!1,key:i.url,value:i.url,label:i.title})}.bind(this,n,l,r))]),this.shouldShowInnerRoutesDropDown()?e.createElement(s.Divider,{key:"innerRouteDropDownDivider",long:!0,className:"dropdown-link-separator"}):null,t.isEmpty(r)?null:e.createElement("label",{className:"dropdown-title",key:"anchorNameLabel"},i.translate("LINK_PANEL_PAGE_ANCHOR_DROP_DOWN_LABEL")),t.isEmpty(r)?null:e.createElement.apply(this,[s.DropDown,{key:"anchorDropDown",shouldTranslate:!1,value:this.linkToAnchor().value,searchBox:!0,onChange:this.linkToAnchor().requestChange,optionsContainerClassName:"link-panel-options-container",disabled:!Boolean(this.state.link)||!Boolean(this.hasAnchors())||this.isDynamicPage(this.state.page.id)&&!this.shouldShowInnerRoutesDropDown()&&!this.isCollectionPageOrHasOneRoute()},t.map(this.getDropDownOptions(),function(t,n,a,i,o){return e.createElement(s.DropDownOption,{shouldTranslate:!1,key:i.value,value:i.value,label:i.label})}.bind(this,n,l,r))]))}function c(n,l){var r=this.popupList;return e.createElement(a.tabs.tab,{name:"PopupLink",key:"popupLinkTab",className:"popup"},r.length?null:e.createElement("div",{key:"popups-not-exist"},e.createElement("div",{className:"symbol-container"},e.createElement(o.symbol,{name:"noPopup"})),e.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP_TITLE")),e.createElement("p",{},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP_TEXT")),e.createElement(a.button,{className:"btn-text",label:"LINK_PANEL_TAB_ADD_NEW_POP-UP_LINK",onClick:this.goToAddPanelPopup})),r.length?e.createElement("div",{key:"popups-exist",className:"popup-list"},e.createElement.apply(this,[a.dropDown.select,{label:"LINK_PANEL_TAB_POP-UP_DROP_DOWN_LABEL",valueLink:this.linkTo("pageId")},t.map(r,function(t,n,s,i,o){return e.createElement(a.dropDown.option,{shouldTranslate:!1,key:i.id,value:"#"+i.id},i.title)}.bind(this,n,l,r))]),e.createElement(s.Divider,{long:!0,className:"popup-divider"}),e.createElement("div",{className:"popup-footer"},this.isMobileEditor()?null:e.createElement("div",{className:"popup-footer-content",key:"20932"},e.createElement("span",{className:"popup-want-to-add-link"},i.translate("LINK_PANEL_TAB_ADD_NEW_POP-UP_TEXT")),e.createElement(a.button,{className:"btn-text",label:"LINK_PANEL_TAB_ADD_NEW_POP-UP_LINK",onClick:this.goToAddPanelPopup})))):null)}function p(){var p=this.isSectionVisible("PageLink"),u=this.isSectionVisible("NoLink");return e.createElement(n,{helpId:this.getHelpId(),panelName:this.props.panelName,selectedComponentType:this.props.bi.selectedComponentType,headerTitle:i.translate("LINK_PANEL_HEADER_PANE_LABEL"),ref:"frame",onClose:this.props.onCancelCallback&&this.props.onCancelCallback.bind(null,this.props.link),className:"link-panel"},e.createElement(a.tabs.holder,{valueLink:this.linkSelectedTab(),className:"left radio",ref:"tabs"},e.createElement(a.tabs.header,{},this.isSectionVisible("NoLink")?e.createElement(a.tabs.label,{htmlFor:"NoLink",key:"noLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_NONE")):null,this.isSectionVisible("PageLink")&&!l.isOpen("dpages")?e.createElement(a.tabs.label,{htmlFor:"PageLink",key:"pageLinkTabLabel"},this.translateIfNeeded(this.props.pageTabTitle?this.props.pageTabTitle:"LINK_PANEL_TAB_SITE_PAGE")):null,this.isSectionVisible("PageLink")&&l.isOpen("dpages")&&this.shouldShowPageSection()?e.createElement(a.tabs.label,{htmlFor:"PageLink",key:"pageLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_PAGE")):null,l.isOpen("dpages")&&this.isSectionVisible("AnchorLink")?e.createElement(a.tabs.label,{htmlFor:"AnchorLink",key:"anchorLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_ANCHOR")):null,this.isSectionVisible("ExternalLink")?e.createElement(a.tabs.label,{htmlFor:"ExternalLink",key:"externalLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_WEB_ADDRESS")):null,this.isSectionVisible("EmailLink")?e.createElement(a.tabs.label,{htmlFor:"EmailLink",key:"emailLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_EMAIL")):null,this.isSectionVisible("PhoneLink")?e.createElement(a.tabs.label,{htmlFor:"PhoneLink",key:"phoneLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_PHONE")):null,this.isSectionVisible("DocumentLink")?e.createElement(a.tabs.label,{htmlFor:"DocumentLink",key:"docLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_DOCUMENT")):null,this.isSectionVisible("EdgeAnchorLinks")?e.createElement(a.tabs.label,{htmlFor:"EdgeAnchorLinks",key:"edgeAnchorLinksLabel"},this.translateIfNeeded("LINK_PANEL_TAB_TOPandBOTTOM")):null,this.isSectionVisible("PopupLink")?e.createElement(a.tabs.label,{htmlFor:"PopupLink",key:"popupLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP")):null,l.isOpen("wixstaff")&&this.isSectionVisible("LoginToWixLink")?e.createElement(a.tabs.label,{htmlFor:"LoginToWixLink",key:"homePageLoginTabLabel"},this.translateIfNeeded("LINK_PANEL_HOME_PAGE_LOGIN")):null),e.createElement(a.tabs.content,{},u?e.createElement(a.tabs.tab,{name:"NoLink",className:"none",key:"NoLinkTab"},e.createElement("div",{className:"symbol-container"},e.createElement(o.symbol,{name:"noLink"})),e.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Title")),e.createElement("p",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Text"))):null,l.isOpen("dpages")?null:e.createElement(a.tabs.tab,{name:"PageLink",className:"page",key:"pageLinkTab"},e.createElement("label",{className:"dropdown-title"},i.translate(this.props.anchorTabPageDropDownTitle?this.props.anchorTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL")),e.createElement(s.DropDown,{options:this.getPageOptions(),value:this.state.page.pageId,shouldTranslate:!1,onChange:this.linkToPage().requestChange}),e.createElement(s.Divider,{long:!0,className:"dropdown-link-separator"}),e.createElement.apply(this,[a.dropDown.select,{label:"LINK_PANEL_PAGE_ANCHOR_DROP_DOWN_LABEL",disabled:!Boolean(this.state.link)||!Boolean(this.state.link.pageId)||!Boolean(this.hasAnchors()),valueLink:this.linkToAnchor()},t.map(this.getDropDownOptions(),function(t,n,s,i){return e.createElement(a.dropDown.option,{shouldTranslate:!1,key:s.value,value:s.value},s.label)}.bind(this,p,u))]),e.createElement(a.button,{className:"btn-text",label:"Anchor_Settings_How_Link_Text",onClick:this.openLearnMoreOnAnchor})),l.isOpen("dpages")&&this.isPagesDropDownReady()?e.createElement(a.tabs.tab,{name:"PageLink",className:"page",key:"pageLinkTab"},e.createElement("label",{className:"dropdown-title"},i.translate(this.props.pageTabPageDropDownTitle?this.props.pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL")),e.createElement.apply(this,[s.DropDown,{shouldTranslate:!1,value:this.linkToPage().value,searchBox:!0,onChange:this.linkToPage().requestChange,optionsContainerClassName:"link-panel-options-container"},t.map(this.getPagesListToShow(),function(t,n,a,i){return e.createElement(s.DropDownOption,{shouldTranslate:!1,className:a.level?"level"+a.level:"",key:a.id,value:a.id,label:a.title+this.getCurrentPageThisTranslate(a.id)+" "+this.getRouterTypeForPageId(a.id)})}.bind(this,p,u))]),e.createElement(s.Divider,{long:!0,className:"dropdown-link-separator"}),this.shouldShowInnerRoutesDropDown()?e.createElement("label",{className:"dropdown-title",key:"innerRouteDropDownLabel"},i.translate("LINK_PANEL_PAGE_INNER_ROUTES_DROP_DOWN_LABEL")):null,this.shouldShowInnerRoutesDropDown()?e.createElement.apply(this,[s.DropDown,{shouldTranslate:!1,searchBox:!0,key:"innerRouteDropDown",value:this.linkToInnerRoute().value,onChange:this.linkToInnerRoute().requestChange,optionsContainerClassName:"link-panel-options-container"},t.map(this.state.routerInnerRoutes||[],function(t,n,a,i){return e.createElement(s.DropDownOption,{shouldTranslate:!1,key:a.url,value:a.url,label:a.title})}.bind(this,p,u))]):null):null,l.isOpen("dpages")&&this.isPagesDropDownReady()?r.apply(this,[p,u]):null,e.createElement(a.tabs.tab,{name:"ExternalLink",className:"web"},e.createElement(s.Composites.TextInputLabeled,{},e.createElement(s.TextLabel,{"<baseUILib.TextLabel":!0,value:"LINK_PANEL_WEB_ADDRESS_INPUT_LABEL",automationId:"link-panel-web-address-label"}),e.createElement(s.TextInput,{key:"webAddress",validator:this.isValidUrl,invalidMessage:"Validation_V2_URL",placeholder:"LINK_PANEL_WEB_ADDRESS_DEFAUL",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("url",n)}.bind(this,p,u),value:this.state.link&&this.state.link.url,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"url")}.bind(this,p,u),focus:!0})),e.createElement(s.Divider,{}),e.createElement(s.Composites.RadioButtonsLabeled,{},e.createElement(s.TextLabel,{value:"LINK_PANEL_WEB_ADDRESS_OPTIONS_LABEL"}),function(t,n){var a=this.linkTo("target");return e.createElement(s.RadioButtons,{className:"open-target-radio-buttons",value:a.value,onChange:a.requestChange,options:[{value:"_blank",label:"LINK_PANEL_WEB_ADDRESS_OPTION1"},{value:"_self",label:"LINK_PANEL_WEB_ADDRESS_OPTION2"}]})}.apply(this,[p,u]))),e.createElement(a.tabs.tab,{name:"EmailLink",className:"email"},e.createElement(s.Composites.TextInputLabeled,{},e.createElement(s.TextLabel,{value:"LINK_PANEL_EMAIL_INPUT_LABEL",automationId:"link-panel-email-address-label"}),e.createElement(s.TextInput,{key:"emailAddress",validator:this.isValidEmail,invalidMessage:"Validation_V1_Email",placeholder:"LINK_PANEL_EMAIL_INPUT_DEFAULT",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("recipient",n)}.bind(this,p,u),value:this.state.link&&this.state.link.recipient,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"recipient")}.bind(this,p,u),focus:!0})),e.createElement(s.Divider,{}),e.createElement(s.Composites.TextInputLabeled,{},e.createElement(s.TextLabel,{value:"LINK_PANEL_EMAIL_SUBJUCT",automationId:"link-panel-email-address-subject-label"}),e.createElement(s.TextInput,{key:"emailAddressSubject",validator:this.isValidSubject,invalidMessage:"Validation_V21_InvalidInput",placeholder:"LINK_PANEL_EMAIL_SUBJECT_DEFAULT",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("subject",n)}.bind(this,p,u),value:this.state.link&&this.state.link.subject,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"subject")}.bind(this,p,u)}))),e.createElement(a.tabs.tab,{name:"PhoneLink",className:"phone"},e.createElement(s.Composites.TextInputLabeled,{},e.createElement(s.InfoIcon,{text:"LINK_PANEL_PHONE_DESCRIPTION_TOOLTIP"}),e.createElement(s.TextLabel,{value:"LINK_PANEL_PHONE_INPUT_LABEL",automationId:"link-panel-phone-number-label"}),e.createElement(s.TextInput,{key:"phoneNumber",validator:this.isValidPhone,invalidMessage:"Validation_V1_Phone",placeholder:"LINK_PANEL_PHONE_INPUT_DEFAULT",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("phoneNumber",n)}.bind(this,p,u),value:this.state.link&&this.state.link.phoneNumber,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"phoneNumber")}.bind(this,p,u),focus:!0})),e.createElement(s.Divider,{}),e.createElement("p",{className:"extra-info"},this.translateIfNeeded("LINK_PANEL_PHONE_DESCRIPTION"),"\n                    ",e.createElement(a.button,{className:"btn-text inline-link-button",label:"LINK_PANEL_PHONE_DESCRIPTION_LINK",onClick:this.openLearnMoreOnPhoneLink}))),e.createElement(a.tabs.tab,{name:"DocumentLink",className:"document"},e.createElement("label",{},this.translateIfNeeded("LINK_PANEL_DOCUMENT_LABEL")),e.createElement(a.changeMediaInput,{buttonLabelWithItems:"LINK_PANEL_DOCUMENT_BUTTON",buttonLabelWithoutItems:"LINK_PANEL_DOCUMENT_BUTTON",selectionType:"single",value:this.state.link?this.state.link.name:"",onChange:this.documentChanged}),this.isPDF()?e.createElement(s.Divider,{key:"indexableSeparator",long:!0,className:"divider"}):null,this.isPDF()?e.createElement(a.toggle,{key:"indexableToggle",value:!!this.state.link.indexable,onChange:this.pdfIndexableChanged,label:"Document_Settings_Allow_Bots"}):null),e.createElement(a.tabs.tab,{key:"edge-anchors",name:"EdgeAnchorLinks",className:"edge-anchors"},e.createElement(a.thumbnailsWithIcons,{label:"LINK_PANEL_TAB_TOPandBOTTOM_LABEL",options:this.getEdgeAnchors(),valueLink:this.linkToAnchor()})),c.apply(this,[p,u]),l.isOpen("wixstaff")?e.createElement(a.tabs.tab,{name:"LoginToWixLink",className:"home-page-link",key:"homePageLoginTab"},e.createElement(a.textInput,{ref:"postLogin",key:"postLogin",label:"LINK_PANEL_POST_LOGIN_INPUT",valueLink:this.linkToAndTrim("postLoginUrl"),validator:this.isEmptyStringOrFullUrl,invalidMessage:"Validation_V2_URL",onChangeInValidationStatus:function(e,t,n){this.setState({isValid:n})}.bind(this,p,u)}),e.createElement(a.textInput,{ref:"postSignup",key:"postSignup",label:"LINK_PANEL_POST_SIGNUP_INPUT",valueLink:this.linkToAndTrim("postSignupUrl"),validator:this.isEmptyStringOrFullUrl,invalidMessage:"Validation_V2_URL",onChangeInValidationStatus:function(e,t,n){this.setState({isValid:n})}.bind(this,p,u)}),e.createElement.apply(this,[a.dropDown.select,{label:"LINK_PANEL_VIEW_DROPDOWN",valueLink:this.linkTo("dialog")},t.map([{label:"LINK_PANEL_VIEW_SHOW_LOGIN",value:"showLogin"},{label:"LINK_PANEL_VIEW_LOGIN",value:"login"},{label:"LINK_PANEL_VIEW_SIGNUP",value:"createUser"}],function(t,n,s,i){return e.createElement(a.dropDown.option,{key:s.value,value:s.value},s.label)}.bind(this,p,u))]),e.createElement(a.toggle,{ref:"sendMail",key:"sendMail",label:"LINK_PANEL_SEND_MAIL_TOGGLE",valueLink:this.linkLoginToWixLinkSendEmailProperty()}),e.createElement(a.textInput,{ref:"welcomeEmail",key:"welcomeEmail",label:"LINK_PANEL_WELCOME_EMAIL_INPUT",valueLink:this.linkTo("mailTemplate")}),e.createElement(a.textInput,{ref:"color",key:"color",label:"LINK_PANEL_USER_COLOR_INPUT",valueLink:this.linkTo("userColor")}),e.createElement(a.textInput,{ref:"name",key:"name",label:"LINK_PANEL_BUTTON_NAME",valueLink:this.linkTo("loginCompName")})):null)),e.createElement("footer",{},e.createElement(a.button,{label:"LINK_PANEL_CANCEL_BUTTON",ref:"cancelButton",onClick:this.cancel,className:"btn-confirm-secondary"}),e.createElement(a.button,{label:"LINK_PANEL_DONE_BUTTON",ref:"okButton",onClick:this.done,className:"btn-confirm-primary",disabled:this.isOkDisabled()})))}return p.apply(this,[])}}),define("panels/toolPanels/linkPanel/linkPanel",["react","create-react-class","prop-types","core","lodash","util","stateManagement","panels/toolPanels/linkPanel/linkPanel.rt","experiment"],function(e,t,n,a,s,i,o,l,r){"use strict";function c(e,t){if("SCROLL_TO_TOP"===e.anchorDataId||"SCROLL_TO_BOTTOM"===e.anchorDataId)return!0;var n=s.has(e.anchorDataId,"id")?"#"+s.get(e.anchorDataId,"id"):e.anchorDataId;return s.some(t,{anchorDataId:n})}function p(e,t){if(e){s.has(e,"id")&&(e=e.id),"#"===e.charAt(0)&&(e=e.substr(1));for(var n=0;n<t.length;n++){var a=t[n];if(e===a.id)return s.assign({},a,{pageId:"#"+e})}}return{pageId:""}}function u(e){return"SCROLL_TO_TOP"===e}function d(e){return"SCROLL_TO_BOTTOM"===e}function m(e,t){return Boolean(p(e.pageId,t).pageId)}function h(e,t){var n=s.clone(this.state.link);n[e]=t,this.setState({link:n})}function g(){var e=this.state.link;if(!e)return!1;switch(e.type){case"DynamicPageLink":var t=r.isOpen("dpages")&&this.isCollectionPageOrHasOneRoute();return r.isOpen("dpages")&&function(e,t){return t?!s.isEmpty(e.routerId):!s.isEmpty(e.routerId)&&!s.isEmpty(e.innerRoute)}(e,t);case"PageLink":return function(e){return!!e.pageId}(e);case"AnchorLink":return function(e){return!!e.pageId&&!!e.anchorDataId}(e);case"ExternalLink":return this.isValidUrl(e&&e.url);case"EmailLink":return this.isValidEmail(e&&e.recipient);case"PhoneLink":return this.isValidPhone(e&&e.phoneNumber);case"DocumentLink":return function(e){return e.docId}(e)}return!0}var f=/\.pdf$/i;return t({displayName:"linkPanel",propTypes:{data:n.shape({pages:n.arrayOf(n.shape({id:n.string,title:n.string})),popups:n.arrayOf(n.shape({id:n.string,title:n.string})),menuItems:n.arrayOf(n.shape({title:n.string,items:n.array,link:n.shape({pageId:n.string,type:n.string})})),anchors:n.arrayOf(n.shape({id:n.string,name:n.string,pageId:n.string})),currentPageId:n.string}),bi:n.shape({selectedComponentType:n.string}),link:n.object,createDefaultData:n.func.isRequired,currentPage:n.string,callback:n.func,onCancelCallback:n.func,visibleSections:n.object,defaultLinkType:n.string,hideExternalLinkTarget:n.bool},mixins:[e.addons.LinkedStateMixin,i.translationMixin,a.mixins.editorAPIMixin],render:l,getInitialState:function(){var e=s.cloneDeep(this.props.link)||null;r.isOpen("dpages")&&(e=this.updateLinkIfPageWasConvertedToDynamicPage(e)),this.gotPageIdFromInnerRoute=!(e&&r.isOpen("dpages")&&"DynamicPageLink"===e.type);var t=this.getEditorAPI();e&&"AnchorLink"===e.type&&!c(e,this.props.data.anchors)&&(e=function(e,t){if(e.pageId){var n=s.has(e.pageId,"id")?e.pageId.id:e.pageId.replace("#","");if(s.some(t,{id:n}))return{type:"PageLink",pageId:e.pageId}}return null}(e,this.props.data.pages));var n=void 0;if(e&&"DynamicPageLink"===e.type&&(c(e,this.props.data.anchors)||(e.anchorDataId=null),function(e,t){return!!e.documentServices.routers.get.byId(t.routerId)}(t,e)||(e=null)),this.pagesList=this.cachePagesList(this.props.data.menuItems),this.popupList=this.getPopupLinkOptions(),!e){var a=this.getDefaultLink();e=a.link,n=a.page}if(!e||"PageLink"!==e.type&&"AnchorLink"!==e.type)n||(n=this.props.createDefaultData("PageLink"));else{var i=s.isString(e.pageId)?e.pageId:"#"+s.get(e.pageId,"id");n=p(i!=="#"+t.documentServices.siteSegments.getSiteStructureId()?i:this.props.data.currentPageId,this.props.data.pages)}return r.isOpen("dpages")?(this.routers=t.documentServices.routers.get.all(),{selectedTab:this.getDefaultSelectedTab(e),link:e,page:n,routerInnerRoutes:null,isClosing:!1,isValid:!0}):{selectedTab:this.getDefaultSelectedTab(e),link:e,page:n,isClosing:!1,isValid:!0}},updateLinkIfPageWasConvertedToDynamicPage:function(e){if(e&&e.type&&("PageLink"===e.type||"AnchorLink"===e.type)){var t=s.isString(e.pageId)?e.pageId:"#"+s.get(e.pageId,"id"),n=this.getEditorAPI().documentServices.routers.getRouterDataForPageIfExist(t);if(n)return{type:"DynamicPageLink",routerId:n.routerId,innerRoute:"",anchorDataId:e.anchorDataId||""}}return e},componentDidMount:function(){this.state.link&&r.isOpen("dpages")&&"DynamicPageLink"===this.state.link.type&&this.getPageFromInnerRoute()},getPageFromInnerRoute:function(){var e=this.getEditorAPI();if("CURRENT_INNER_ROUTE"===this.state.link.innerRoute){var t=p(this.props.data.currentPageId,this.props.data.pages);return this.gotPageIdFromInnerRoute=!0,void this.setState({page:t})}e.documentServices.routers.getPageFromInnerRoute(this.state.link.routerId,this.state.link.innerRoute,function(e){if(this.gotPageIdFromInnerRoute=!0,e){var t=p(e,this.props.data.pages);this.setState({page:t})}else{var n=this.getDefaultLink();this.setState({selectedTab:this.getDefaultSelectedTab(n.link),link:n.link,page:n.page})}}.bind(this))},isPagesDropDownReady:function(){return!this.state.link||"DynamicPageLink"!==this.state.link.type||this.state.link&&"DynamicPageLink"===this.state.link.type&&this.gotPageIdFromInnerRoute},getDefaultLink:function(){var e=p(this.pagesList[0].id,this.props.data.pages);if(this.props.defaultLinkType)return{link:this.props.createDefaultData(this.props.defaultLinkType),page:e};if(r.isOpen("dpages")){if(this.shouldHidePageLinkPossibilty()){var t=this.getDefaultDataForAnchorTab();return t||{link:this.props.createDefaultData("ExternalLink"),page:e}}return{link:this.getDefaultDataForPageLinkTab(this.pagesList[0].id),page:e}}return{link:this.getDefaultDataForPageAnchorLinkTab(this.pagesList[0].id),page:e}},needToGetInnerRoutes:function(e){return e.link&&this.state.link&&("DynamicPageLink"!==this.state.link.type&&"DynamicPageLink"===e.link.type&&!e.routerInnerRoutes||"DynamicPageLink"===this.state.link.type&&"DynamicPageLink"===e.link.type&&(!e.routerInnerRoutes||this.state.link.routerId!==e.link.routerId)||"DynamicPageLink"===this.state.link.type&&"DynamicPageLink"===e.link.type&&(!e.routerInnerRoutes||this.state.page.id!==e.page.id))},componentWillUpdate:function(e,t){r.isOpen("dpages")&&this.needToGetInnerRoutes(t)&&this.getRouterInnerRoutes(t)},componentWillReceiveProps:function(e){this.pagesList=this.cachePagesList(e.data.menuItems),this.popupList=this.getPopupLinkOptions()},setIsValidLink:function(){var e=!this.state.link||g.call(this);this.state.isValid!==e&&this.setState({isValid:e})},componentDidUpdate:function(){this.state.isClosing?(g.call(this)?this.saveLink=this.state.link:this.shouldHidePageLinkPossibilty()||(this.saveLink=null),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)):this.setIsValidLink()},componentWillUnmount:function(){s.isUndefined(this.saveLink)||(this.save(this.saveLink),delete this.saveLink)},getDefaultProps:function(){return{title:"Link Panel",panelName:"Link Panel",bi:{selectedComponentType:""}}},getDefaultSelectedTab:function(e){var t=void 0,n=e?e.type:null;return r.isOpen("dpages")?(t=["PageLink",void 0,null],(s.includes(t,n)||"DynamicPageLink"===n&&!e.anchorDataId)&&(n="PageLink"),("AnchorLink"===n||"DynamicPageLink"===n&&e.anchorDataId)&&(n="AnchorLink")):(t=["PageLink","AnchorLink",void 0,null],s.includes(t,n)&&(n="PageLink")),e&&(u(e.anchorDataId)||d(e.anchorDataId)?n="EdgeAnchorLinks":"PageLink"===n&&m(e,this.props.data.popups)&&(n="PopupLink")),n},linkSelectedTab:function(){return{value:this.state.selectedTab,requestChange:function(e){var t={selectedTab:e},n=void 0;if(this.state.selectedTab!==e){if(r.isOpen("dpages")&&this.state.routerInnerRoutes&&(t.routerInnerRoutes=null),"EdgeAnchorLinks"===e){var a=this.getAnchorLink("SCROLL_TO_TOP");a.page&&(t.page=a.page),t.link=a.link}else if("PopupLink"===e)t.link=this.props.createDefaultData("PageLink"),this.popupList.length>0&&(t.link.pageId="#"+this.popupList[0].id);else{if(t.link=this.props.createDefaultData(e),"PageLink"===e)if(r.isOpen("dpages")){var s=this.getDefaultPageId();t.link=this.getDefaultDataForPageLinkTab(s),t.page=p(s,this.props.data.pages)}else t.link=this.getDefaultDataForPageAnchorLinkTab(this.pagesList[0].id),t.page=p(this.pagesList[0].id,this.props.data.pages);r.isOpen("dpages")&&"AnchorLink"===e&&(n=this.getDefaultDataForAnchorTab())&&(t.link=n.link,t.page=n.page)}this.setState(t)}}.bind(this)}},getDefaultPageId:function(){if(this.shouldHidePageLinkPossibilty()){var e=this.getEditorAPI().documentServices.routers.pages.getDynamicPagesList();return s.flatMap(e,"pages")[0].id}return this.pagesList[0].id},getDefaultDataForPageLinkTab:function(e){var t=this.getRouterDataForPageIfExist(e);return t?{routerId:t.routerId,type:"DynamicPageLink"}:{type:"PageLink",pageId:e}},getDefaultDataForAnchorTab:function(){var e=this.getPagesWithAnchors();return!e||s.isEmpty(e)?null:{link:this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(e[0].id),page:p(e[0].id,this.props.data.pages)}},getDefaultDataForPageAnchorLinkTab:function(e){var t=void 0,n=this.getAnchorOptions(this.props.data.anchors,e.substring(1));return this.shouldHidePageLinkPossibilty()?n.length>0&&(t={type:"AnchorLink",anchorDataId:n[0].anchorDataId,pageId:e,anchorName:n[0].anchorName}):t={type:"PageLink",pageId:e},t},getDefaultDataForPageAnchorLinkTabWithDynamicPages:function(e){var t=this.getAnchorOptions(this.props.data.anchors,e.substring(1)),n=this.getRouterDataForPageIfExist(e);if(t.length>0)return n?{type:"DynamicPageLink",routerId:n.routerId,anchorDataId:t[0].anchorDataId}:{type:"AnchorLink",pageId:e,anchorDataId:t[0].anchorDataId,anchorName:t[0].anchorName}},linkToAndTrim:function(e){var t=this.state.link;return{value:t?t[e]:"",requestChange:s.flow(s.trim,h.bind(this,e))}},linkTo:function(e){var t=this.state.link;return{value:t?t[e]:"",requestChange:h.bind(this,e)}},isValidUrl:function(e){return!!e&&i.validate.url(e)},isValidEmail:function(e){return!!e&&i.validate.email(e)&&i.validate.notEmpty(e)},isValidSubject:function(e){return i.validate.noHTMLTags(e)},isValidPhone:function(e){return!!e&&i.validate.phone(e)&&i.validate.notEmpty(e)},updateLinkValue:function(e,t){var n=s.clone(this.state.link);n[e]=t,this.setState({link:n})},validationStatusChanged:function(e,t){var n={isValid:e};if(!e){var a=s.clone(this.state.link);a[t]=void 0,n.link=a}this.setState(n)},linkLoginToWixLinkSendEmailProperty:function(){var e=this.state.link;return{value:e?e.sendMail:"",requestChange:function(t){e.sendMail=t,e.metaData={schemaVersion:"2.0",isPreset:!0,isHidden:!1},this.setState({link:e})}.bind(this)}},save:function(e){e&&"ExternalLink"===e.type&&(e.url=function(e,t){return e&&!/^\s*\w+:\/\//.test(e)?t+"://"+e.trim():e}(e.url,"http")),this.props.callback&&this.props.callback(e),e&&function(e){var t="";"AnchorLink"===e.type&&(t=s.includes(["SCROLL_TO_BOTTOM","SCROLL_TO_TOP"],e.anchorDataId)?"SCROLL_TO_TOP"===e.anchorDataId?"top":"bottom":"anchor"),this.getEditorAPI().bi.event(a.bi.events.linkPanel.link_panel_done_click,{category:this.state.selectedTab,anchor_where_on_page:t})}.call(this,e)},cancel:function(){this.props.onCancelCallback&&this.props.onCancelCallback(this.props.link),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},done:function(){this.logLinkCreationBI(),this.setState({isClosing:!0})},getPageOptions:function(){return s.map(this.pagesList,s.bind(function(e){return{value:e.id,label:e.title+this.getCurrentPageThisTranslate(e.id)}},this))},linkToPage:function(){return{value:this.state.page.pageId,requestChange:function(e){r.isOpen("dpages")?this.setState({routerInnerRoutes:null,link:"PageLink"===this.state.selectedTab?this.getDefaultDataForPageLinkTab(e):this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(e),page:p(e,this.props.data.pages)}):this.setState({link:this.getDefaultDataForPageAnchorLinkTab(e),page:p(e,this.props.data.pages)})}.bind(this)}},getRouterInnerRoutes:function(e){var t="CURRENT_INNER_ROUTE"===e.link.innerRoute?this.props.data.currentPageId:e.page.id;this.getEditorAPI().documentServices.routers.getRouterInnerRoutes(e.link.routerId,t,function(t){var n=s.isEmpty(t)?[]:t[0].url;e.link.innerRoute&&(s.find(t,{url:e.link.innerRoute})||"CURRENT_INNER_ROUTE"===e.link.innerRoute)&&(n=e.link.innerRoute),s.isEmpty(t)?this.setState({routerInnerRoutes:s.isEmpty(t)?[]:t},function(){this.setIsValidLink()}.bind(this)):this.setState({routerInnerRoutes:s.isEmpty(t)?[]:t,link:{type:"DynamicPageLink",routerId:e.link.routerId,anchorDataId:e.link.anchorDataId,innerRoute:n}},function(){this.setIsValidLink()}.bind(this))}.bind(this))},isCollectionPageOrHasOneRoute:function(){var e=this.state.routerInnerRoutes;return!!e&&1===e.length},linkToInnerRoute:function(){return{value:this.state.link?this.state.link.innerRoute:null,requestChange:function(e){var t={type:"DynamicPageLink",routerId:this.state.link.routerId,innerRoute:e};this.state.link.anchorDataId&&(t.anchorDataId=this.state.link.anchorDataId),this.setState({link:t})}.bind(this)}},hasInnerRoutes:function(){return!!this.state.routerInnerRoutes&&!s.isEmpty(this.state.routerInnerRoutes)},getRouterDataForPageIfExist:function(e){return this.getEditorAPI().documentServices.routers.getRouterDataForPageIfExist(e)},isDynamicPage:function(e){return!!this.getRouterDataForPageIfExist(e)},shouldShowInnerRoutesDropDown:function(){return this.isDynamicPage(this.state.page.id)&&this.hasInnerRoutes()&&!this.isCollectionPageOrHasOneRoute()},getInnerRoutesDropDown:function(){var e=[];return this.state.page.id!==this.props.data.currentPageId||this.shouldHidePageLinkPossibilty()||e.push({url:"CURRENT_INNER_ROUTE",title:i.translate("Platform_Link_Menu_Anchor_Item_Option_Any_Item")}),this.state.routerInnerRoutes&&!s.isEmpty(this.state.routerInnerRoutes)?e.concat(this.state.routerInnerRoutes):[{value:"NO_INNER_ROUTES",title:i.translate("LINK_PANEL_NO_INNER_ROUTES")}]},getCurrentPageThisTranslate:function(e){return e==="#"+this.props.data.currentPageId?" "+i.translate("LINK_PANEL_PAGE_THIS"):""},getRouterTypeForPageId:function(e){var t=this.getEditorAPI().pages.dynamicPages.getRouterPageType(e);return t?"("+t+")":""},linkToAnchor:function(){return{value:(s.has(this.state.link,"anchorDataId.id")?"#"+this.state.link.anchorDataId.id:s.get(this.state.link,"anchorDataId"))||"SCROLL_TO_TOP",requestChange:function(e){var t=this.getAnchorLink(e),n={link:t.link};t.page&&(n.page=t.page),this.setState(n)}.bind(this)}},getAnchorLink:function(e){var t=this.getEditorAPI(),n={};if("TOP_OF_SELECTED_PAGE"===e){var a=this.state.page.pageId;n={link:r.isOpen("dpages")?this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(a):this.getDefaultDataForPageAnchorLinkTab(a),page:p(a,this.props.data.pages)}}else{var s=this.props.data.anchors,o=void 0;if(r.isOpen("dpages")&&this.state.link&&this.state.link.routerId)n={link:{type:"DynamicPageLink",anchorDataId:e,routerId:this.state.link.routerId,innerRoute:this.state.link.innerRoute}};else{var l={type:"AnchorLink",anchorDataId:e,pageId:this.state.page.pageId},c="#"+t.documentServices.siteSegments.getSiteStructureId();if(u(e))l.anchorName=i.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_TOP_NAME"),l.pageId=c;else if(d(e))l.anchorName=i.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_BOTTOM_NAME"),l.pageId=c;else for(o=0;o<s.length;o++){var m=s[o];if(m.anchorDataId===e){l.anchorName=m.anchorName;break}}n.link=l}}return n},cachePagesList:function(e,t){t=t||0;var n=0,a=[];return e.forEach(function(e){var i=e.link||{},o=e.items,l="PageLink"===i.type,r=s.has(i.pageId,"id")?i.pageId.id:i.pageId;if(!l||function(e,t){return p(e,t).repeaterPage}(r,this.props.data.pages)||m(i,this.props.data.popups))n=t;else{var c={id:r,type:i.type,title:e.label,level:t};n=t+1,a.push(c)}o&&o.length&&(a=a.concat(this.cachePagesList(o,n)))},this),a},getAnchorOptions:function(e,t){var n=[];return e.forEach(function(e){("#"===e.pageId.charAt(0)?e.pageId.substring(1):e.pageId)===t&&n.push(e)}),n.sort(function(e,t){return e.y-t.y}),n},documentChanged:function(e){var t=e[0];this.setState({link:{type:"DocumentLink",docId:t.fileName,name:t.title}})},isPDF:function(){return r.isOpen("indexablePDF")&&f.test(s.get(this.state,"link.docId")||"")},isMobileEditor:function(){return this.getEditorAPI().isMobileEditor()},pdfIndexableChanged:function(e){this.setState({link:s.defaults({indexable:e},this.state.link)})},isSectionVisible:function(e){var t=this.props.visibleSections;return!t||!1!==t[e]},shouldHidePageLinkPossibilty:function(){return this.props.hidePageLinks},hasAnchors:function(e){var t=e||this.state.page.id;return!!t&&(t="#"===t.charAt(0)?t.substring(1):t,0!==this.getAnchorOptions(this.props.data.anchors,t).length)},getPagesWithAnchors:function(){return s.filter(this.pagesList,s.bind(function(e){return this.hasAnchors(e.id)},this))},openLearnMoreOnAnchor:function(){var e={panel_name:this.props.panelName,origin:a.constants.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("4932c49c-7282-48f0-8fa2-42d929981c40",null,e)},openLearnMoreOnAddingInnerRoutes:function(){var e={panel_name:this.props.panelName,origin:a.constants.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("0a1de6d7-3f69-4d30-8ddc-7aa99bd12edc",null,e)},openLearnMoreOnPhoneLink:function(){var e={panel_name:this.props.panelName,origin:a.constants.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("269ee4ca-ac26-40a4-b982-b120e84c75d4",null,e)},getPagesListToShow:function(){if(this.shouldHidePageLinkPossibilty()){var e=this.getEditorAPI().documentServices.routers.pages.getDynamicPagesList(),t=s(e).flatMap("pages").map("id").value();return s.filter(this.pagesList,function(e){return s.includes(t,e.id.slice(1))})}return this.pagesList},shouldShowPageSection:function(){if(!this.shouldHidePageLinkPossibilty())return!0;var e=this.getEditorAPI().routers.pages.getDynamicPagesList(),t=s.flatMap(e,"pages");return!s.isEmpty(t)},getDropDownOptions:function(){var e=[];this.shouldHidePageLinkPossibilty()||r.isOpen("dpages")||e.push({value:"TOP_OF_SELECTED_PAGE",label:i.translate("LINK_PANEL_ANCHOR_TOP")});var t=this.getAnchorOptions(this.props.data.anchors,this.state.page.id);return t.length>0&&s.forEach(t,function(t){e.push({value:t.anchorDataId,label:t.anchorName})}),!this.shouldHidePageLinkPossibilty()||this.hasAnchors()||r.isOpen("dpages")||e.push({value:"none",label:i.translate("LINK_PANEL_NO_ANCHORS_LABEL")}),e},getPopupLinkOptions:function(){var e=s.clone(this.props.data.popups),t=this.getEditorAPI(),n=t.documentServices.pages.getFocusedPageId(),a=t.documentServices.pages.popupPages.isPopup(n);return!this.props.showAllPopups&&a&&s.remove(e,{id:n}),e},getAnchorTooltipValue:function(){return{classPath:"baseUI.popoverTemplates.imageAndTextTooltip",props:{image:"linkPanelAnchorTooltip",title:"Anchor_Settings_tooltip_title",text:"Anchor_Settings_tooltip_text",learnMoreText:"mobile_refreshlayout_link",linkAction:this.openLearnMoreOnAnchor,imageContainerStyle:{backgroundColor:"#5fcef5"}}}},isOkDisabled:function(){return!this.state.isValid},getAnchorType:function(e){switch(e){case"SCROLL_TO_TOP":return"page-top";case"SCROLL_TO_BOTTOM":return"page-bottom";default:return"anchor"}},logLinkCreationBI:function(){var e=this.state.link;if(e){var t={site_id:this.getEditorAPI().documentServices.generalInfo.getSiteId(),component_type:s.get(this.props,"bi.selectedComponentType","")};switch(e&&e.type){case"PageLink":s.assign(t,{field_type:"page",data:""});break;case"AnchorLink":s.assign(t,{field_type:this.getAnchorType(e.anchorDataId),data:""});break;case"ExternalLink":s.assign(t,{field_type:"url",data:e.url});break;case"EmailLink":s.assign(t,{field_type:"mail",data:e.recipient});break;case"PhoneLink":s.assign(t,{field_type:"phone",data:e.phoneNumber});break;case"DocumentLink":s.assign(t,{field_type:"document",data:""});break;default:return}this.getEditorAPI().bi.event(a.bi.events.linkPanel.LINK_PANEL_ADD_CLICK_TO_ACTION,t)}},getEdgeAnchors:function(){return[{title:"LINK_PANEL_TAB_TOPandBOTTOM_ TOP",value:"SCROLL_TO_TOP",symbolName:"anchorTop"},{title:"LINK_PANEL_TAB_TOPandBOTTOM_ BOTTOM",value:"SCROLL_TO_BOTTOM",symbolName:"anchorBottom"}]},isEmptyStringOrFullUrl:function(e){return""===e||i.validate.fullUrl(e)},goToAddPanelPopup:function(){var e=this.getEditorAPI();e.getUserPreferences().session.set("addPanelCategoryIdOnClose","popup"),e.store.dispatch(o.leftBar.logic.openAddPanel())},getHelpId:function(){return this.getEditorAPI().developerMode.isEnabled()?"049671da-19be-4453-8f1e-a53d949a0110":"650e4ba4-4aa8-4484-957a-cc9db36be6d9"}})}),define("panels/toolPanels/colorPicker/constants",[],function(){"use strict";return{NO_COLOR:"noColor"}}),define("panels/toolPanels/colorPicker/siteCustomColors.rt",["react","lodash","baseUI","panels/toolPanels/colorPicker/constants"],function(e,t,n,a){"use strict";return function(){function a(){var a=this.getValueFromProps();return e.createElement.apply(this,["div",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"site-custom-colors"},this.filteredProps()),this.props.isEditable?e.createElement("label",{key:"addColorButton",ref:"addColorButton",className:"color-option first-color-in-row"},e.createElement("div",{className:"add-color-button",onClick:this.addCustomColor},e.createElement(n.symbol,{name:"add-custom-color-plus"}))):null,t.map(this.getFilteredColors(),function(n,a,s){return e.createElement("label",{className:"color-option",key:"colorOption-"+s,onMouseEnter:function(e,t,n){this.props.onPreview(t)}.bind(this,n,a,s),onMouseLeave:function(e,t,n){this.props.onPreview(e)}.bind(this,n,a,s)},e.createElement("input",{type:"radio",name:this.getRadioGroupId(),value:a,checked:s===this.state.selectedIndex,onChange:function(e,t,n){this.selectColor(t,n)}.bind(this,n,a,s)}),e.createElement("div",{className:t(this.getColorOptionClasses(a)).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),style:{backgroundColor:a}}))}.bind(this,a)),t.isEmpty(this.getFilteredColors())?t.map(t.range(this.NUM_OF_EMPTY_SLOTS),function(t,n,a){return e.createElement("div",{key:"emptyColorOptions",className:"empty-color-option"})}.bind(this,a)):null])}return a.apply(this,[])}}),define("panels/toolPanels/colorPicker/siteCustomColors",["create-react-class","prop-types","lodash","core","util","baseUI","panels/toolPanels/colorPicker/siteCustomColors.rt"],function(e,t,n,a,s,i,o){"use strict";function l(e){return e.get(a.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED)||[]}var r=["#000000","#FFFFFF"];return e({displayName:"siteCustomColors",mixins:[a.mixins.editorAPIMixin,i.radioButtonsMixin],propTypes:{customColors:t.arrayOf(t.string).isRequired,sessionStorage:t.object,isEditable:t.bool,onPreview:t.func,openAddColorPanel:t.func},NUM_OF_EMPTY_SLOTS:36,getInitialState:function(){return{selectedIndex:this.getSelectedColorIndex(this.getValueFromProps(),l(this.props.sessionStorage))}},getFilteredColors:function(e){e=e||l(this.props.sessionStorage);var t=n.difference(this.props.customColors,r,e);return r.concat(e,t)},selectColor:function(e,t){this.getEditorAPI().bi.event(a.bi.events.colorPicker.CUSTOM_COLOR_SELECT,{}),this.setState({selectedIndex:t},this.callOnChangeIfExists(e))},getSelectedColorIndex:function(e,t){return this.getFilteredColors(t||l(this.props.sessionStorage)).indexOf(e)},getColorBrightnessClass:function(e){var t=s.colors.hexToRgb(e),n=s.colors.rgbToHsb(t);return n.brightness>=80&&n.saturation<50?"bright":"dark"},getColorOptionClasses:function(e){var t={"color-displayer":!0,"white-option":s.colors.getDistanceToWhite(e)<3};return t[this.getColorBrightnessClass(e)+"-color"]=!0,t},componentWillReceiveProps:function(e){var t=this.getValueFromProps(),n=this.getValueFromProps(e);t!==n&&this.setState({selectedIndex:this.getSelectedColorIndex(n)})},addCustomColor:function(){this.getEditorAPI().bi.event(a.bi.events.colorPicker.ADD_COLOR_BUTTON_CLICKED,{}),this.props.openAddColorPanel()},render:o})}),define("panels/toolPanels/colorPicker/colorPickerPanel.rt",["react","lodash","util","baseUI","baseUILib","panels/frames/toolPanelFrame","panels/toolPanels/colorPicker/siteCustomColors","symbols"],function(e,t,n,a,s,i,o,l){"use strict";return function(){return e.createElement(i,{ref:"frame",panelName:this.props.panelName,isSingleInstance:!0,onContentElementReady:this.cacheContentElement,className:"color-picker-panel",isBlockingLayerFullScreen:this.props.isBlockingLayerFullScreen,shouldBlockOuterScroll:this.props.shouldBlockOuterScroll,top:this.props.top,left:this.props.left,contentClass:"color-picker-panel-content-wrapper"},e.createElement("div",{className:"main-content"},e.createElement("div",{className:"panel-section color-picker-header",onMouseDown:function(e){this.startDrag(e,this.getDragLimits(this.contentElement),this.contentElement)}.bind(this)},e.createElement("div",{className:"color-picker-header-content"},e.createElement("span",{key:"color-picker-title"},"\n                    ",n.translate("ColorPicker_MainPanel_Header"),"\n                ")),e.createElement("span",{className:"close-panel-button",onClick:this.close},e.createElement(l.symbol,{name:"headerCloseButton"}))),this.state.content===this.Content.CHOOSE_COLOR?e.createElement("div",{key:"color-picker-content-color",className:"choose-color-content"},e.createElement("div",{className:"panel-section site-colors-section"},e.createElement("div",{className:"section-left"},n.translate("ColorPicker_MainPanel_SitePalette")),e.createElement("div",{className:"section-gap"}),this.isPaletteChangeAllowed()?e.createElement("div",{key:"color-picker-edit-palette-button",className:"section-right"},e.createElement("a",{onClick:this.switchContent.bind(this,this.Content.CHANGE_PALETTE)},"\n                        ",n.translate("ColorPicker_MainPanel_ChangeSiteColors"),"\n                    ")):null),e.createElement(a.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:!0,onPreview:this.previewColor,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}}),e.createElement("div",{className:"panel-section custom-colors-title-section"},"\n                ",n.translate("ColorPicker_MainPanel_MoreColors"),"\n            "),e.createElement(s.CustomScroll,{},e.createElement(o,{className:"custom-colors-section",customColors:this.siteCustomColors,isEditable:!0,onPreview:this.previewColor,paletteColors:this.state.paletteColors,sessionStorage:this.props.sessionStorage,openAddColorPanel:this.openAddColorPanel,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}})),e.createElement("div",{className:"panel-section footer"},e.createElement("div",{className:"section-left"},e.createElement("span",{},"+"),e.createElement("a",{onClick:this.addColorLinkClicked},"\n                        ",n.translate("ColorPicker_MainPanel_AddColor"),"\n                    ")),e.createElement("div",{className:"section-right"},"\n                    ",this.isThemeColor(this.state.colorToPreview)?this.getPaletteColors()[this.state.colorToPreview]:this.state.colorToPreview,"\n                "))):null,this.state.content===this.Content.CHANGE_PALETTE?e.createElement("div",{key:"color-picker-content-palettes",className:"content-change-palette"},e.createElement("div",{className:"panel-section change-palette-section"},n.translate("ColorPicker_ChangeEditPalette_Title"),"\n            "),e.createElement(a.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:!0,valueLink:{value:null,requestChange:this.openChangePaletteColor}}),e.createElement.apply(this,["div",{className:"root-colors-wrapper"},t.map(this.getRootColors(),function(n,a){return e.createElement("div",{className:t(this.getRootColorBoxClasses(n)).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),key:"rootColor-"+a},e.createElement("div",{className:"root-color-arrow",style:{borderBottomColor:n}}),e.createElement("div",{className:"root-color-circle",style:{backgroundColor:n},onClick:function(e,t){this.openChooseRootColorPanel(e,t)}.bind(this,n,a)},e.createElement(l.symbol,{name:"recycle"+this.getColorBrightness(n)})))}.bind(this))]),e.createElement("div",{className:"help-text"},e.createElement("span",{},n.translate("ColorPicker_ChangeEditPalette_HelpText")),e.createElement("a",{onClick:function(){this.openHelpCenter(this.EDIT_PALETTE_LEARN_MORE_HELP_ID)}.bind(this)},n.translate("ColorPicker_ChangeEditPalette_LearnMore"))),e.createElement("div",{className:"footer"},e.createElement(a.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ChangeEditPalette_CancelButton",onClick:this.handleCancelEditingPaletteClicked}),e.createElement(a.button,{className:"confirm-button btn-md",label:"ColorPicker_ChangeEditPalette_DoneButton",onClick:this.handleDoneEditingPaletteClicked}))):null),this.state.content===this.Content.CHANGE_PALETTE?e.createElement("div",{className:"secondary-content palette-list-section",key:"colorPickerPaletteListSection"},e.createElement("div",{className:"palette-list-title"},n.translate("ColorPicker_ChangeEditPalette_PalettesStrip")),e.createElement("div",{className:"palette-list-comp-wrapper"},e.createElement(s.CustomScroll,{heightRelativeToParent:"100%"},e.createElement(a.palettesList,{palettes:this.getPaletteList(),valueLink:{value:this.state.selectedPalette,requestChange:this.setSelectedPalette},onPreview:this.handlePaletteListPreview,className:"change-palette-palette-list"})))):null)}}),define("panels/toolPanels/colorPicker/colorPickerPanel",["create-react-class","prop-types","lodash","jquery","core","util","higherOrderComponents","panels/toolPanels/colorPicker/constants","panels/mixins/limitInitialPositionToStageMixin","panels/mixins/panelDragLimitsMixin","panels/toolPanels/colorPicker/colorPickerPanel.rt","experiment"],function(e,t,n,a,s,i,o,l,r,c,p,u){"use strict";function d(e){return e?(0===e.indexOf("{color")&&(e=e.replace("{","").replace("}","")),"transparent"===e?l.NO_COLOR:0!==e.indexOf("#")&&0!==e.indexOf("color")&&e!==l.NO_COLOR?0===e.indexOf("r")?e:"rgba("+e+")":e):null}function m(e){return{top:e.top-a(window.document).scrollTop()+15+"px",left:e.left-a(window.document).scrollLeft()+204+"px"}}var h={color_13:["color_11","color_12","color_13","color_14","color_15"],color_18:["color_16","color_17","color_18","color_19","color_20"],color_23:["color_21","color_22","color_23","color_24","color_25"],color_28:["color_26","color_27","color_28","color_29","color_30"],color_33:["color_31","color_32","color_33","color_34","color_35"]},g=e({displayName:"colorPickerPanel",mixins:[s.mixins.editorAPIMixin,i.valueLinkMixin,i.draggableMixin,r,c],propTypes:{customInstanceColors:t.array,displayNoColor:t.bool,sessionStorage:t.object,previewOnHover:t.bool,enableHistory:t.bool,palettePresets:t.array,updateSitePalette:t.func,top:t.oneOfType([t.string,t.number]),left:t.oneOfType([t.string,t.number]),isBlockingLayerFullScreen:t.bool,shouldBlockOuterScroll:t.bool},Content:{CHOOSE_COLOR:"CHOOSE_COLOR",CHANGE_PALETTE:"CHANGE_PALETTE"},getDefaultProps:function(){return{previewOnHover:!0}},componentWillReceiveProps:function(){this.setState({paletteColors:this.getEditorAPI().theme.colors.getAll()})},getPaletteColors:function(){var e=this.state.paletteColors;return n.omit(e,"paletteName","paletteTags")},getColorFromProps:function(){return d(this.getValueFromProps())},getInitialState:function(){var e=this.getColorInHex(this.getColorFromProps()),t={selectedColor:e,colorToPreview:e,selectedPalette:this.getEditorAPI().theme.colors.getAll(),content:this.Content.CHOOSE_COLOR};return this.initialPalette=t.selectedPalette,this.siteCustomColors=this.getCustomColorsInOrderAndSaveOrder(),t},getCustomColorsInOrderAndSaveOrder:function(){var e=this.props.sessionStorage,t=e.get(s.constants.USER_PREFS.THEME.COLORS.CUSTOM.COMPS_ADDED),a=e.get(s.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED),i=void 0;if(t){var o=n.intersection(t,a),l=n.difference(a,t);i=o.concat(l)}else i=a;return e.set(s.constants.USER_PREFS.THEME.COLORS.CUSTOM.COMPS_ADDED,i),i.concat(n.difference(this.props.customInstanceColors,i))},getColorBrightness:function(e){var t=i.colors.hexToRgb(e),n=i.colors.rgbToHsb(t);return n.brightness>=80&&n.saturation<50?"Dark":"Bright"},isThemeColor:function(e){return n.includes(e,"color_")},isPaletteChangeAllowed:function(){return this.props.palettePresets&&!this.getEditorAPI().isMobileEditor()},getColorInHex:function(e){var t=i.colors.rgbToHex;return e=d(e),n.includes(e,"rgba")?t(i.colors.rgbaStringToObject(e)):n.includes(e,"rgb")?t(i.colors.rgbStringToObject(e)):e},getColorInOriginalFormat:function(e){var t=this.getColorFromProps();t=d(t);var a=i.colors.hexToRgb;if(e===l.NO_COLOR)return e;var s=this.isThemeColor(e)?this.getPaletteColors()[e]:e;if(n.includes(t,"rgba")){var o=a(s);return o.alpha=i.colors.rgbaStringToObject(t).alpha,i.colors.rgbaObjectToString(o)}return n.includes(t,"rgb")?i.colors.rgbObjectToString(a(s)):e},areColorsEqual:function(e,t){return n.includes(e,"color")&&n.includes(t,"color")?e===t:this.getColorInHex(e)===this.getColorInHex(t)},EDIT_PALETTE_LEARN_MORE_HELP_ID:"7b56b01e-1104-485d-8bcc-9690f8c9592a",getRootColors:function(){return n.pick(this.getPaletteColors(),n.keys(h))},getRootColorBoxClasses:function(e){return{"root-color-box":!0,"white-color":i.colors.getDistanceToWhite(e)<3}},getPaletteList:function(){return n.map(this.props.palettePresets,function(e){return n.omit(e,"paletteName","paletteTags")})},openChangePaletteColor:function(e){var t=this,s=m(a(this.contentElement).offset()),i={valueLink:{value:this.getPaletteColors()[e],requestChange:function(a){var s=n.clone(t.state.selectedPalette);s[e]=a,t.setSelectedPalette(s)}},siteCustomColors:this.siteCustomColors,paletteColors:this.state.paletteColors,sessionStorage:this.props.sessionStorage,top:s.top,left:s.left,onPreview:function(a){var s=n.clone(t.state.selectedPalette);s[e]=a,t.setPaletteToDocument(s)},onCancel:this.setPaletteToDocument.bind(this,n.clone(this.state.selectedPalette))};this.getEditorAPI().panelManager.openPanel("panels.toolPanels.colorPicker.addColorPanel",i,!0)},selectColor:function(e,t){if(e!==this.state.selectedColor){var n=this;this.setState({selectedColor:e},function(){n.handleChange(e),n.addColorHistoryEntryIfNeeded()})}else t&&this.close()},previewColor:function(e){u.isOpen("colorPickerChangeColorOnClickExp")||(this.isMounted()&&this.setState({colorToPreview:e}),this.props.previewOnHover&&this.handleChange(e,!0))},handleChange:function(e,t){this.callOnChangeIfExists(this.getColorInOriginalFormat(e),t)},setSelectedPalette:function(e){this.isMounted()?this.setState({selectedPalette:e},this.setPaletteToDocument.bind(this,e)):this.setPaletteToDocument(e)},setPaletteToDocument:function(e){this.props.updateSitePalette(e)},computeNewPaletteFromRootColor:function(e,t){var a=this.getPaletteColors(),s=i.colors.createGradientColorsFromRoot(t,a,h[e]);return n.assign(a,s)},setSelectedPaletteFromRootColor:function(e,t){var n=this.computeNewPaletteFromRootColor(e,t);this.isMounted()?this.setState({selectedPalette:n},this.setPaletteToDocument.bind(this,n)):this.setPaletteToDocument(n)},setPaletteToDocumentFromRootColor:function(e,t){var n=this.computeNewPaletteFromRootColor(e,t);this.setPaletteToDocument(n)},addCustomColor:function(e){var t=n.cloneDeep(this.props.sessionStorage.get(s.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED));t.unshift(e),this.props.sessionStorage.set(s.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED,t),this.selectColor(e)},openAddColorPanel:function(){var e=function(e){return{top:e.top-a(window.document).scrollTop()+115+"px",left:e.left+a(window.document).scrollLeft()+48+"px"}}(a(this.contentElement).offset());this.getEditorAPI().panelManager.openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:this.state.selectedColor,requestChange:this.addCustomColor},paletteColors:this.state.paletteColors,onPreview:n.debounce(this.previewColor,100),top:e.top,left:e.left,onCancel:this.previewColor.bind(this,this.state.selectedColor)},!0)},addColorLinkClicked:function(){this.getEditorAPI().bi.event(s.bi.events.colorPicker.ADD_COLOR_LINK_CLICKED,{}),this.openAddColorPanel()},openChooseRootColorPanel:function(e,t){var s=m(a(this.contentElement).offset());this.getEditorAPI().panelManager.openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:e,requestChange:this.setSelectedPaletteFromRootColor.bind(this,t)},siteCustomColors:this.siteCustomColors,paletteColors:this.state.paletteColors,sessionStorage:this.props.sessionStorage,top:s.top,left:s.left,onPreview:n.debounce(this.setPaletteToDocumentFromRootColor.bind(this,t),100),onCancel:this.setPaletteToDocument.bind(this,n.clone(this.state.selectedPalette))},!0)},handlePaletteListPreview:function(e){u.isOpen("colorPickerChangePaletteOnClickExp")||this.setPaletteToDocument(e)},handleDoneEditingPaletteClicked:function(){this.addPaletteHistoryEntryIfNeeded(),this.initialPalette=this.state.selectedPalette,this.setPaletteToDocument(this.state.selectedPalette),this.close()},handleCancelEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette),this.setSelectedPalette(this.initialPalette),this.switchContent(this.Content.CHOOSE_COLOR)},handleBackEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette),this.switchContent(this.Content.CHOOSE_COLOR)},arePalettesEqual:function(e,t){var a=n.intersection(n.keys(e),n.keys(t));return n.isEqual(n.pick(e,a),n.pick(t,a))},addPaletteHistoryEntryIfNeeded:function(){this.props.enableHistory&&(this.arePalettesEqual(this.state.selectedPalette,this.initialPalette)||this.getEditorAPI().history.add("palette colors updated"))},addColorHistoryEntryIfNeeded:function(){this.props.enableHistory&&(this.areColorsEqual(this.state.selectedColor,this.getColorFromProps())||this.getEditorAPI().history.add("new color chosen - "+this.state.selectedColor))},switchContent:function(e){e===this.Content.CHANGE_PALETTE&&this.getEditorAPI().bi.event(s.bi.events.colorPicker.CHANGE_SITE_COLORS_LINK_CLICKED,{}),this.setState({content:e})},resetPaletteIfPanelClosedWithoutPaletteConfirmation:function(){this.state.content===this.Content.CHANGE_PALETTE&&this.setPaletteToDocument(this.initialPalette)},resetPreviewColor:function(){this.state.colorToPreview!==this.state.selectedColor&&this.previewColor(this.state.selectedColor)},adjustPanelPosition:function(){var e=a(this.contentElement),t=e.offset(),n=s.utils.stageUtils.getStageLayout(),i=t.left,o=n.right-424,l=t.top,r=a(window.document).scrollTop()+(n.bottom-e.height());e.offset({top:Math.min(l,r),left:Math.min(i,o)})},componentDidUpdate:function(e,t){if(this.state.content===this.Content.CHANGE_PALETTE&&this.props.top!==e.top||this.props.left!==e.left){var n=m(a(this.contentElement).offset());this.getEditorAPI().panelManager.updatePanelProps("panels.toolPanels.colorPicker.addColorPanel",{top:n.top,left:n.left})}this.state.content===this.Content.CHANGE_PALETTE&&t.content!==this.state.content&&this.adjustPanelPosition()},componentWillUnmount:function(){this.props.onClose&&this.props.onClose(),this.resetPaletteIfPanelClosedWithoutPaletteConfirmation(),this.resetPreviewColor()},close:function(){this.state.content===this.Content.CHOOSE_COLOR?this.getEditorAPI().bi.event(s.bi.events.colorPicker.MAIN_PANEL_CLOSED,{}):this.state.content===this.Content.CHANGE_PALETTE&&this.getEditorAPI().bi.event(s.bi.events.colorPicker.CHANGE_SITE_COLOR_CLOSED,{}),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},cacheContentElement:function(e){this.contentElement=e},openHelpCenter:function(e){var t={component:this.getEditorAPI().selection.getSelectedComponentType(),learn_more:!0,origin:s.constants.BI.HELP.ORIGIN.PANEL,panel_name:this.props.panelName};this.getEditorAPI().panelManager.openHelpCenter(e,null,t)},render:p}),f=o.reportBiEventOnUiChange(g);return f.pure=g,f}),define("panels/toolPanels/colorPicker/addColorContent.rt",["react","lodash","util","baseUI","baseUILib","panels/toolPanels/colorPicker/siteCustomColors"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",{className:"add-color-content"},e.createElement("div",{},e.createElement(a.colorSpace,{value:this.state.selectedColor,onChange:this.onHsbColorChanged})),e.createElement("div",{className:"color-indicator"},e.createElement("span",{className:"color-sample initial-color",onMouseDown:this.resetToInitialColor,style:{backgroundColor:this.resolveColor(this.initialColor)}}),e.createElement("span",{className:"color-sample current-color",style:{backgroundColor:n.colors.hsbToHex(this.state.selectedColor)}})),e.createElement("div",{className:"color-format"},e.createElement(a.colorFormat,{value:this.state.selectedColor,onChange:this.onHsbColorChanged,onChangeInValidationStatus:this.onChangeInValidationStatus})),this.props.siteCustomColors?e.createElement("div",{key:"addColorCustomColorsSeperator",className:"custom-colors-separator"}):null,this.props.siteCustomColors?e.createElement("div",{key:"customColorsSectionTitle",className:"custom-colors-section-title"},"\n        ",n.translate("ColorPicker_MainPanel_MoreColors"),"\n    "):null,e.createElement(s.CustomScroll,{},this.props.siteCustomColors?e.createElement("div",{key:"customColorsSection",className:"custom-colors-section"},e.createElement(i,{className:"custom-colors",onPreview:this.previewColor,customColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,sessionStorage:this.props.sessionStorage,value:n.colors.hsbToHex(this.state.selectedColor),onChange:this.onCustomColorSelected})):null),e.createElement("div",{className:"footer"},e.createElement(a.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ColorSpace_CancelButton",onClick:this.handleCancel}),e.createElement(a.button,{className:"confirm-button btn-md",label:"ColorPicker_ColorSpace_AddButton",onClick:this.callOnChangeAndClose,disabled:!this.state.isValid})))}}),define("panels/toolPanels/colorPicker/addColorContent",["create-react-class","prop-types","lodash","util","panels/toolPanels/colorPicker/constants","panels/toolPanels/colorPicker/addColorContent.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"addColorContent",propTypes:{valueLink:t.shape({value:t.string,requestChange:t.func}).isRequired,paletteColors:t.object.isRequired,closeHandler:t.func.isRequired,onPreview:t.func.isRequired,onCancel:t.func.isRequired,sessionStorage:t.object,siteCustomColors:t.arrayOf(t.string)},mixins:[a.valueLinkMixin],getInitialState:function(){this.initialColor=this.getValueFromProps();var e=this.resolveColor(this.initialColor);return{selectedColor:a.colors.hexToHsbExact(e),isValid:!0}},resolveColor:function(e){return n.includes(e,"color")?this.props.paletteColors[e]:e&&e!==s.NO_COLOR?e:"#ffffff"},onHsbColorChanged:function(e){this.setState({selectedColor:e},function(){var t=a.colors.hsbToHex(e);this.props.onPreview(t)})},onCustomColorSelected:function(e){this.setState({selectedColor:a.colors.hexToHsbExact(e)},function(){this.props.onPreview(e)})},resetToInitialColor:function(){var e=this.resolveColor(this.initialColor);this.setState({selectedColor:a.colors.hexToHsbExact(e)},function(){this.props.onPreview(this.initialColor)})},previewColor:function(e){this.props.onPreview(e)},componentWillUnmount:function(){this.wasConfirmClicked||this.props.onCancel()},callOnChangeAndClose:function(){this.callOnChangeIfExists(a.colors.hsbToHex(this.state.selectedColor)),this.wasConfirmClicked=!0,this.close()},onChangeInValidationStatus:function(e){this.isMounted()&&this.setState({isValid:e})},handleCancel:function(){this.props.onCancel(),this.close()},close:function(){this.props.closeHandler()},render:i})}),define("panels/toolPanels/colorPicker/addColorPanel.rt",["react","lodash","panels/frames/toolPanelFrame","util","panels/toolPanels/colorPicker/addColorContent"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",onContentElementReady:this.cacheContentElement,className:"custom-color-picker-panel",panelName:this.props.panelName,title:this.props.title,top:this.props.top,left:this.props.left},e.createElement(s,{siteCustomColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,sessionStorage:this.props.sessionStorage,valueLink:this.props.valueLink,onPreview:this.props.onPreview,onCancel:this.props.onCancel,closeHandler:this.close}))}}),define("panels/toolPanels/colorPicker/addColorPanel",["create-react-class","prop-types","lodash","core","panels/mixins/limitInitialPositionToStageMixin","panels/toolPanels/colorPicker/addColorPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"addColorPanel",mixins:[a.mixins.editorAPIMixin,s],propTypes:{valueLink:t.shape({value:t.string,requestChange:t.func}).isRequired,paletteColors:t.object.isRequired,sessionStorage:t.object,top:t.string,left:t.string,onPreview:t.func.isRequired,onCancel:t.func.isRequired,siteCustomColors:t.arrayOf(t.string)},close:function(){this.getEditorAPI().bi.event(a.bi.events.colorPicker.ADD_COLOR_PANEL_CLOSED,{}),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},cacheContentElement:function(e){this.contentElement=e},render:i})}),define("panels/toolPanels/colorPicker/colorPicker",["panels/toolPanels/colorPicker/colorPickerPanel","panels/toolPanels/colorPicker/addColorPanel","panels/toolPanels/colorPicker/addColorContent"],function(e,t,n){"use strict";return{colorPickerPanel:e,addColorPanel:t,addColorContent:n}}),define("panels/toolPanels/iconPicker/iconPickerPanelSimple.rt",["react","lodash","util","baseUI","baseUILib","panels/frames/toolPanelFrame","symbols"],function(e,t,n,a,s,i,o){"use strict";return function(){function a(t,n,a){return function(t,n){var a=this.props.getCurrentIcon();return e.createElement(o.symbol,{className:"icon-picker-selection"+(a===t.value?" icon-current":""),onClick:function(e,t,n){this.props.onChange(e.value)}.bind(this,t,n,a),key:"icon"+t.value,ref:"icon"+t.value,name:t.symbolName})}.apply(this,[t,n])}return e.createElement(i,{ref:"frame",onContentElementReady:this.cacheContentElement,panelName:"iconPickerPanel",isSingleInstance:!0,className:"icon",isBlockingLayerFullScreen:!1,shouldBlockOuterScroll:!1,top:this.props.top,left:this.props.left,contentClass:"icon-picker-panel-content-wrapper"},e.createElement("div",{className:"main-content"},e.createElement("div",{className:"panel-section icon-picker-header",onMouseDown:function(e){this.startDrag(e,this.getDragLimits(this.contentElement),this.contentElement)}.bind(this)},e.createElement("div",{className:"icon-picker-header-content"},e.createElement("div",{className:"icon-picker-title",key:"icon-picker-title"},n.translate("mobile_quick_actions_choose_icon_title")),e.createElement("div",{className:"icon-picker-panel-close-button",onClick:this.close},e.createElement(o.symbol,{name:"headerCloseButton"})))),e.createElement(s.Divider,{long:!0}),e.createElement(s.CustomScroll,{},e.createElement.apply(this,["section",{className:"panel-section icon-picker-body"},t.map(this.props.options,a.bind(this))])),e.createElement(s.Divider,{long:!0}),e.createElement(s.Composites.ButtonMedium,{},e.createElement(s.Button,{className:"btn-md",onClick:this.close},e.createElement("span",{},n.translate("mobile_quick_actions_choose_icon_done_button_label"))))))}}),define("panels/toolPanels/iconPicker/iconPickerPanelSimple",["lodash","create-react-class","prop-types","util","panels/mixins/panelDragLimitsMixin","panels/toolPanels/iconPicker/iconPickerPanelSimple.rt"],function(e,t,n,a,s,i){"use strict";return t({displayName:"iconPickerPanel",mixins:[a.draggableMixin,s],propTypes:{top:n.number.isRequired,left:n.number.isRequired,getCurrentIcon:n.func.isRequired,options:n.array.isRequired,onChange:n.func.isRequired},close:function(){this.props.closePanelByName(this.props.panelName)},cacheContentElement:function(e){this.contentElement=e},render:i})}),define("panels/toolPanels/iconPicker/iconPickerPanel",["higherOrderComponents","panels/toolPanels/iconPicker/iconPickerPanelSimple"],function(e,t){"use strict";return e.connectEditorAPI(function(e){return{closePanelByName:e.panelManager.closePanelByName}})(t)}),define("panels/toolPanels/languageSupport/languageSupport.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement.apply(this,[n,{panelName:this.props.panelName,headerTitle:this.translateIfNeeded("add_languages_header_label"),isSingleInstance:!0,helpId:"147f770b-8d82-48b9-aea8-2f07d94c0743",ref:"frame",className:"language-support-panel",top:this.props.top,left:this.props.left,contentClass:"language-support-panel-content-wrapper"},e.createElement("div",{className:"label"},this.translateIfNeeded("add_languages_text")),t.map(this.state.charsItems,function(n,i){return e.createElement("div",{className:t({"language-option":!0,disabled:n.disabled}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),key:n.label},e.createElement(a.tooltip,{value:n.tooltip,disabled:!n.tooltip,styleType:a.uiConstants.TOOLTIP.STYLE_TYPE.SMALL},e.createElement(s.Checkbox,{label:n.label,disabled:n.disabled,value:n.value,onChange:function(e,t,n){this.update(t,n)}.bind(this,n,i),labelAfterSymbol:!0})),n.disabled?null:e.createElement("span",{className:"example-img",key:"example-img"},e.createElement("span",{style:n.style})))}.bind(this)),e.createElement("footer",{},e.createElement("div",{className:"copy-right-text"},e.createElement("span",{},this.translateIfNeeded("add_languages_copyright_text"),e.createElement("a",{className:"copy-right-link",onClick:this.openCopyright},this.translateIfNeeded("add_languages_copyright_text_link")))),e.createElement(a.button,{label:"add_languages_save_button",onClick:this.setLanguages,className:"btn-confirm-primary"}))])}}),define("panels/toolPanels/languageSupport/languageSupport",["create-react-class","lodash","core","util","higherOrderComponents","panels/toolPanels/languageSupport/languageSupport.rt"],function(e,t,n,a,s,i){"use strict";var o=[{characterSet:"latin",position:"0px 0px",label:"add_languages_english",tooltip:"add_languages_english_tooltip",disabled:!0},{characterSet:"latin-ext",position:"-15px -46px",label:"add_languages_eastern_european",tooltip:"add_languages_eastern_european_tooltip"},{characterSet:"cyrillic",position:"-15px -19px",label:"add_languages_cyrillic",tooltip:"add_languages_cyrillic_tooltip"},{characterSet:"japanese",position:"-15px -123px",label:"add_languages_japanese"},{characterSet:"korean",position:"-15px -96px",label:"add_languages_korean"},{characterSet:"arabic",position:"-15px -150px",label:"add_languages_arabic"},{characterSet:"hebrew",position:"-15px -70px",label:"add_languages_hebrew"}],l=e({displayName:"languageSupport",mixins:[a.translationMixin,n.mixins.editorAPIMixin],render:i,getBackground:function(){return"url("+a.media.getMediaUrl("textEditor/langs.v1.png")+")"},getInitialState:function(){return{charsItems:this.getCharacterSetsArray()}},setLanguages:function(){this.getEditorAPI().bi.event(n.bi.events.textControls.text_languages_support_dialog_save_click);var e=[];t.forEach(this.state.charsItems,function(t){t.value&&e.push(t.characterSet)}),this.getEditorAPI().documentServices.theme.fonts.updateCharacterSet(e),this.close()},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},update:function(e,n){var a=t.clone(this.state.charsItems),s=t.clone(a[e]);s.value=n,a[e]=s,this.setState({charsItems:a})},getCharactersSets:function(){return this.getEditorAPI().documentServices.theme.fonts.getCharacterSet()},openHelpPanelFrame:function(){this.getEditorAPI().bi.event(n.bi.events.textControls.text_languages_support_learn_more_click),this.getEditorAPI().panelManager.openHelpCenter("147f770b-8d82-48b9-aea8-2f07d94c0743",{},{panel_name:"languageSupport",origin:"languageSupport"})},getCharacterSetsArray:function(){var e=o,n=[],a=this.getCharactersSets(),s=this.getBackground();return t.forEach(e,function(e){var i={label:e.label,characterSet:e.characterSet,tooltip:e.tooltip,value:t.includes(a,e.characterSet),disabled:e.disabled,style:{backgroundImage:s,backgroundPosition:e.position,height:"18px",width:"72px",display:"inline-block"}};n.push(i)}),n},openCopyright:function(){var e=a.translate("add_languages_copyright_link");window&&window.open(e,"_blank")}}),r=s.reportBiEventOnUiChange(l);return r.pure=l,r}),define("panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","util"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{ref:"frame",headerTitle:i.translate("mobile_action_bar_social_title"),panelName:this.props.panelName,isSingleInstance:!0,className:"actionbar-sub-panel",isBlockingLayerFullScreen:this.props.isBlockingLayerFullScreen,shouldBlockOuterScroll:this.props.shouldBlockOuterScroll,top:this.props.top,left:this.props.left,contentClass:"actionbar-sub-panel-content-wrapper"},e.createElement(s.CustomScroll,{ref:"customScroll",heightRelativeToParent:"100%",addScrolledClass:!0},e.createElement.apply(this,["ul",{},t.map(this.getSocialLinks(),function(t,n){return e.createElement("li",{key:t.id,className:"social-link-item"},e.createElement(a.tooltip,{value:this.getSocialLinkTooltip(t.id)},e.createElement("span",{},e.createElement(a.symbol,{className:t.symbol+" symbol",name:t.symbol}))),e.createElement(a.textInput,{validator:this.validateUrlWithEmptyState,invalidMessage:"mobile_action_bar_social_error_message",placeholder:this.getSocialLinkPlaceholder(t.id),valueLink:this.getValueLink(t.id)}))}.bind(this))])))}}),define("panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel",["create-react-class","lodash","core","util","panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"mobileActionBarSubPanel",mixins:[n.mixins.editorAPIMixin],render:s,getSocialLinks:function(){return[{id:"blogger",symbol:"mba_social_panel_google_blogger"},{id:"facebook",symbol:"mba_social_panel_facebook"},{id:"flickr",symbol:"mba_social_panel_youtube_flickr"},{id:"google_plus",symbol:"mba_social_panel_google_plus"},{id:"linkedin",symbol:"mba_social_panel_google_linkdin"},{id:"pinterest",symbol:"mba_social_panel_pinterest"},{id:"tumblr",symbol:"mba_social_panel_google_tumblr"},{id:"twitter",symbol:"mba_social_panel_twitter"},{id:"vimeo",symbol:"mba_social_panel_youtube_vimeo"},{id:"youtube",symbol:"mba_social_panel_youtube"}]},getSocialLinkPlaceholder:function(e){return"mobile_action_bar_"+(e="google_plus"===e?"google":e)+"_placeholder"},getValueLink:function(e){var n=this.getEditorAPI().mobile.actionBar.actions,a=n.get().socialLinks;return{value:a[e],requestChange:function(e,s){var i={};a[e]=s,i.socialLinks=a;var o=t(a).values().compact().value().length>0;n.update(i),n.enable({socialLinks:o})}.bind(this,e)}},getSocialLinkTooltip:function(e){return"mobile_action_bar_"+(e="google_plus"===e?"google":e)+"_tooltip"},validateUrlWithEmptyState:function(e){return a.validate.url(e)||""===e}})}),define("panels/toolPanels/fontsManager/fontItem.rt",["react","lodash","baseUI","symbols","util","uiConstants"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",{className:"font-item "+(this.shouldShowActions()?"with-actions ":"")+" "+(this.shouldShowCancel()?"cancelable":"")+" "+(this.props.status&&!this.props.fontFamily?"queue":"list")+" "+(this.props.errorCode?"error":"")+" "+(this.props.finished?"animated":"")},e.createElement("div",{className:"font-description "+(this.props.fontFamily?"uploaded":"")},e.createElement("span",{className:"font-title display-name "+(this.props.fontFamily?"uploaded":""),style:this.getStyle()},this.props.name),e.createElement("span",{className:"font-title file-name"},this.props.fileName),e.createElement("span",{className:"font-status-msg"},s.translate(this.getStatusMessage()))),e.createElement("div",{className:"indicator"},this.getStatusSymbol()?e.createElement(a.symbol,{name:this.getStatusSymbol(),className:this.props.status||"",key:"status-symbol"}):null),this.props.finished?e.createElement("div",{className:"indicator finished",key:"finished-symbol"},e.createElement(a.symbol,{name:"inputValidationSuccess"})):null,e.createElement("div",{className:"cancel-icon"},e.createElement(a.symbol,{name:"headerCloseButton",onClick:this.props.onCancelClick,className:"cancel-btn"})),e.createElement("div",{className:"actions"},e.createElement(n.tooltip,{value:"Upload_Fonts_Download_Tooltip",styleType:i.TOOLTIP.STYLE_TYPE.SMALL},e.createElement("div",{className:"action-btn-container"},this.props.downloadable?e.createElement("a",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"action-btn download",href:this.props.downloadUrl,onClick:this.props.onDownloadClick,key:"download-btn"},this.getDownloadProps()),e.createElement(a.symbol,{name:"font-download"})):null)),e.createElement(n.tooltip,{value:"Upload_Fonts_Delete_Tooltip",styleType:i.TOOLTIP.STYLE_TYPE.SMALL},e.createElement("div",{className:"action-btn-container"},this.props.removeable?e.createElement("a",{className:"action-btn",onClick:this.props.onRemoveClick,key:"remove-btn"},e.createElement(a.symbol,{name:"font-delete"})):null))))}}),define("panels/toolPanels/fontsManager/fontItem",["create-react-class","prop-types","lodash","util","panels/toolPanels/fontsManager/fontItem.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"fontItem",propTypes:{fontFamily:t.string,name:t.string,status:t.string,onDownloadClick:t.func,onRemoveClick:t.func,onCancelClick:t.func,downloadable:t.bool,removeable:t.bool,cancelable:t.bool,isStillUploading:t.bool,errorCode:t.string},getStyle:function(){if(this.props.fontFamily){return{fontFamily:this.props.fontFamily+",HelveticaNeueW01-45Ligh, HelveticaNeueW02-45Ligh, HelveticaNeueW10-45Ligh, Helvetica Neue, Helvetica, Arial, メイリオ, meiryo, ヒラギノ角ゴ pro w3, hiragino kaku gothic pro, sans-serif"}}return{}},shouldShowActions:function(){return this.props.downloadable||this.props.removeable},shouldShowCancel:function(){return this.props.cancelable},getStatusSymbol:function(){return{uploading:"font-uploading-loader",waiting:"font-uploading-loader",processing:"font-uploading-loader",succeeded:"inputValidationSuccess",failed:"inputValidationError"}[this.props.status]},getDownloadProps:function(){var e={};return a.browserUtil.isChrome()?e.download=this.props.fileName:e.target="_blank",e},getStatusMessage:function(){return this.props.errorCode?a.fontsManagerUtils.getErrorMessage(this.props.errorCode).translate_msg:this.props.isStillUploading?"Upload_Fonts_Status_Still_Uploading":a.fontsManagerUtils.constants.FONT_STATUS_MSG[this.props.status]||""},render:s})}),define("panels/toolPanels/fontsManager/fontsUploadPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","baseUILib","symbols","panels/toolPanels/fontsManager/fontItem"],function(e,t,n,a,s,i,o){"use strict";return function(){return e.createElement(n,{ref:"frame",panelName:this.props.panelName,className:"fonts-upload-panel",shouldNotCloseOnBlur:!0,onClose:this.handlePanelCloseClick,title:this.translateIfNeeded("UPLOAD_FONTS_Panel_Header"),helpId:"96323a82-c61a-4ac1-90ac-10aecb37cbf8",width:"600",onContextMenu:function(e){e.preventDefault()}.bind(this)},e.createElement("div",{className:"fonts-upload-header"},e.createElement("span",{className:"general-explanation-text"},this.shouldFilterOtfFiles()?this.translateIfNeeded("Upload_Fonts_Panel_Header_Text_CJK"):this.translateIfNeeded("Upload_Fonts_Panel_Header_Text")),e.createElement(a.fileInput,{className:"font-upload-button",label:"Upload_Fonts_Upload_Button",onChange:function(e){this.handleUpload(e,!1)}.bind(this),fileTypes:this.getFileTypes()})),this.shouldShowFontsList()?null:e.createElement(a.filesDrop,{onChange:function(e){this.handleUpload(e,!0)}.bind(this),key:"empty-fonts-list",className:"empty-msg"},e.createElement("div",{className:"empty-message-container"},e.createElement("div",{className:"empty-symbol-container"},e.createElement(i.symbol,{name:"fonts-manager-clipart"})),e.createElement("span",{className:"empty-text-title"},this.translateIfNeeded("Upload_Fonts_Empty_State_Title")),e.createElement("br",{}),e.createElement("span",{className:"empty-text"},this.shouldFilterOtfFiles()?this.translateIfNeeded("Upload_Fonts_Empty_State_Text_CJK"):this.translateIfNeeded("Upload_Fonts_Empty_State_Text")),e.createElement(a.fileInput,{className:"font-upload-link",label:"Upload_Fonts_Empty_State_Text_Link",onChange:function(e){this.handleUpload(e,!1)}.bind(this),onlyText:!0,fileTypes:this.getFileTypes()}))),this.shouldShowFontsList()?e.createElement(a.filesDrop,{key:"fonts-list",hasBorder:!1,className:"list",onChange:function(e){this.handleUpload(e,!0)}.bind(this)},e.createElement(s.CustomScroll,{ref:"customScroll"},e.createElement.apply(this,["div",{className:"font-list-container"},t.map(this.state.invalidFiles,function(n,a){return e.createElement(o,t.assign({},{key:n.name},this.getInvalidFilesProps(n)))}.bind(this)),t.map(this.getFontsList(),function(n,a){return e.createElement(o,t.assign({},{key:n.fontFamily||n.fileName+a},n))}.bind(this))]))):null,e.createElement("div",{className:"fonts-upload-footer"},this.shouldShowFooterMsg()?e.createElement("span",{key:"upload-text",className:"footer-msg"},this.translateIfNeeded("Upload_Fonts_Footer_Text")):null,this.shouldShowErrorMsg()?e.createElement("span",{key:"error-text",className:"footer-error-msg"},this.translateIfNeeded("Upload_Fonts_Footer_Error_Text")):null,e.createElement(a.button,{className:"default btn-md close-panel",label:this.getButtonLabel(),disabled:this.isUploadInProcess(),onClick:this.handleDoneClick})))}}),define("panels/toolPanels/fontsManager/fontsUploadPanel",["create-react-class","lodash","core","util","panels/toolPanels/fontsManager/fontsUploadPanel.rt"],function(e,t,n,a,s){"use strict";function i(e){return t.forEach(e,function(e){t.assign(e,{name:e.source.file.name})}),e}function o(e){return t.map(e,function(e){if(e.status===a.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED){var n=t.get(e,"serverResponse.data");return t.assign(e,a.fontsManagerUtils.getUploadedFontData(n))}return e})}function l(e,t,s){var i=a.fontsManagerUtils.getErrorMessage(t).bi_msg;e.bi.event(n.bi.events.fontsUploadPanel.Upload_Failed,{message:i,name:s.name})}return e({displayName:"fontsUploadPanel",mixins:[a.translationMixin,n.mixins.editorAPIMixin],render:s,getInitialState:function(){this.fontsManager=this.getEditorAPI().mediaServices.fontsManager,this.fileTimeouts=[];var e=this.fontsManager.getList(),n=function(e){return t(e).thru(i).thru(o).value()}(this.fontsManager.uploader.getUploadQueue());return{items:e,queue:n,uploadedItems:function(e){return t.transform(e,function(e,t){t.status===a.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED&&(e[t.id]={finished:!0})},{})}(n),invalidFiles:[],isUploadStarted:!1,isUploadError:!1}},handleUpload:function(e,s){var i=this.getEditorAPI(),o=this.shouldFilterOtfFiles();if(this.state.isUploadError&&this.setState({isUploadError:!1}),e.length>20)this.setState({isUploadError:!0});else{!function(e,a,s){var i=s?n.bi.events.fontsUploadPanel.Fonts_Dragged:n.bi.events.fontsUploadPanel.Upload_Fonts_Click;e.bi.event(i,{count:a.length}),t.forEach(a,function(t){e.bi.event(n.bi.events.fontsUploadPanel.Upload_Fonts_Try_Upload,{name:t.name})})}(i,e,s);var r=t.reduce(e,function(e,t){return a.fontsManagerUtils.isFolder(t)?(t.errorCode="999998",e.push(t)):a.fontsManagerUtils.isFontExt(t,o)||(t.errorCode="-7751",e.push(t)),e},[]),c=t.difference(e,r);t.forEach(r,function(e){l(i,e.errorCode,e)}),this.setState({invalidFiles:r,isUploadStarted:!0}),this.fontsManager.uploader.upload(c)}},onUploadedFontsChange:function(e){e&&this.setState({items:e})},onQueueChange:function(e){var t=i(e);this.setState({queue:t})},onFileChange:function(e){var s=this.state.queue,i=e.currentFileQueueIdx,o=e.currentFileProgress.status,r=this.getEditorAPI();if(s[i].status=o,o===a.fontsManagerUtils.constants.FONT_STATUS.PROCESSING&&(this.getEditorAPI().bi.event(n.bi.events.fontsUploadPanel.Start_Font_Upload_Process,{name:s[i].name}),this.fileTimeouts.push(window.setTimeout(function(){s[i].stillUploading=!0,this.setState({queue:s})}.bind(this),3e4))),o===a.fontsManagerUtils.constants.FONT_STATUS.FAILED){var c=t.get(e,"currentFileProgress.file.serverResponse.data"),p=t.get(c,"error_code")||"unknown";s[i].error_code=p,s[i].canceled||l(r,p,s[i])}if(o===a.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED){this.getEditorAPI().bi.event(n.bi.events.fontsUploadPanel.Fonts_Uploaded,{name:s[i].name});var u=t.get(e,"currentFileProgress.file.serverResponse.data"),d={};d[u.id]={finished:!1},this.setState({uploadedItems:t.assign(d,this.state.uploadedItems)}),s[i]=t.assign(s[i],a.fontsManagerUtils.getUploadedFontData(u)),window.setTimeout(function(){var e=t.clone(this.state.uploadedItems);e[u.id].finished=!0,this.setState({uploadedItems:e})}.bind(this),1e3)}this.setState({queue:s})},getFontProps:function(e){var n=!!e.status&&!e.fontFamily,s="";n?n&&(s=e.status):s=a.fontsManagerUtils.constants.FONT_STATUS.FINISHED;return{fileName:e.name,name:e.displayName,fontFamily:e.fontFamily,status:s,errorCode:e.error_code,downloadable:!n,downloadUrl:e.downloadUrl,removeable:!n,finished:e.status===a.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED||this.isUploadedItem(e),onRemoveClick:t.partial(this.handleRemoveClick,e),onDownloadClick:t.partial(this.handleDownloadClick,e),cancelable:e.status===a.fontsManagerUtils.constants.FONT_STATUS.WAITING,isStillUploading:e.stillUploading,onCancelClick:n?t.partial(this.handleCancleClick,e):null}},isUploadedItem:function(e){return e.id&&!!t.get(this.state.uploadedItems,e.id)},getFontsList:function(){var e=this.getQueueItems().concat(this.getExistingItems());return t.map(e,this.getFontProps)},getInvalidFilesProps:function(e){return{fileName:e.name,status:a.fontsManagerUtils.constants.FONT_STATUS.FAILED,errorCode:e.errorCode}},getExistingItems:function(){var e=this.state.queue;return t.reject(this.state.items,function(n){return t.find(e,{id:n.id})})},getQueueItems:function(){return t.reject(this.state.queue,function(e){return e.removed||e.isAborted})},componentDidMount:function(){this.fontsManager.registerObserver(a.fontsManagerUtils.constants.FONT_EVENTS_NAMES.LIST_CHANGED,this.onUploadedFontsChange),this.fontsManager.registerObserver(a.fontsManagerUtils.constants.FONT_EVENTS_NAMES.QUEUE_CHANGED,this.onQueueChange),this.fontsManager.registerObserver(a.fontsManagerUtils.constants.FONT_EVENTS_NAMES.FILE_CHANGED,this.onFileChange)},componentDidUpdate:function(){},componentWillUnmount:function(){this.cancelAllUpload(),this.clearTimeouts(),this.fontsManager.unregisterObserver(a.fontsManagerUtils.constants.FONT_EVENTS_NAMES.LIST_CHANGED,this.onUploadedFontsChange),this.fontsManager.unregisterObserver(a.fontsManagerUtils.constants.FONT_EVENTS_NAMES.QUEUE_CHANGED,this.onQueueChange),this.fontsManager.unregisterObserver(a.fontsManagerUtils.constants.FONT_EVENTS_NAMES.FILE_CHANGED,this.onFileChange)},shouldShowFontsList:function(){return!t.isEmpty(this.getExistingItems())||!t.isEmpty(this.getQueueItems())||!t.isEmpty(this.state.invalidFiles)},handleRemoveClick:function(e){this.getEditorAPI().bi.event(n.bi.events.fontsUploadPanel.Delete_File,{}),this.openDeleteConfirmationPanel(e)},handleDownloadClick:function(){this.getEditorAPI().bi.event(n.bi.events.fontsUploadPanel.Download_File_Click,{})},openDeleteConfirmationPanel:function(e){var a=this,s=t.partial(this.removeItem,e);this.getEditorAPI().panelManager.openPanel("panels.toolPanels.deleteFontMsg",{panelName:"deleteFontConfirmation",onConfirm:s,onCancel:function(){a.getEditorAPI().bi.event(n.bi.events.fontsUploadPanel.Approve_Delete_File,{text:"cancel"})}},!0)},removeItem:function(e){this.getEditorAPI().bi.event(n.bi.events.fontsUploadPanel.Approve_Delete_File,{text:"delete"});var a=this.state.queue,s=t.findIndex(a,e),i=this.state.uploadedItems;-1!==s&&(a[s].removed=!0,i[e.id]&&delete(i=t.clone(i))[e.id],this.setState({queue:a,uploadedItems:i})),this.fontsManager.remove([e.id])},handleCancleClick:function(e){e.status===a.fontsManagerUtils.constants.FONT_STATUS.WAITING&&this.cancelUpload(e)},cancelUpload:function(e){if(this.getEditorAPI().bi.event(n.bi.events.fontsUploadPanel.Cancel_Upload,{name:e.name}),this.fontsManager.uploader.cancelUpload(e)){var a=t.findIndex(this.state.queue,e),s=this.state.queue;-1!==a&&(s[a].canceled=!0,this.setState({queue:s}))}},cancelAllUpload:function(){var e=this,n=t.filter(this.state.queue,{status:a.fontsManagerUtils.constants.FONT_STATUS.WAITING});this.isUploadInProcess()&&n&&t.forEach(n,function(t){e.cancelUpload(t)}),this.fontsManager.uploader.clearUploadQueue()},clearTimeouts:function(){t.forEach(this.fileTimeouts,function(e){window.clearTimeout(e)})},handlePanelCloseClick:function(){return!this.isUploadInProcess()||(this.openCancelConfirmationPanel(),!1)},openCancelConfirmationPanel:function(){var e=this;this.getEditorAPI().panelManager.openPanel("panels.toolPanels.cancelFontUploadMsg",{panelName:"cancelUploadConfirmation",onConfirm:function(){e.getEditorAPI().bi.event(n.bi.events.fontsUploadPanel.Approve_Stop_Upload,{}),e.closePanel()},onCancel:function(){return!1}},!0)},isAnyInQueueProcessing:function(){return t.some(this.state.queue,{status:a.fontsManagerUtils.constants.FONT_STATUS.PROCESSING})},isAnyInQueueWaiting:function(){return t.some(this.state.queue,{status:a.fontsManagerUtils.constants.FONT_STATUS.WAITING})},isAnyInQueueUploading:function(){return t.some(this.state.queue,{status:a.fontsManagerUtils.constants.FONT_STATUS.UPLOADING})},closePanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},handleDoneClick:function(){this.getEditorAPI().bi.event(n.bi.events.fontsUploadPanel.Closed_Button_Click,{}),this.closePanel()},getButtonLabel:function(){return this.state.isUploadStarted?"Upload_Fonts_Close_Button_2":"Upload_Fonts_Close_Button_1"},isUploadInProcess:function(){return this.isAnyInQueueProcessing()||this.isAnyInQueueWaiting()||this.isAnyInQueueUploading()},shouldShowFooterMsg:function(){return!this.state.isUploadError&&!t.isEmpty(this.state.uploadedItems)&&!this.isUploadInProcess()},shouldShowErrorMsg:function(){return this.state.isUploadError},getFileTypes:function(){var e=this.shouldFilterOtfFiles()?a.fontsManagerUtils.constants.CONVERTED_EXTENTIONS:a.fontsManagerUtils.constants.ACCEPTABLE_EXTENTIONS;return t.map(e,function(e){return"."+e}).join(",")},shouldFilterOtfFiles:function(){var e=this.getEditorAPI().getLanguageCode(),t=this.getEditorAPI().documentServices.generalInfo.getGeo();return a.fontsManagerUtils.shouldFilterOtfFiles(e,t)}})}),define("panels/toolPanels/fontsManager/deleteFontMsg.rt",["react","lodash","panels/frames/messagePanelFrame","util"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Upload_Fonts_Delete_Pop_Up_Button_1",cancelLabel:"Upload_Fonts_Delete_Pop_Up_Button_2",className:"important delete-font-message",panelTitle:a.translate("Upload_Fonts_Delete_Pop_Up_Header")},e.createElement("div",{className:"delete-font-message"},e.createElement("div",{className:"message"},a.translate("Upload_Fonts_Delete_Pop_Up_Text"))))}}),define("panels/toolPanels/fontsManager/deleteFontMsg",["create-react-class","prop-types","lodash","panels/toolPanels/fontsManager/deleteFontMsg.rt"],function(e,t,n,a){"use strict";return e({displayName:"deleteFontMsg",propTypes:{panelName:t.string.isRequired,onConfirm:t.func.isRequired,onCancel:t.func.isRequired},render:a})}),define("panels/toolPanels/fontsManager/cancelFontUploadMsg.rt",["react","lodash","panels/frames/messagePanelFrame","util","experiment"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Upload_Fonts_Close_Panel_Pop_Up_Button_1",cancelLabel:"Upload_Fonts_Close_Panel_Pop_Up_Button_2",className:"important close-font-message",panelTitle:a.translate("Upload_Fonts_Close_Panel_Pop_Up_Header")},e.createElement("div",{className:"cancel-font-message"},e.createElement("div",{className:"message"},a.translate("Upload_Fonts_Close_Panel_Pop_Up_Text"))))}}),define("panels/toolPanels/fontsManager/cancelFontUploadMsg",["create-react-class","lodash","panels/toolPanels/fontsManager/cancelFontUploadMsg.rt"],function(e,t,n){"use strict";return e({displayName:"cancelFontUploadMsg",render:n})}),define("panels/toolPanels/grid/gridAddColumnPanel.rt",["react","lodash","util","baseUI","panels/frames/toolPanelFrame","baseUILib"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(s,{ref:"frame",panelName:"panels.toolPanels.gridAddColumnPanel",className:"grid-add-column-toolbar",top:this.props.top,left:this.props.left,onClose:this.onClose},e.createElement("div",{className:"grid-add-column-panel"},e.createElement(i.PanelHeader,{className:"header light",ref:"panelHeader",onClose:this.onCloseButtonClick,noHelpBtn:!0},e.createElement("span",{className:"panel-title"},n.translate(this.panelTitle))),e.createElement("div",{className:"header-separator"}),e.createElement("div",{className:"grid-add-column-toolbar-content"},e.createElement(a.textInput,{label:"TABLE_ADD_PANEL_COL_TITLE_LABEL",value:this.state.label,onChange:this.onLabelChange}),e.createElement("hr",{className:"divider-long"}),e.createElement(a.textInput,{label:"TABLE_ADD_PANEL_FIELD_NAME_LABEL",ref:"fieldNameInput",value:this.state.fieldName,validator:this.fieldNameValidator,invalidMessage:"FIELD_NAME_CANNOT_BE_EMPTY",onValidation:this.onFieldNameValidation,onChange:this.onFieldNameChange}),e.createElement("hr",{className:"divider-long"}),e.createElement.apply(this,[a.dropDown.select,{label:"TABLE_ADD_PANEL_TYPE_LABEL",valueLink:this.linkState("type")},t.map(this.typeOptions,function(t,n){return e.createElement(a.dropDown.option,{key:t.value,value:t.value},"\n                                ",t.label,"\n                            ")}.bind(this))]),e.createElement("hr",{className:"divider-long"}),e.createElement("div",{className:"button-row"},e.createElement(a.button,{disabled:!this.state.isFormValid,className:"button",label:"TABLE_ADD_PANE_DONE_BTN",onClick:this.onAddButtonClick})))))}}),define("panels/toolPanels/grid/gridAddColumnPanel",["react","create-react-class","lodash","core","panels/toolPanels/grid/gridAddColumnPanel.rt","panels/frames/panelCloseOrigin","util"],function(e,t,n,a,s,i,o){"use strict";var l=Object.freeze({STRING:"string",DATE:"date",NUMBER:"number",IMAGE:"image",BOOLEAN:"bool",RICH_TEXT:"richText"});return t({displayName:"gridAddColumnPanel",mixins:[a.mixins.editorAPIMixin,e.addons.LinkedStateMixin],panelTitle:"TABLE_ADD_PANEL_TITLE",getInitialState:function(){return{label:this.props.labelPrefix+this.props.nextIndex,fieldName:this.props.fieldNamePrefix+this.props.nextIndex,type:l.STRING,fieldNameWasEdited:!1,isFormValid:!0}},render:s,onCloseButtonClick:function(){this.reportPanelClosed(i.HEADER_CLOSE_BUTTON),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},onAddButtonClick:function(){this.state.isFormValid&&(this.props.addColumnCallback(this.state.label,this.state.fieldName,this.state.type),this.reportPanelClosed(i.DONE_BUTTON),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName))},onLabelChange:function(e){var t={label:e};if(!this.state.fieldNameWasEdited){var n=e.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");0!==n.length&&(t.fieldName=n)}this.setState(t)},fieldNameValidator:function(e){return e.length>0},onFieldNameChange:function(e){this.setState({fieldName:e,fieldNameWasEdited:!0})},onFieldNameValidation:function(e){this.setState({isFormValid:e})},typeOptions:[{value:l.STRING,label:o.translate("TABLE_ADD_PANEL_TYPE_OPT1")},{value:l.IMAGE,label:o.translate("TABLE_ADD_PANEL_TYPE_OPT2")},{value:l.NUMBER,label:o.translate("TABLE_ADD_PANEL_TYPE_OPT3")},{value:l.BOOLEAN,label:o.translate("TABLE_ADD_PANEL_TYPE_OPT4")},{value:l.DATE,label:o.translate("TABLE_ADD_PANEL_TYPE_OPT5")},{value:l.RICH_TEXT,label:o.translate("TABLE_ADD_PANEL_TYPE_OPT6")}],onClose:function(e){this.reportPanelClosed(e)},getSelectedComponentId:function(){var e=this.props.selectedComponents;return n.isArray(e)?n.head(e).id:e.id},reportPanelClosed:function(e){var t=this.getEditorAPI();t.bi.event(a.bi.events.grid.GRID_ADD_COLUMN_DONE,{siteId:t.documentServices.generalInfo.getSiteId(),componentId:this.getSelectedComponentId(),panelName:this.panelTitle,columnType:this.state.type,fieldName:this.state.fieldName,columnTitle:this.state.label,origin:e})}})}),define("panels/toolPanels/toolPanels",["panels/toolPanels/pagesSelector/pagesSelectorPanel","panels/toolPanels/exampleToolPanel","panels/toolPanels/linkPanel/linkPanel","panels/toolPanels/colorPicker/colorPicker","panels/toolPanels/iconPicker/iconPickerPanel","panels/toolPanels/languageSupport/languageSupport","panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel","panels/toolPanels/fontsManager/fontsUploadPanel","panels/toolPanels/fontsManager/deleteFontMsg","panels/toolPanels/fontsManager/cancelFontUploadMsg","panels/toolPanels/grid/gridAddColumnPanel"],function(e,t,n,a,s,i,o,l,r,c,p){"use strict";return{pagesSelectorPanel:e,exampleTool:t,linkPanel:n,languageSupport:i,colorPicker:a,iconPickerPanel:s,mobileActionBarSubPanel:o,fontsUploadPanel:l,deleteFontMsg:r,cancelFontUploadMsg:c,gridAddColumnPanel:p}}),define("panels/commonControls/linkTo/linkToMixin",["lodash","core","baseUI"],function(e,t,n){"use strict";return{mixins:[n.inputMixin,t.mixins.editorAPIMixin],ValidationStatus:{NONE:"none",SUCCESS:"success",ERROR:"error"},getInitialState:function(){return{validationStatus:this.ValidationStatus.NONE}},openLinkDialogFromPanel:function(){this.openLinkDialog(!0)},openLinkDialog:function(e){this.getEditorAPI().openLinkPanel({link:this.getValueFromProps(),visibleSections:this.props.visibleSections,callback:this.linkUpdated},!e)},linkUpdated:function(e){this.setState({validationStatus:this.ValidationStatus.SUCCESS}),this.callOnChangeIfExists(e),window.setTimeout(function(){this.isMounted()&&this.setState({validationStatus:this.ValidationStatus.NONE})}.bind(this),1e3)}}}),define("panels/commonControls/linkTo/linkTo.rt",["react","lodash","baseUI","experiment"],function(e,t,n,a){"use strict";return function(){return e.createElement(n.labelWithCircleButton,{key:"labelWithCircleButton",className:"input-link-to",isDisabled:this.isDisabled(),label:this.props.label,displayedValue:this.getTranslatedLink(),onClick:this.openLinkDialogFromPanel,buttonIcon:"linkBtnThin",showButton:this.shouldShowButton(),showSuccessSymbol:this.shouldShowSuccessSymbol(),infoIconText:this.props.infoText,infoIconTitle:this.props.infoTitle})}}),define("panels/commonControls/linkTo/linkTo",["create-react-class","prop-types","lodash","util","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkTo.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"linkTo",mixins:[s],propTypes:{label:t.string,placeholder:t.string,showButton:t.bool,infoText:t.string,infoTitle:t.string},getDefaultProps:function(){return{label:"",placeholder:"Link_To_Control_Label_Placeholder",showButton:!0}},shouldShowButton:function(){return this.props.showButton&&this.state.validationStatus===this.ValidationStatus.NONE},shouldShowSuccessSymbol:function(){return this.state.validationStatus===this.ValidationStatus.SUCCESS},getTranslatedLink:function(){var e=a.link.getLinkValueAsString(this.getEditorAPI(),this.getValueFromProps());return e=e||a.translate(this.props.placeholder)},render:i})}),define("panels/commonControls/linkTo/linkToButton.rt",["react","lodash","baseUI"],function(e,t,n){"use strict";return function(){return e.createElement(n.button,function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({icon:"link",className:"link-to-button",onClick:this.openLinkDialog},this.filteredProps()))}}),define("panels/commonControls/linkTo/linkToButton",["create-react-class","lodash","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkToButton.rt"],function(e,t,n,a){"use strict";return e({displayName:"linkToButton",mixins:[n],render:a})}),define("panels",["panels/panelManager/panelManager","panels/frames/frames","panels/mixins/mixins","panels/helpPanels/helpPanels","panels/errorPages/errorPagesPanels","panels/focusPanels/focusPanels","panels/messagePanels/messagePanels","panels/toolPanels/toolPanels","panels/commonControls/linkTo/linkTo","panels/commonControls/linkTo/linkToButton","panels/commonControls/linkTo/linkToMixin"],function(e,t,n,a,s,i,o,l,r,c,p){"use strict";return{PanelManager:e,frames:t,mixins:n,helpPanels:a,errorPages:s,focusPanels:i,messagePanels:o,toolPanels:l,commonControls:{linkTo:r,linkToButton:c},linkToMixin:p}});
//# sourceMappingURL=panels.min.js.map