define("tpa/constants/constants",[],function(){"use strict";return{TPA_SETTINGS_PANEL_ID:"tpa.compPanels.tpaSettings",TPA_SETTING_MODAL:"tpa.compModals.tpaSettingsModal",TPA_DEFAULT_HELP_ID:"47f00d3e-78ae-4bd6-9c2f-4ddf0e9c42f4",BI:{initiator:{APP_MARKET:"APPMARKET_EDITOR",EDITOR:"EDITOR",SDK:"SDK",PLATFORM:"SDK_PLATFORM"},type:{ADD_APP:"ADD_APP",APP_MANAGE_BUTTON:"APP_BUTTON_MANAGE",APP_UPGRADE_BUTTON:"APP_BUTTON_UPGRADE",DOUBLECLICK_SETTINGS:"DOUBLECLICK_SETTINGS",GFPP_MANAGE:"GFPP_MANAGE",GFPP_SETTINGS:"GFPP_SETTINGS",GFPP_UPGRADE:"GFPP_UPGRADE",OPENAPP_SETTINGS:"OPENAPP_SETTINGS",TPA_SETTINGS:"TPA_SETTINGS"}}}}),define("tpa/superApps/superAppsConstants",[],function(){"use strict";var e="1380b703-ce81-ff05-f115-39571d94dfcd",t={};t["61f33d50-3002-4882-ae86-d319c1a249ab"]="blog_button",t[e]="ecom_button";return{getMarketOpenOriginForBi:function(e){return t[e]},ECOM:{APP_DEF_ID:e,PRODUCT_PAGE:"13a94f09-2766-3c40-4a32-8edb5acdd8bc",GRID_GALLERY:"13afb094-84f9-739f-44fd-78d036adb028",SLIDER_GALLERY:"139a41fd-0b1d-975f-6f67-e8cbdf8ccc82",PRODUCT_GALLERY_PAGE:e,SHOPPING_CART:"1380bbab-4da3-36b0-efb4-2e0599971d14",TANK_YOU_PAGE:"1380bbb4-8df0-fd38-a235-88821cf3f8a4",SHOPPING_CART_WIDGET:"1380bbc4-1485-9d44-4616-92e36b1ead6b",PRODUCT_WIDGET:"13ec3e79-e668-cc0c-2d48-e99d53a213dd"},WIXMUSIC:{APP_DEF_ID:"13bb5d67-1add-e770-a71f-001277e17c57",WIDGET:"13bb5dc2-a098-5a74-502b-6bac84e80b23"},WIX_VIDEO:{APP_DEF_ID:"14409595-f076-4753-8303-9a86f9f71469",WIDGET:"144097ea-fea0-498e-ade7-e6de40127106"},BLOG_APP_DEF_ID:"61f33d50-3002-4882-ae86-d319c1a249ab",NEW_BLOG_APP_DEF_ID:"14bcded7-0066-7c35-14d7-466cb3f09103",ECOM_APP_DEF_ID:e,WIXMUSIC_APP_DEF_ID:"13bb5d67-1add-e770-a71f-001277e17c57",HOTELS:{APP_DEF_ID:"135aad86-9125-6074-7346-29dc6a3c9bcf",SEARCH_BAR:"135aae78-42c9-63b5-d09a-77233cebc1c4"},MEMBER_PROFILE_CARD:{APP_DEF_ID:"14ce28f7-7eb0-3745-22f8-074b0e2401fb",WIDGET:"14cefc05-d163-dbb7-e4ec-cd4f2c4d6ddd"},GET_SUBSCRIBERS_APP_DEF_ID:"1375baa8-8eca-5659-ce9d-455b2009250d",WIX_BOOKINGS_APP_DEF_ID:"13d21c63-b5ec-5912-8397-c3a5ddb27a97",WIX_PHOTOALBUMS_APP_DEF_ID:"13ff8629-c1fc-e289-e81f-bc8c8968e9d6",SHOUTOUT_APP_DEF_ID:"135c3d92-0fea-1f9d-2ba5-2a1dfb04297e",PRO_GALLERY_APP_DEF_ID:"14271d6f-ba62-d045-549b-ab972ae1f70e",WIX_CHAT:{APP_DEF_ID:"14517e1a-3ff0-af98-408e-2bd6953c36a2",WIDGET:"14517f3f-ffc5-eced-f592-980aaa0bbb5c"},WIX_SOUNDCLOUD:{APP_DEF_ID:"14a85b13-d7da-ee8e-7290-3b93340f63fa",WIDGET:"14a85b28-2374-72cf-db64-e0c11046aa60"}}}),define("tpa/bi/events.json",[],function(){return{APP_INTENT:{evid:12,src:75,endpoint:"app-sdk",fields:{type:"string",instance_id:"guid",initiator:"string",app_id:"guid"}},APP_ENGAGEMENT:{evid:13,src:75,endpoint:"app-sdk",fields:{instance_id:"guid",app_id:"guid",premium_intent:"string"}},TPA_ADDED:{evid:165,src:38,endpoint:"editor",fields:{is_permissions_app:"number",is_first:"boolean",app_id:"string",app_site_id:"string",instance_id:"string",category:"string",origin:"string",section:"string",search_term:"string",search_result_position:"number",referral_info_category:"string",referral_info:"string",adding_method:"string",template_guid:"string",modal_tab_name:"string",page_id:"string",widget_id:"string"}},TPA_ADD_CLICK:{evid:167,src:38,endpoint:"editor",fields:{adding_method:"string",section:"string",category:"string",origin:"string",app_id:"string",is_first:"boolean",is_permissions_app:"boolean"}},COMPONENT_ADDED_FROM_MARKET:{evid:168,src:38,endpoint:"editor",fields:{referral_info_category:"string",referral_info:"string",app_id:"guid",app_site_id:"guid",instance_id:"guid",search_result_position:"number",search_term:"string",modal_tab_name:"string",adding_method:"string",category:"string",origin:"string",component_id:"string",is_first:"boolean",component_type:"string"}},CLOSE_MARKET_CLICK:{evid:171,src:38,endpoint:"editor",fields:{open_origin:"string",closing_method:"string"}},MARKET_CLOSED:{evid:172,src:38,endpoint:"editor",fields:{open_origin:"string",seconds_opened:"number"}},OPEN_MODAL_CLICK:{evid:173,src:38,endpoint:"editor",fields:{app_id:"string",origin:"string",category:"string",section:"string",component_type:"string"}},MARKET_HELP_CLICK:{evid:174,src:38,endpoint:"editor"},TPA_HELP_CLICK:{evid:175,src:38,endpoint:"editor",fields:{widget_id:"string",help_status:"string",app_id:"string",origin:"string"}},EXTENSION_ADDED:{evid:177,src:38,endpoint:"editor",fields:{page_id:"string",app_site_id:"string",instance_id:"string",widget_id:"string",app_id:"string",preset_id:"string"}},EXTENSION_REMOVED:{evid:178,src:38,endpoint:"editor",fields:{page_id:"string",widget_id:"string",comp_id:"string",instance_id:"string",app_id:"string"}},TPA_OPEN_SETTINGS:{evid:179,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",instance_id:"string"}},CUT_COMPONENT_OR_TPA:{evid:180,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},COPY_COMPONENT_OR_TPA:{evid:181,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},PASTE_COMPONENT_OR_TPA:{evid:182,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},DUPLICATE_COMPONENT_OR_TPA:{evid:183,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},CLICK_UPGRADE_APP:{evid:184,src:38,endpoint:"editor",fields:{pp_origin:"string",app_site_id:"string",app_id:"string"}},PP_OPENED:{evid:185,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",pp_origin:"string",pp_type:"string"}},CLICK_UPGRADE_IN_PP:{evid:186,src:38,endpoint:"editor",fields:{pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},CLICK_CYCLE:{evid:187,src:38,endpoint:"editor",fields:{cycle_id:"number",cycle_name:"string",pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},EXPAND_OFFERING:{evid:188,src:38,endpoint:"editor",fields:{cycle_id:"number",cycle_name:"string",pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},PERMISSION_MODAL_CLOSED:{evid:189,src:38,endpoint:"editor",fields:{closing_method:"string",app_id:"string"}},TPA_ERROR:{evid:190,src:38,endpoint:"editor",fields:{error_desc:"string",error_type:"string",app_id:"string"}},TPA_CLOSE_SETTINGS:{evid:191,src:38,endpoint:"editor",fields:{seconds_opened:"number",app_id:"string",app_site_id:"string",instance_id:"string"}},TPA_MESSAGE_LOADED:{evid:277,src:38,endpoint:"editor",fields:{app_id:"string",description:"string",type:"string"}},OPEN_DASHBOARD_APP_CLICK:{evid:278,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",instance_id:"string",origin:"string"}},APP_MARKET_ICON_EXPANDED:{evid:675,src:38,endpoint:"editor"},PLATFORM_APP_TRY_TO_INSTALL:{evid:755,src:38,endpoint:"editor",fields:{app_name:"string"}},PLATFORM_APP_ADDED:{evid:746,src:38,endpoint:"editor",fields:{app_name:"string"}}}}),define("tpa/bi/errors.json",[],function(){return{ECOM_MISSING_PAGES:{errorName:"ECOM_MISSING_PAGES",errorCode:300,severity:"fatal"},APP_IS_NOT_RESPONSIVE:{errorName:"APP_IS_NOT_RESPONSIVE",errorCode:302,desc:"monitoring apps that are down",severity:"error",params:{p1:"endpoint",p2:"app_id"}}}}),define("tpa/bi/bi",["lodash","tpa/bi/events.json","tpa/bi/errors.json"],function(e,t,a){"use strict";return{events:t,errors:a,registerEvents:function(a){a.documentServices.bi.register("tpa","event",e.cloneDeep(t))}}}),define("tpa/utils/tpaUtils",["lodash","util","panels","tpa/constants/constants","tpa/superApps/superAppsConstants","tpa/bi/bi","experiment"],function(e,t,a,i,n,o,s){"use strict";function r(e,t){return["//",function(){var e=window.location.hostname.match(/editor\.(.*)/);return e?"www."+e[1]:"www.wix.com"}(),"/my-account/sites/",e,"/app/",t,"?referralInfo=editor"].join("")}function p(t,a,i,n,o){if(e.includes(c,a)){var r=d.bind(null,t,i,n,o),p=function(t,a){var i=t.documentServices.tpa.app.getDataByAppDefId(a)||{},n=t.documentServices.generalInfo.isFirstSave();return!i.notProvisioned&&i.instanceId&&(!i.demoMode||s.isOpen("se_tpaProvisionOnAdd"))&&!0!==e.get(i,"permissions.revoked")&&!n}.bind(null,t,i);t.bi.reportBI(a,[r],p)}}function d(e,t,a,i){return{app_id:t,instance_id:(e.documentServices.tpa.app.getDataByAppDefId(t)||{}).instanceId,initiator:a,type:i}}var c=[o.events.APP_INTENT];return{isInDevMode:function(){return!e.isEmpty(t.url.getParameterByName("appDefinitionId"))},getAppInMyAccountUrl:r,getOpenedPanel:function(t,a){var i=t.getOpenPanels();return e.find(i,{name:a})},isMultiSectionInstanceEnabled:function(t,a){if(!a)return!1;var i=t.widgets&&t.widgets[a];return e.get(i,"appPage.multiInstanceEnabled")},isBlog:function(e){return e===n.BLOG_APP_DEF_ID},sdkVersionIsAtLeast:function(t,a){if(e.isUndefined(t)||e.isUndefined(a))return!1;for(var i=e.map(t.split("."),function(e){return parseInt(e,10)}),n=e.map(a.split("."),function(e){return parseInt(e,10)});i.length&&n.length;){var o=i.shift(),s=n.shift();if(o>s)return!0;if(o<s)return!1}return i.length>=n.length},getWindow:function(){return window},selectComponentAndNavigateIfNeeded:function(t,a,i){var n=t.selection.getSelectedComponentData(),o=e.get(n,"applicationId");if(o&&o.toString()===a.applicationId.toString())i&&i();else{var s=t.documentServices.tpa.app.getFirstAppCompPageId(a.appDefinitionId),r=t.documentServices.pages.getFocusedPageId(),p=t.components.get.byId(s.compId,s.pageId);s.pageId!==r&&"masterPage"!==s.pageId?t.pages.navigateTo(s.pageId,function(){t.selection.selectComponentByCompRef(p),i&&i()}):(t.selection.selectComponentByCompRef(p),i&&i())}},bi:{reportBIOnAppIntent:p,getAppIntentBiParamsToAddToUrl:function(t,a,n){var s=t.documentServices.tpa.app.getDataByAppDefId(a);if(e.get(s,"isWixTPA")){var r={msid:t.documentServices.generalInfo.getMetaSiteId(),src:o.events.APP_INTENT.src,evid:o.events.APP_INTENT.evid},p=d(t,a,i.BI.initiator.EDITOR,n);return e.merge(r,p)}return null},reportAddComponentBIEvent:function(e,t,a,i){i=i||{},e.bi.event(o.events.COMPONENT_ADDED_FROM_MARKET,{app_id:i.app_id,instance_id:t,component_type:a||"wix_component",origin:"ed_market",category:i.category,search_term:i.search_term,item_position:i.item_position,referral_info_category:i.referral_info_category,referral_info:i.referral_info,adding_method:i.adding_method,modal_tab_name:i.modal_tab_name})},reportTpaAddedBiEvent:function(t,a,i,n,s,r,p,d){var c=t.documentServices.generalInfo.isFirstSave()?t.documentServices.generalInfo.getMetaSiteId():"",l=t.documentServices.tpa.app.getDataByAppDefId(a);d=d||{};var g={is_permissions_app:p?1:0,is_first:r?1:0,app_id:a,widget_id:i,app_site_id:e.get(l,"instanceId"),instance_id:s,origin:"ed_market",adding_method:d.adding_method,category:d.category,section:d.section,search_term:d.search_term,item_position:d.item_position,referral_info_category:d.referral_info_category,referral_info:d.referral_info,template_guid:c,modal_tab_name:d.modal_tab_name,page_id:n};t.bi.event(o.events.TPA_ADDED,g)}}}}),define("tpa/utils/mediaDialogHandlerUtils",["lodash","experiment"],function(e,t){"use strict";var a={photos:"IMAGE",secure_picture:"IMAGE_PRO",backgrounds:"BG_IMAGE",audio:"MUSIC",documents:"DOCUMENT",secure_music:"MUSIC_PRO",swf:"FLASH",video:"VIDEO",shape:"SHAPE",music:"MUSIC",clipart:t.isOpen("se_addPanelClipArtToIllustration")?"ILLUSTRATION":"CLIPART",bg_video:"BG_VIDEO",icon_document:"ICON_DOCUMENT",bg_social:"ICON_SOCIAL",bg_favicon:"ICON_FAVICON"};return{convertMediaManagerResult:function(t){var a={};if(a.fileName=t.title||"","secure_music"===t.mediaType){var i=t.fileOutput&&t.fileOutput.audio,n=e.find(i,{tag:"preview-short"});a.shortPreviewFileName=n&&n.url||"",a.previewFileName=t.previewFileName||"",a.fileUrl=t.fileUrl||""}else a.relativeUri=t.fileName||"",a.width=Number(t.width)||0,a.height=Number(t.height)||0;return a},convertMediaManagerResultForSuperApps:function(t){var a=e.cloneDeep(t);return a.relativeUri=t.uri||"",a},convertMediaType:function(e,t){var i=a[e];return t.categories[i]}}}),define("tpa/handlers/editorRefreshTPADataAfterUpgrade",["lodash","jquery"],function(e,t){"use strict";var a=null,i={},n=function(){a&&(t(window).off("focus",a),a=null)};return{trackAppUpgrade:function(o,s){var r=o.documentServices.tpa.app.getData(s);i[s]={appDefinitionId:r.appDefinitionId,vendorProductId:r.vendorProductId,upgradedToYearly:!0===r.upgradedToYearly},function(o){a||(a=function(){!function(t,a){var n=t.documentServices.generalInfo.getMetaSiteId();t.documentServices.tpa.billing.getPremiumApps(n,function(t){if(!e.isEmpty(t)){var n=void 0,o=void 0,s=[],r=function(){return o&&o.cycle&&6===o.cycle};if(e.isArray(t)){t=e.keyBy(t,"appDefinitionId");for(n in i)e.isObject(t[i[n].appDefinitionId])&&(o=t[i[n].appDefinitionId],i[n].vendorProductId===o.vendorProductId&&i[n].upgradedToYearly===r()||(delete i[n],s.push(n)))}a(s)}})}(o,function(e){!function(e,t){var a=e.documentServices.generalInfo.getMetaSiteId();t.forEach(function(t){e.documentServices.tpa.provision.refreshAppSpecMap(t,a,function(){n(),e.selection.deselectComponents(),e.panelManager.closePanelByName("tpa.compPanels.tpaSettings"),function(e,t){var a=e.documentServices.tpa.app.getRenderedReactCompsByApplicationId(t);e.documentServices.tpa.app.refreshApp(a)}(e,t)})})}(o,e)})},t(window).on("focus",a))}(o)},trackedApps:i,resetListeners:function(){n();for(var e in i)i.hasOwnProperty(e)&&delete i[e]}}}),define("tpa/services/tpaAlertsService",["lodash","tpa/bi/bi"],function(e,t){"use strict";return{openProvisionFailedAlert:function(e,a){e("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{app_id:a,description:"provision failed",type:"provision_failed"}},!0)},openSaveFailedAlertForAppMarket:function(e){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{description:"save for app market failed",type:"save_for_app_market_failed"}},!0)},openSaveFailedAlertForUpgrade:function(e,a){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_upgrade_before_save_error_title",description:"tpa_messages_upgrade_before_save_error_description",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_upgrade_before_save_error_step_3"],helpMessage:"tpa_messages_upgrade_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{app_id:a,description:"Error on upgrade TPA from template site",type:"upgrade_save_error"}},!0)},openSaveFailedAlertForDashboardUrl:function(e,a){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{app_id:a,description:"Error on open dashboard from template site",type:"dashboard_save_error"}},!0)},openSaveFailedAlertForTemplateDashboardUrl:function(e,a){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{app_id:a,description:"Error on open dashboard from template site",type:"dashboard_save_error"}},!0)},openSaveFailedAlertForPackageBuying:function(e){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"PUBLISH_ERROR_TITLE_LABEL",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["SAVE_PUBLISH_ERROR_OPTION_1","SAVE_PUBLISH_ERROR_OPTION_2"],helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_PUBLISH_ERROR_LEARN_MORE_LINK",helpLink:""})}}}),define("tpa/packagePicker/packagePickerUtils",["lodash","jquery","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi","tpa/services/tpaAlertsService"],function(e,t,a,i,n){"use strict";var o={BENEFITS:"tpaPanels.packagePicker.benefitsModal",CYCLES:"tpaPanels.packagePicker.cyclesModal",EXTERNAL:"tpaPanels.packagePicker.externalBenefitsModal",PACKAGES:"tpaPanels.packagePicker.packagePickerModal"};return{upgradeToPremiumAndClosePickerModal:function(t,i,o,s,r,p,d){if(t.documentServices.generalInfo.isFirstSave())n.openSaveFailedAlertForPackageBuying(t);else{var c=function(e,t,a,i,n,o){var s=e.selection.getSelectedComponentData(),r="tpa_"+n+"_ed_14";return e.documentServices.tpa.billing.getAppUpgradeUrl(s.applicationId,t,a,{referralAdditionalInfo:r,pp_type:i,premiumIntent:o})}(t,i,o,s,r,d);window.open(c);var l=t.selection.getSelectedComponentData();a.trackAppUpgrade(t,l.applicationId)}e.isFunction(p)&&p()},pickPickerForm:function(t,a,i,n){n=n||{};var s=e.assign(e.pick(a,["name","appIcon","colorSvgIcon","packages","features","price","upgradeBenefits","upgradeTitle","upgradedToYearly","appDefinitionId"]),e.pick(i,"vendorProductId"));if(s.packages=e.reject(a.packages,{id:"oneTime"}),e.get(i,"openPremiumPage")){s.panelName=o.EXTERNAL;var r={appDefId:i.appDefinitionId,referralAdditionalInfo:n.origin};return n.premiumIntent&&(r.premiumIntent=n.premiumIntent),s.upgradeUrl=t.documentServices.tpa.billing.getSiteUpgradeUrl(r),s}return"benefits"===a.billingPanelType?(s.panelName=o.BENEFITS,s):"cycles"===a.billingPanelType?(s.panelName=o.CYCLES,s):(s.panelName=o.PACKAGES,s)},sendBI:function(e,t,a){var n=e.selection.getSelectedComponentData(),o=e.documentServices.tpa.app.getData(n.applicationId),s={pp_type:t,pp_origin:a,app_site_id:o.instanceId,app_id:o.appDefinitionId};e.bi.event(i.events.CLICK_UPGRADE_IN_PP,s)},TYPE:o,BI_TYPE:{BENEFITS:"offering",CYCLES:"cycle",PACKAGES:"package",EXTERNAL:"external"}}}),define("tpa/packagePicker/packagePicker",["lodash","tpa/packagePicker/packagePickerUtils","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi","tpa/utils/tpaUtils","tpa/services/tpaAlertsService","experiment"],function(e,t,a,i,n,o,s){"use strict";function r(e,t){var a=e.documentServices.tpa.app.getDataByAppDefId(t);return n.selectComponentAndNavigateIfNeeded(e,a),a}var p=function(t,a,i,n,s){var r=e.partial(o.openSaveFailedAlertForUpgrade,t,i);t.saveManager.saveInBackground(function(){t.documentServices.tpa.appMarket.getDataAsync(i).then(function(e){a.isAsyncFlow=!0,d(t,i,e,s,a)})},r)},d=function(e,t,a,i,n){c(a)?e.documentServices.tpa.appMarket.getDataAsync(t).then(function(t){l(e,t,i,n)}):l(e,a,i,n)},c=function(t){return e.isUndefined(t)||t&&e.isUndefined(t.price)},l=function(i,n,o,s){var r=t.pickPickerForm(i,n,o,s),p=r.upgradeUrl;r.panelName!==t.TYPE.EXTERNAL||s.isAsyncFlow?i.panelManager.openPanel(r.panelName,e.assign(r,s),!0):(window.open(p),a.trackAppUpgrade(i,o.applicationId))},g=function(e,a,i){e.documentServices.tpa.appMarket.getDataAsync(a).then(function(n){var o=r(e,a),s=t.pickPickerForm(e,n,o);i(s.upgradeUrl)})},u=function(t,a){if(s.isOpen("se_tpaProvisionOnAdd"))return e.get(a,"notProvisioned");return!!t.documentServices.generalInfo.isFirstSave()||a&&(!t.documentServices.tpa.app.isAppProvisionedOnServer(a.applicationId)||t.documentServices.tpa.app.isPermissionsRevoked(a))};return{startUpgradeFlow:function(t,a,i,n){var c=i||!1;n=e.assign({isAsyncFlow:c},n);var l=t.documentServices.tpa.appMarket.getData(a),g=r(t,a);s.isOpen("se_tpaProvisionOnAdd")?u(t,g)?p(t,n,a,l,g):d(t,a,l,g,n):g&&g.demoMode?t.documentServices.tpa.provision.provisionAppDemoSave(g.applicationId,function(){p(t,n,a,l,g)},function(){o.openProvisionFailedAlert(t.panelManager.openPanel,a)}):u(t,g)?p(t,n,a,l,g):d(t,a,l,g,n)},isFullyUpgraded:function(a,i){var n=a.documentServices.tpa.appMarket.getData(i.appDefinitionId);if(n){var o=t.pickPickerForm(a,n,i),s=!!i.vendorProductId,r=!!n.upgradedToYearly;switch(o.panelName){case t.TYPE.BENEFITS:return s;case t.TYPE.CYCLES:return s&&r;case t.TYPE.PACKAGES:var p=s&&function(t,a){return e.last(t.packages).id===a.vendorProductId}(o,i);return p=p&&(r||function(t){return!e.last(t.packages).yearly.price}(o));case t.TYPE.EXTERNAL:return s;default:return!1}}return!0},getWixUpgradeUrl:function(e,t,a){var i=r(e,t);u(e,i)?e.saveManager.saveInBackground(function(){g(e,t,a)}):g(e,t,a)},isSaveSiteNeeded:u,upgradeToPremiumAndClosePickerModal:t.upgradeToPremiumAndClosePickerModal,sendBI:t.sendBI,BI_TYPE:t.BI_TYPE}}),define("tpa/services/dashboardAppService",["lodash","util","tpa/utils/tpaUtils","tpa/services/tpaAlertsService","tpa/superApps/superAppsConstants","experiment"],function(e,t,a,i,n,o){"use strict";function s(a,i,n,o){var s=void 0;s=r(a,i.appDefinitionId)?e.get(t,"serviceTopology.businessManagerUrl","")+"/external?appDefId="+i.appDefinitionId:e.get(i,"dashboardUrl",""),o=o||{};var p={url:s,deviceType:"desktop",applicationId:i.applicationId,origCompId:a.selection.getSelectedComponentId(),origin:o.origin,hash:o.state,bi:o.bi};return a.documentServices.tpa.app.url.getSettingsModalUrl(p,n)}function r(e,t){var a="true"===o.getValue("specs.wos.businessManagerPhase3"),i=e.documentServices.tpa.app.isDashboardSupportedInBusinessManager(t);return a&&i}return{appHasBusinessManager:r,getDashboardAppUrlAsync:function(t,n,o){var r=function(e){var t=e.selection.getSelectedComponentData();return e.documentServices.tpa.app.getData(t.applicationId)}(t),p=function(e){var t=e.selection.getSelectedComponentData();return e.documentServices.tpa.app.isHybrid(t.applicationId)}(t),d=function(e){return!e.documentServices.generalInfo.isFirstSave()}(t),c=t.documentServices.tpa.app.isAppProvisionedOnServer(r.applicationId),l=function(){o(!0===e.get(n,"editorVersion")?s(t,r):a.getAppInMyAccountUrl(t.documentServices.generalInfo.getMetaSiteId(),r.appDefinitionId))};p&&d&&c?l():d&&c?o(null):t.saveManager.saveInBackground(l,function(){i.openSaveFailedAlertForTemplateDashboardUrl(t,r.appDefinitionId),o(null)})},getDashboardUrl:s,getEditorGfppData:function(e){var a=e.selection.getSelectedComponentData();if(a){var i=e.documentServices.tpa.app.getData(a.applicationId),n=e.documentServices.tpa.appMarket.getData(i.appDefinitionId);if(n&&n.editorGfpp)return n.editorGfpp}return{upgradeText:t.translate("tpa_package_picker_upgrade_title"),openInDashboardText:t.translate("tpa_open_dashboard")}}}}),define("tpa/services/tpaAddRemoveDSService",["lodash","util","core","constants","tpa/utils/tpaUtils","tpa/services/tpaAlertsService","experiment"],function(e,t,a,i,n,o,s){"use strict";var r=[],p=function(t,a,i){if(!e.includes(r,a)){r.push(a),i.onError=e.partial(d,t,a);var n=i.callback||e.noop;i.callback=function(i){r=e.without(r,a),i.comp&&t.components.is.exist(i.comp)&&t.selection.selectComponentByCompRef(i.comp),c(t,a,"adding a tpa widget to stage",e.partial(n,i))};var o=t.documentServices.tpa.widget.add(a,i);return l(t),o}},d=function(t,a){r=e.without(r,a),o.openProvisionFailedAlert(t.panelManager.openPanel,a)},c=function(t,a,n,p,d,c){s.isOpen("se_santaMembers")?e.isEmpty(r)?(t.history.add(n,function(e,t){if(e||t)return{actionType:i.DS_ACTIONS.ADD_PAGE,currentPage:e,nextPage:t}}(d,c)),t.saveManager.saveInBackground(p,function(){o.openProvisionFailedAlert(t.panelManager.openPanel,a)})):p():s.isOpen("se_tpaProvisionOnAdd")?(t.history.add(n),t.saveManager.saveInBackground(p,function(){o.openProvisionFailedAlert(t.panelManager.openPanel,a)})):(t.history.add(n),p())},l=function(e){s.isOpen("dontCloseAddPanelOnAdd")||e.panelManager.closePanelByName("addPanelInfra.addPanel")},g=function(e,t,a){e.documentServices.generalInfo.isFirstSave()&&s.isOpen("se_santaMembers")?e.saveManager.saveInBackground(a,function(){o.openProvisionFailedAlert(e.panelManager.openPanel,t)}):a()};return{addWidget:function(t,a,i){g(t,a,e.partial(p,t,a,i))},addWidgetSync:p,addSection:function(t,a,i){g(t,a,function(){if(e.includes(r,a))e.get(i,"callback")&&i.callback({page:{id:t.documentServices.pages.getFocusedPageId()}});else{r.push(a);var n=t.documentServices.pages.getFocusedPageId(),o=(i=i||{}).callback||e.noop;i.callback=function(i){r=e.without(r,a),c(t,a,"adding a tpa section to stage",e.partial(o,i),n,e.get(i,"page.id"))},t.documentServices.tpa.section.add(a,i,e.partial(d,t,a)),l(t)}})},addSubSection:function(t,a,i){g(t,a,function(){var n=i.callback||e.noop;i.callback=function(i){c(t,a,"adding sub section",e.partial(n,i))},t.documentServices.tpa.section.addSubSection(a,i),l(t)})},addMultiSection:function(t,a,i){g(t,a,function(){var n=i.callback||e.noop;i.callback=function(i){c(t,a,"adding multi section",e.partial(n,i))},t.documentServices.tpa.section.addMultiSection(a,i),l(t)})},addPlatform:function(t,a,i){g(t,a,function(){if(!e.includes(r,a)){r.push(a);var n=t.documentServices.pages.getFocusedPageId();t.documentServices.platform.provision(a,i).then(function(){r=e.without(r,a);var o=t.documentServices.pages.getFocusedPageId();c(t,a,"adding a platform app to stage",i.callback||e.noop,n,o)},e.partial(d,t,a)),l(t)}})},deleteWidget:function(e,t){e.documentServices.tpa.widget.delete(t),e.panelManager.closePanelByName("tpa.compPanels.tpaSettings")},deleteSection:function(e,a,i){e.documentServices.tpa.section.delete(a),e.bi.reportBI(t.bi.events.COMPONENT_REMOVED,i),e.components.reset()},clearAppsCurrentlyInstalling:function(){r=[]}}}),define("tpa/services/tpaStyleService",["lodash"],function(e){"use strict";var t=null,a={},i=function(i){if(a[t]){var o=[],s=[],r=t;e.forEach(a[r],function(e){o.push(e.data),s.push(e.callback)}),delete a[r],t=null,n(i,r,o,s)}else t=null},n=function(n,o,s,r){if(t===o)return a[o]||(a[o]=[]),void a[o].push({data:s,callback:r});n.documentServices.tpa.style.setStyleParam(o,s,function(t){!function(t,a){e.isArray(t)?e.forEach(t,function(e){e&&e(a)}):t&&t(a)}(r,t)}),n.documentServices.waitForChangesApplied(i.bind(null,n)),t=o};return{setStyleParam:n}}),define("tpa/appMarket/utils/appMarketUtils",["lodash","util","helpIds","tpa/bi/bi","coreUtilsLib","stateManagement"],function(e,t,a,i,n,o){"use strict";var s=o.panels.logic,r=t.serviceTopology.htmlEditorRootUrl?t.serviceTopology.htmlEditorRootUrl.replace(/html\/editor\/?/,""):"http://editor.wix.com/",p=function(){var a={};return e.forEach(["openAppDefId","appDefinitionId"],function(e){a[e]=t.url.getParameterByName(e)}),a.tests=function(){var e=t.url.parseUrlParams(window.location.search);return(e=e&&e.amexperiment)||""}(),a},d=function(e){return"number"==typeof e&&(e=e.toString()),e};return{openAppMarketModal:function(t,a,i){var n="tpa.compModals."+a;i.width=d(i.width),i.height=d(i.height);var o=e.pick(i,["title","width","height","closeModalBiEvent","closeModalBiParams","id"]);o.panelName=n,o.iframeUrl=i.url,o.shouldTranslate=i.shouldTranslateTitle,t(n,o,!0)},openAppMarketModalWithAppDefinitionId:function(e,t,a){var i="tpa.compModals."+t;e(i,{panelName:i,iframeUrl:a.url,appDefinitionId:a.appDefinitionId,onClose:a.onClose},!0)},closeAppMarketModal:function(e,t){e("tpa.compModals."+t)},closeAppMarketModalById:function(t,a){var i=function(t,a){var i=t.panelManager.getOpenPanels();return e.find(i,{props:{id:a}})}(t,a);i&&(t.store.dispatch(s.closePanelByPropKey("id",i.props.id)),i.props.closeModalBiEvent&&t.bi.event(i.props.closeModalBiEvent,i.props.closeModalBiParams))},closeAppMarket:function(e){e("tpa.compPanels.appMarketPanel")},openAppMarketHelp:function(e){e.panelManager.openHelpCenter(a.EXTERNAL.APP_MARKET,null,{learn_more:!1,origin:"panel",panel_name:"tpa.compPanels.appMarketPanel"}),e.bi.event(i.events.MARKET_HELP_CLICK)},shouldOpenAppMarketTab:function(){return 0===t.url.getParameterByName("openpanel").indexOf("market")},getAppMarketUrlParams:p,getAppMarketOpenPanelUrlParams:function(){var a=t.url.getParameterByName("openpanel"),i={};if(!e.isEmpty(a)){var n=a.split(":"),o=p();switch(n.length){case 1:i.appDefinitionId=o.appDefinitionId,i.openAppDefId=o.openAppDefId;break;case 2:i.query=n[1];break;case 3:"Cat"===n[1]?i.categorySlug=n[2]:"appDefId"===n[1]&&(i.openAppDefId=n[2]);break;default:i.query=""}}return i},getAppMarketPersistedUserPrefs:function(e){return e.getUserPreferences().site.get("app-market")||{}},setAppMarketPersistedUserPrefs:function(e,t){return e.getUserPreferences().site.set("app-market",t)||!1},getAppMarketSessionUserPrefs:function(e){return e.getUserPreferences().session.get("app-market")||{}},setAppMarketSessionUserPrefs:function(e,t){return e.getUserPreferences().session.set("app-market",t)||!1},origin:function(){return n.urlUtils.origin()},getAppMarketTargetOrigin:function(){return r}}}),define("tpa/services/tpaHelpService",["lodash"],function(e){"use strict";var t={SETTINGS_MODAL:"settings_modal",SETTINGS:"settings",WIDGET:"widget"};return{getHelpId:function(a,i,n,o){return new Promise(function(s,r){var p="";e.isEmpty(i)?r(p):a.documentServices.tpa.appMarket.getDataAsync(i).then(function(i){var r=e.find(i.widgets,{widgetId:n}),d=e.get(r,"settings.helpId","");o===t.SETTINGS_MODAL?p=e.get(i,"dashboard.helpId",d):n&&(p=o===t.SETTINGS?d:a.isMobileEditor()?e.get(r,"mobileHelpId",""):e.get(r,"helpId","")),s(p)},r)})},HELP_END_POINTS:t}}),define("tpa/services/mediaDialogService",["lodash","tpa/utils/mediaDialogHandlerUtils"],function(e,t){"use strict";return{openMediaDialogByPayloadParsingMethod:function(a,i,n,o){var s=a.mediaServices.mediaManager,r=t.convertMediaType(i.data.mediaType,s),p=i.data.callOnCancel,d={multiSelect:i.data.multiSelection,callback:function(t){var a=void 0;e.isEmpty(t)?p&&(a={wasCancelled:!0}):a=n(t),a&&o(a)}},c=e.get(i,["data","options","imageAnalysis"]);c&&(d.imageAnalysis=c),s.open(r,d)}}}),define("tpa/services/pendingAppsService",["lodash","stateManagement","tpa/appMarket/utils/appMarketUtils"],function(e,t,a){"use strict";var i=function(t){return e.size(t.documentServices.tpa.pending.getPendingApps())},n=function(e){e.store.dispatch(t.leftBar.actions.setNotificationsCount("tpa.compPanels.appMarketPanel",i(e)))};return{getPendingApps:function(t){var i=function(t){return function(t,i){var n=a.getAppMarketPersistedUserPrefs(t);if(n){var o=n.removedPendingApps||[],s=e(i).keyBy("appDefinitionId").omit(o).value();i=e.values(s)}return i}(t,t.documentServices.tpa.getPendingApps())}(t),n=function(e){return e.documentServices.tpa.getPremiumPendingApps()}(t);return e.union(i,n)},getPendingAppsCount:i,updateNotification:n,dismiss:function(e,t){e.documentServices.tpa.pending.dismiss(t),n(e)},add:function(e,t){e.documentServices.tpa.pending.add(t),n(e)}}}),define("tpa/services/tpaAppInstallingService",["lodash","tpa/bi/bi","experiment"],function(e,t,a){"use strict";return{prePageAppInstalling:function(e,i,n){a.isOpen("se_santaMembers")&&n&&(e.panelManager.openPanel("panels.focusPanels.pageAppInstallingPanel",{appName:i,isInstalling:!0}),e.bi.event(t.events.PLATFORM_APP_TRY_TO_INSTALL,{app_name:i}),e.documentServices.initAutosave({enabled:!1}))},onPageAppInstallingCompleted:function(e,a){e.panelManager.updatePanelProps("panels.focusPanels.pageAppInstallingPanel",{isInstalling:!1}),e.bi.event(t.events.PLATFORM_APP_ADDED,{app_name:a}),e.documentServices.initAutosave({enabled:!0})}}}),define("tpa/appMarket/services/appMarketTabService",["lodash","util","tpa/appMarket/utils/appMarketUtils"],function(e,t,a){"use strict";var i=function(t,i){(t=t||{}).urlParams=t.urlParams||{};var n=a.getAppMarketOpenPanelUrlParams();e.merge(t.urlParams||{},n),i("tpa.compPanels.appMarketPanel",t)};return{openAppMarketTab:i,closeAppMarketTab:function(e){e("tpa.compPanels.appMarketPanel")},openAppMarketTabFromUrlParamIfNeeded:function(e){a.shouldOpenAppMarketTab()&&i({urlParams:{openMarketOrigin:t.url.getParameterByName("referral_info")}},e)}}}),define("tpa/addPanelData/addPanelService",["lodash","experiment","addPanelDataConsts"],function(e,t,a){"use strict";var i={1024:a.CATEGORIES_ID.GALLERY,1025:a.CATEGORIES_ID.VIDEO,1026:a.CATEGORIES_ID.MUSIC,1027:a.CATEGORIES_ID.SOCIAL,1028:a.CATEGORIES_ID.CONTACT,1029:a.CATEGORIES_ID.IMAGE,1030:a.CATEGORIES_ID.OTHER,1031:a.CATEGORIES_ID.BUTTON,1032:a.CATEGORIES_ID.BOX,1034:a.CATEGORIES_ID.MENU,1035:a.CATEGORIES_ID.SHAPE,1036:a.CATEGORIES_ID.TEXT,1037:a.CATEGORIES_ID.LIST,1038:a.CATEGORIES_ID.BLOG,2558:a.CATEGORIES_ID.MEMBERS,2559:a.CATEGORIES_ID.MEMBERS_WELCOME,2568:a.CATEGORIES_ID.NEW_BLOG,2569:a.CATEGORIES_ID.NEW_BLOG_WELCOME,1039:a.CATEGORIES_ID.STORE,1153:a.CATEGORIES_ID.STORE},n={},o=void 0,s=function(e,t,a){o=t,e.documentServices.tpa.appMarket.getRelatedApps(function(e){r(e),a()})},r=function(t){e.forEach(t,function(t){var a=e.intersection(t.categories,e.keys(i));e.forEach(a,function(e){p(e,t)})})},p=function(e,t){n[e]=n[e]?n[e]:[],n[e].push(t)},d=function(t){return e.sortBy(n[t],function(e){return e.weights?-e.weights.categories[t]:0})};return{init:s,initRelatedApps:r,getApps:function(){return n},getCategories:function(){var s=e(i).pick(e.keys(n)).values().xor(o).value();return t.isOpen("se_vector_image")&&s.push(a.CATEGORIES_ID.VECTOR_SHAPE),s},getCategoryApps:function(t,a,i){if(e.isEmpty(n))s(t,function(){i(d(a))});else{var o=d(a);i(o)}},getCategoryNumber:function(e){switch(e){case a.CATEGORIES_ID.GALLERY:return"1024";case a.CATEGORIES_ID.VIDEO:return"1025";case a.CATEGORIES_ID.MUSIC:return"1026";case a.CATEGORIES_ID.SOCIAL:return"1027";case a.CATEGORIES_ID.CONTACT:return"1028";case a.CATEGORIES_ID.IMAGE:return"1029";case a.CATEGORIES_ID.OTHER:return"1030";case a.CATEGORIES_ID.BUTTON:return"1031";case a.CATEGORIES_ID.BOX:return"1032";case a.CATEGORIES_ID.MENU:return"1034";case a.CATEGORIES_ID.SHAPE:case a.CATEGORIES_ID.VECTOR_SHAPE:return"1035";case a.CATEGORIES_ID.TEXT:return"1036";case a.CATEGORIES_ID.LIST:return"1037";case a.CATEGORIES_ID.BLOG:return"1038";case a.CATEGORIES_ID.MEMBERS:return"2558";case a.CATEGORIES_ID.MEMBERS_WELCOME:return"2559";case a.CATEGORIES_ID.NEW_BLOG:return"2568";case a.CATEGORIES_ID.NEW_BLOG_WELCOME:return"2569";case a.CATEGORIES_ID.STORE:return"1153";case a.CATEGORIES_ID.STORE+"_post":return"1039"}}}}),define("tpa/addPanelData/tpaAddPanelAppBox.rt",["react","lodash","baseUI"],function(e,t,a){"use strict";return function(){return e.createElement("div",{className:"box-app-wrapper",onMouseEnter:function(){this.onMouseEnter(this.props.index)}.bind(this),onMouseLeave:function(){this.onMouseLeave(this.props.index)}.bind(this),onClick:this.onClick},e.createElement("a",function(e,a){var i=t.assign({},e,a);return e.hasOwnProperty("style")&&(i.style=t.defaults(i.style,e.style)),e.hasOwnProperty("className")&&a.hasOwnProperty("className")&&(i.className=a.className+" "+e.className),i}({onMouseDown:this.onMouseDown,className:"box-app"},{style:{margin:"auto",top:"0",bottom:"0"},appDefinitionId:this.props.box.appDefinitionId}),e.createElement("div",{style:{backgroundImage:"url("+(this.props.box.colorSvgIcon||this.props.box.appIcon)+")",width:"100%",height:"100%",backgroundSize:"contain",borderRadius:"5px"}})),e.createElement("div",{className:"content"},e.createElement("div",{className:"title ellipsis"},this.props.box.name),e.createElement("label",{className:"ellipsis"},this.props.box.relatedAppsTeaser)),e.createElement("a",{onClick:this.onPlusClick.bind(this,this.props.index)},e.createElement("span",{className:"plus-tooltip"},e.createElement(a.tooltip,{value:"tpa_add_panel_add_to_site",alignment:a.uiConstants.TOOLTIP.ALIGNMENT.TOP},e.createElement("div",{},e.createElement(a.symbol,{className:"plus",name:"plusBig"}))))))}}),define("tpa/addPanelData/tpaAddPanelAppBox",["reactDOM","react","lodash","core","experiment","tpa/appMarket/utils/appMarketUtils","tpa/addPanelData/addPanelService","tpa/appMarket/services/appMarketTabService","tpa/bi/bi","tpa/constants/constants","tpa/utils/tpaUtils","tpa/services/tpaAddRemoveDSService","tpa/services/tpaAppInstallingService","tpa/addPanelData/tpaAddPanelAppBox.rt"],function(e,t,a,i,n,o,s,r,p,d,c,l,g,u){"use strict";return t.createClass({displayName:"tpaAddPanelApp",mixins:[i.mixins.editorAPIMixin],render:u,propTypes:{referralInfo:t.PropTypes.string.isRequired,category:t.PropTypes.string,box:t.PropTypes.object,onItemDrag:t.PropTypes.func},addApp:function(e,t,i,s,r,p){var d=this,c=this.getEditorAPI(),u=c.documentServices.tpa.app.isInstalled(e,!0);if(u&&p){var m=c.documentServices.pages.getFocusedPageId(),h=c.documentServices.tpa.app.getFirstAppCompPageId(e);h&&h.pageId!==m&&c.pages.navigateTo(h.pageId),c.documentServices.tpa.appMarket.getDataAsync(e).then(function(t){c.panelManager.openPanel("tpaPanels.message.sectionAlreadyInstalled",{appName:a.get(t,"name"),appIcon:a.get(t,"colorSvgIcon")||a.get(t,"appIcon"),appDefId:e})})}else if(t||u){var f=c.documentServices.pages.getFocusedPageId();if(p)c.documentServices.tpa.appMarket.getDataAsync(e).then(function(i){var o=a.get(i,"name");g.prePageAppInstalling(c,o,!a.get(i,"doNotShowPageAddedPanel")),l.addSection(c,e,{callback:function(p){p.page&&c.pages.navigateTo(p.page.id,function(){var e=c.documentServices.tpa.section.getSectionRefByPageId(p.page.id);c.selection.selectComponentByCompRef(e)}),a.get(i,"doNotShowPageAddedPanel")||(n.isOpen("se_santaMembers")?g.onPageAppInstallingCompleted(c,o):c.panelManager.openPanel("tpaPanels.message.newPageAdded",{appName:a.get(i,"name"),appDefId:e},n.isOpen("photographyPromotionFixed")||n.isOpen("photographyPromotionRotation"))),d.reportTpaAddedBiEvent(e,t,s,u,f,p.sectionId,r)}})});else{var y={pageId:f};(y=i?a.merge(y,{layout:i}):y).callback=function(a){d.reportTpaAddedBiEvent(e,t,s,u,y.pageId,a.comp.id,r)},l.addWidget(c,e,y)}}else c.documentServices.tpa.appMarket.getDataAsync(e).then(function(t){var n=c.documentServices.tpa.appMarket.getPermissionsUrl(this.getAppMarketParams(a.get(t,"slug")),e);n=i?n.concat("&x="+i.x+"&y="+i.y):n,o.openAppMarketModal(c.panelManager.openPanel,"appMarketPermissionsModal",{url:n})}.bind(this))},onMouseEnter:function(e){this.setState({hover:!0,selected:e})},onMouseLeave:function(){this.setState({hover:!1})},onMouseDown:function(t){var i=this;if(a.isFunction(this.props.onItemDrag)){var n=e.findDOMNode(this).getBoundingClientRect(),o=a.pick(a.merge({},n,{top:n.top+30,left:n.left+41,width:60,height:60}),["left","top","width","height"]),s=void 0,r=void 0;this.props.box.hasSection?(s=980,r=500):(s=this.props.box.widgets[0].defaultWidth,r=this.props.box.widgets[0].defaultHeight),this.props.onItemDrag(t,{rect:o,onDrop:function(e,t){i.onMouseDrop(e,t)},structure:{layout:{width:s,height:r}},selectedApp:this.props.box})}},onMouseDrop:function(e,t){var a=this.getEditorAPI(),i=t.selectedApp.appDefinitionId,n="Wix"===t.selectedApp.by,o=this.isFirstAdd(a,i),s=t.selectedApp.hasSection;this.reportTpaAddClickBiEvent(i,n,"drag",o),this.addApp(i,n,{width:t.structure.layout.width,height:t.structure.layout.height,x:e.x,y:e.y},"drag",o,s)},onClick:function(e){if(!this.svgClicked(e)){var t=this.getEditorAPI(),a=this.props.box,i=a.appDefinitionId;this.openInfoModal(a);var n={app_id:i,origin:this.props.referralInfo,category:this.getCategory(),section:"related apps",component_type:c.isBlog(i)?"blog":"tpa"};t.bi.event(p.events.OPEN_MODAL_CLICK,n),t.panelManager.closePanelByName("rEditor.addPanel")}},svgClicked:function(e){return"svg"===e.target.tagName||"circle"===e.target.tagName||"path"===e.target.tagName},onPlusClick:function(e,t){if(this.svgClicked(t)){var a=this.getEditorAPI(),i=this.props.box,n="Wix"===i.by,o=i.appDefinitionId,s=i.hasSection,r=this.isFirstAdd(a,o);this.reportTpaAddClickBiEvent(o,n,"direct_add",r),this.addApp(o,n,null,"direct_add",r,s)}},getAppMarketParams:function(e){return{origin:o.origin(),openMarketOrigin:this.props.referralInfo,referralInfoCategory:this.getCategory(),section:"related_apps",appName:e}},openInfoModal:function(e){var t=this.getEditorAPI(),i=t.documentServices.tpa.appMarket.getInfoUrl(this.getAppMarketParams(a.get(e,"slug")),e.slug);o.openAppMarketModal(t.panelManager.openPanel,"appMarketAppModal",{url:i})},reportTpaAddedBiEvent:function(e,t,i,n,o,s,r){var d=this.getEditorAPI(),c=this.getBasicBiParams(d,e,t,i,r),l=d.documentServices.tpa.app.getDataByAppDefId(e),g=d.documentServices.generalInfo.isFirstSave()?d.documentServices.generalInfo.getMetaSiteId():"",u={widget_id:"",app_site_id:l.instanceId,instance_id:s,search_term:"",search_result_position:"",referral_info_category:this.getCategory(),referral_info:this.props.referralInfo,template_guid:g,modal_tab_name:"",page_id:o};c=a.assign(c,u),d.bi.event(p.events.TPA_ADDED,c)},reportTpaAddClickBiEvent:function(e,t,a,i){var n=this.getEditorAPI();c.bi.reportBIOnAppIntent(n,p.events.APP_INTENT,e,d.BI.initiator.EDITOR,d.BI.type.ADD_APP);var o=this.getBasicBiParams(n,e,t,a,i);n.bi.event(p.events.TPA_ADD_CLICK,o)},getBasicBiParams:function(e,t,a,i,n){return{adding_method:i,section:"related_apps",category:this.getCategory(),origin:this.props.referralInfo,app_id:t,is_first:n?1:0,is_permissions_app:a?0:1}},isFirstAdd:function(e,t){return!e.documentServices.tpa.app.isInstalled(t,!0)},getCategory:function(){return this.props.category}})}),define("tpa/addPanelData/tpaAddPanelSection.rt",["react","lodash","util","baseUI","tpa/addPanelData/tpaAddPanelAppBox"],function(e,t,a,i,n){"use strict";return function(){return e.createElement.apply(this,["div",{category:this.getCategory()},t.map(this.getAppBoxList(),function(t,a){return e.createElement("div",{key:t.appDefinitionId},e.createElement(n,{box:t,index:a,category:this.props.props.category,onItemDrag:this.props.onItemDrag,referralInfo:this.props.parentType}))}.bind(this)),e.createElement("div",{className:"more"},e.createElement(i.symbol,{name:"market"}),e.createElement("span",{},a.translate("tpa_add_panel_still_havent_found")),e.createElement("a",{onClick:function(){this.openCategory()}.bind(this)},a.translate("tpa_add_panel_browse_app_market")),e.createElement("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}}))])}}),define("tpa/addPanelData/tpaAddPanelSection",["react","lodash","core","tpa/addPanelData/addPanelService","tpa/appMarket/services/appMarketTabService","tpa/addPanelData/tpaAddPanelSection.rt","util","tpa/services/pendingAppsService"],function(e,t,a,i,n,o,s,r){"use strict";return e.createClass({displayName:"tpaAddPanelSection",mixins:[a.mixins.editorAPIMixin],render:o,getAppBoxList:function(){return this.appBoxList},componentWillMount:function(){var e=this,t=this.getEditorAPI();i.getCategoryApps(t,this.getCategoryNum(),function(t){e.appBoxList=t}),this.referralInfo=this.props.parentType.toLowerCase()},openCategory:function(){var e=this.getEditorAPI();e.panelManager.closePanelByName("rEditor.addPanel");var t={referralInfoCategory:this.getCategory(),openMarketOrigin:this.referralInfo,section:"related_apps"};n.openAppMarketTab({urlParams:t},e.panelManager.openPanel),e.bi.event(s.bi.events.OPEN_MARKET_CLICK,{referral_info:this.referralInfo,referral_info_category:this.getCategory(),num_pending_apps:r.getPendingAppsCount(this.getEditorAPI())})},getCategory:function(){return this.props.props.category},getCategoryNum:function(){return this.props.props.categoryNum}})}),define("tpa/addPanelData/section",["tpa/addPanelData/tpaAddPanelSection","tpa/addPanelData/addPanelService","addPanelDataConsts","coreUtilsLib"],function(e,t,a,i){"use strict";var n=function(t,n){var s=i.objectUtils.cloneDeep(a.SECTIONS_STRUCTURE.GENERAL_SECTION_STRUCTURE);return s.help.hide=!1,s.help.title="",s.help.text="add_section_info_text_relatedapps_general",s.teaser.hide=!0,s.props.class="tpaSection",s.props.template=e,s.props.category=t,s.props.categoryNum=n||o(t),"store"===t?s.help.text="1153"===n?"add_section_info_text_relatedapps_store":"add_section_info_text_relatedapps_store2":"blog"===t&&(s.help.text="add_section_info_text_relatedapps_blog"),s},o=function(e){return t.getCategoryNumber(e)};return{registerAddPanelSection:function(e){var a=t.getCategories();e.addPanel.registerToAddSectionAtTheEndOfCategory(a,function(e){return[n(e,null)]})},getSectionStructure:n}}),define("tpa/superApps/provisionService",["tpa/bi/bi","tpa/utils/tpaUtils","tpa/services/tpaAlertsService"],function(e,t,a){"use strict";var i=function(e,t){a.openSaveFailedAlertForDashboardUrl(e,t.appDefinitionId)};return{preSaveProvision:function(e,t){var i=function(){a.openProvisionFailedAlert(e.panelManager.openPanel,t.appDefinitionId)};return new Promise(function(a){e.documentServices.tpa.provision.provisionAppDemoSave(t.applicationId,a,i)})},save:function(e,t){return new Promise(function(a){e.saveManager.saveInBackground(a,i.bind(null,e,t))})},onSaveError:i}}),define("tpa/services/tpaSettingsModalService",["lodash","tpa/utils/tpaUtils","tpa/constants/constants","tpa/services/tpaHelpService"],function(e,t,a,i){"use strict";var n=function(e){return"number"==typeof e&&(e=e.toString()+"px"),e};return{settingsOpenModal:function(o,s,r){var p=a.TPA_SETTING_MODAL,d=void 0,c=void 0,l=e.get(s,"data.appDefinitionId");l?d=o.documentServices.tpa.app.getDataByAppDefId(l):(c=o.selection.getSelectedComponentData(),d=o.documentServices.tpa.app.getData(c.applicationId));var g={url:s.data.url,deviceType:s.deviceType,applicationId:d.applicationId,origCompId:o.selection.getSelectedComponentId(),bi:s.data.bi},u=e.clone(s.data);u.width=n(u.width),u.height=n(u.height),u.onClose=r,function(e,a){var i=t.getOpenedPanel(e.panelManager,a);i&&e.panelManager.closePanelByName(i.props.panelName)}(o,p),d.isWixTPA?(u.isBareMode&&delete u.title,u.shouldNotCloseOnBlur=u.shouldNotCloseOnBlur||e.get(u,"options.shouldNotCloseOnBlur",!1)):(u.isBareMode=!1,u.shouldNotCloseOnBlur=!1);var m=o.documentServices.tpa.getSettingsModalParams(g,u)||{},h=e.get(c,"widgetId")||e.get(o.documentServices.tpa.app.getMainSectionWidgetData(d),"widgetId");i.getHelpId(o,d.appDefinitionId,h,i.HELP_END_POINTS.SETTINGS_MODAL).then(function(e){m.appDefinitionId=d.appDefinitionId,m.helpId=e,m.widgetId=h,o.panelManager.openPanel(p,m,!0)})}}}),define("tpa/superApps/superApps",["lodash","util","stateManagement","superAppMenuInfra","tpa/utils/tpaUtils","tpa/appMarket/services/appMarketTabService","tpa/appMarket/utils/appMarketUtils","tpa/constants/constants","tpa/addPanelData/section","tpa/bi/bi","tpa/superApps/superAppsConstants","tpa/services/tpaAddRemoveDSService","tpa/packagePicker/packagePicker","tpa/services/tpaHelpService","tpa/superApps/provisionService","tpa/services/tpaStyleService","tpa/services/tpaAlertsService","tpa/services/dashboardAppService","tpa/services/tpaSettingsModalService","tpa/services/tpaAppInstallingService","experiment"],function(e,t,a,i,n,o,s,r,p,d,c,l,g,u,m,h,f,y,P,v,I){"use strict";var _=void 0,S=["dontStretch","styleId","parentContainerRef"],A=function(i,o,s,p){p=p||{};var d=r.TPA_SETTING_MODAL,c=n.getOpenedPanel(_.panelManager,d);c&&_.panelManager.closePanelByName(c.props.panelName);var l=t.guidUtils.getUniqueId(),g={width:o,height:s,title:p.title||"",isBareMode:p.isBareMode||!1,options:p.options,compId:l},m=y.getDashboardUrl(_,i,l,p),h=y.appHasBusinessManager(_,i.appDefinitionId);if(m&&h&&(_.store.dispatch(a.tpa.logic.addAppDefIdsToRefreshOnDashboardClose([i.appDefinitionId])),g.isBareMode="true"===I.getValue("specs.wos.editorHeader")||g.isBareMode),m){g.url=m,g.onClose=m&&h?e.partial(D,p.onClose):p.onClose,g.shouldNotCloseOnBlur=p.shouldNotCloseOnBlur;var f=p.leavePanelsOpen||!1;u.getHelpId(_,i.appDefinitionId,p.widgetId,u.HELP_END_POINTS.SETTINGS_MODAL).then(function(e){g.appDefinitionId=i.appDefinitionId,g.helpId=e,g.widgetId=p.widgetId,n.selectComponentAndNavigateIfNeeded(_,i,function(){_.panelManager.openPanel(d,g,f)})})}},D=function(t){var i=_.store.getState(),n=a.tpa.selectors.getAppIdsToRefreshAfterDashboardClose(i);e.forEach(n,w),_.store.dispatch(a.tpa.logic.setAppDefIdsToRefreshOnDashboardClose([])),t&&t()},w=function(e){if(e){var t=_.documentServices.tpa.app.getRenderedReactCompsByApplicationId(e);_.documentServices.tpa.app.refreshApp(t)}},b=function(t,a,i,n){var o=e.merge({widgetId:t,layout:a},e.pick(i,S));return o.callback=function(a){_.bi.tryFlushingConditionedEvents(),T(a.comp,i);var o=_.documentServices.tpa.app.getDataByAppDefId(n);E(o,a.comp,t,e.get(i,"presetId")),e.get(i,"cb")&&i.cb(a.comp)},o},T=function(t,a){var i=a&&a.presetId;e.isString(i)&&!e.isEmpty(i)&&_.documentServices.tpa.data.set(t,"presetId",i,_.documentServices.tpa.data.SCOPE.COMPONENT)},E=function(e,t,a,i){var n={app_id:e.appDefinitionId,app_site_id:e.instanceId,instance_id:t.id,widget_id:a,page_id:t.pageId,preset_id:i};_.bi.event(d.events.EXTENSION_ADDED,n)},C=function(e,t,a){var i={app_id:e.appDefinitionId,app_site_id:e.instanceId,instance_id:t.sectionId,widget_id:a,page_id:t.page.id};_.bi.event(d.events.EXTENSION_ADDED,i)},M=function(e,t){return p.getSectionStructure(e,t,"vertical_button")},k=function(t){P.settingsOpenModal(_,{data:e.omit(t,"autoProvision")})},O=function(e,t){n.bi.reportBIOnAppIntent(_,d.events.APP_INTENT,t,r.BI.initiator.EDITOR,e)},N=function(){var t=_.selection.getSelectedComponentData(),a=_.documentServices.tpa.app.getData(e.get(t,"applicationId"));return e.get(a,"appDefinitionId")};return{init:function(e){_=e},isPremium:function(e){return _.documentServices.tpa.app.isPremiumByAppDefinitionId(e)},getExtensions:function(e,t){t&&_.documentServices.tpa.appMarket.getDataAsync(e).then(function(e){t(_.documentServices.tpa.app.getExtensionsWidgets(e))})},openDashboardUrl:function(t,a,i,o,s){o=o||{};var p=e.get(s,"type")||r.BI.type.GFPP_MANAGE;O(p,t),o.bi=n.bi.getAppIntentBiParamsToAddToUrl(_,t,p);var d=_.documentServices.tpa.app.getDataByAppDefId(t);d&&(I.isOpen("se_tpaProvisionOnAdd")?d.notProvisioned?_.saveManager.saveInBackground(e.partial(A,d,a,i,o),e.partial(f.openSaveFailedAlertForDashboardUrl,_,d.appDefinitionId)):A(d,a,i,o):d.demoMode?m.preSaveProvision(_,d).then(e.partial(m.save,_,d)).then(e.partial(A,d,a,i,o)):!_.documentServices.generalInfo.isFirstSave()&&_.documentServices.tpa.app.isAppProvisionedOnServer(d.applicationId)?A(d,a,i,o):m.save(_,d).then(e.partial(A,d,a,i,o)))},openAppMarketForAppDef:function(e){var t={urlParams:{openMarketOrigin:c.getMarketOpenOriginForBi(e),openAppDefId:e}};o.openAppMarketTab(t,_.panelManager.openPanel)},refreshAppCompsForAppDefId:function(e){var t=_.documentServices.tpa.app.getDataByAppDefId(e);w(t.applicationId)},openAppMarketInfoModal:function(e){var t=_.documentServices.tpa.appMarket.getInfoUrl({origin:s.getAppMarketTargetOrigin()},e);s.openAppMarketModal(_.panelManager.openPanel,"appMarketAppModal",{url:t})},registerOnAppInstalled:function(e,t){_.documentServices.tpa.app.registerOnInstalled(e,t)},registerOnAppDeleted:function(e,t){_.documentServices.tpa.app.registerOnDeleted(e,t)},addApp:function(t,a){n.bi.reportBIOnAppIntent(_,d.events.APP_INTENT,t,r.BI.initiator.EDITOR,r.BI.type.ADD_APP),_.documentServices.tpa.appMarket.getDataAsync(t).then(function(i){var n=e.get(i,"name");v.prePageAppInstalling(_,n,!0);var o=(a=a||{}).callback||e.noop;a.callback=function(e){I.isOpen("se_santaMembers")&&v.onPageAppInstallingCompleted(_,n),o(e)},l.addSection(_,t,a)})},addWidget:function(e,t,a,i){n.bi.reportBIOnAppIntent(_,d.events.APP_INTENT,e,r.BI.initiator.EDITOR,r.BI.type.ADD_APP);var o=b(t,a,i,e);l.addWidget(_,e,o)},addSection:function(e,t){var a=_.documentServices.tpa.app.getDataByAppDefId(e),i=a.widgets[t];i&&n.isMultiSectionInstanceEnabled(a,i.widgetId)&&(n.bi.reportBIOnAppIntent(_,d.events.APP_INTENT,e,r.BI.initiator.EDITOR,r.BI.type.ADD_APP),l.addMultiSection(_,a.appDefinitionId,{pageId:i.appPage.id,callback:function(e){_.pages.navigateTo(e.page.id),C(a,e,i.widgetId)}}))},superAppsConstants:c,isInstalled:function(e){var t=_.documentServices.tpa.app.isInstalled(e);return t&&_.documentServices.tpa.appMarket.getData(e),t},getFirstAppCompPageId:function(e){return _.documentServices.tpa.app.getFirstAppCompPageId(e)},relatedApps:{addPanelCategories:["store"],constants:{store:{category:"store",categoryNum:{pre:"1153",post:"1039"}}},getRelatedAppsForPostInstall:M,getRelatedAppsForPreInstall:M},getSectionRefByPageId:function(e){return _.documentServices.tpa.section.getSectionRefByPageId(e)},upgrade:function(e,t,a){O(r.BI.type.APP_UPGRADE_BUTTON,e),g.startUpgradeFlow(_,e,!1,{origin:a})},hasPremiumOffering:function(e){var t=_.documentServices.tpa.app.getDataByAppDefId(e);return!!t&&_.documentServices.tpa.app.hasPremiumOffering(t.applicationId)},openSuperAppPanel:function(e,t,a,n,o,s,r){i.button.registerButton(_,e,t,a,n,o,s,r,!0),_.panelManager.openPanel(a,{appWasManuallyInstalled:!0})},openSuperAppsModal:function(t){var a=(t=t||{}).appDefinitionId||N();if(O(r.BI.type.APP_MANAGE_BUTTON,a),t.bi=n.bi.getAppIntentBiParamsToAddToUrl(_,a,r.BI.type.APP_MANAGE_BUTTON),e.get(t,"autoProvision")){var i=_.documentServices.tpa.app.getDataByAppDefId(a);i&&(I.isOpen("se_tpaProvisionOnAdd")?i.notProvisioned?_.saveManager.saveInBackground(e.partial(k,t),e.partial(f.openSaveFailedAlertForDashboardUrl,_,i.appDefinitionId)):k(t):i.demoMode?m.preSaveProvision(_,i).then(e.partial(m.save,_,i)).then(e.partial(k,t)):_.documentServices.generalInfo.isFirstSave()?m.save(_,i).then(e.partial(k,t)):k(t))}else k(t)},setStyleParam:function(e,t,a){h.setStyleParam(_,t,a)},unDockComp:function(e,t){_.components.layout.unDock(e),_.documentServices.waitForChangesApplied(function(){_.components.layout.update(e,t)})}}}),define("tpa/services/tpaAddAppService",["lodash","blog","core","experiment","tpa/services/pendingAppsService","tpa/utils/tpaUtils","tpa/constants/constants","tpa/services/tpaAddRemoveDSService","tpa/services/tpaAlertsService","tpa/services/tpaAppInstallingService","tpa/superApps/superApps","tpa/bi/bi","stateManagement"],function(e,t,a,i,n,o,s,r,p,d,c,l,g){"use strict";var u=function(e){var t={};return e&&e.x&&e.y&&(t={x:e.x,y:e.y}),t},m=function(t){return"WIDGET"===e.get(t,"componentType")?u(t):h(t)},h=function(t){var a={};return t&&(e.isNumber(t.x)&&(a.x=t.x),e.isNumber(t.y)&&(a.y=t.y),e.isNumber(t.width)&&(a.width=t.width),e.isNumber(t.height)&&(a.height=t.height)),a},f=function(e,a,i,n,o){if(n=n||{},t.siteHasOldBlog(e)){var s=t.getBlogPageId(e),r=e.documentServices.pages.getFocusedPageId();n.shouldNavigate&&s!==r&&e.pages.navigateTo(s)}else t.installApp(e,null,function(t){y(e,t,a,i),o&&o()})},y=function(e,a,i,n){var s=t.getBlogMainAppPartCompRef(e,a);o.bi.reportAddComponentBIEvent(e,s.id,i,n)};return{addApp:function(y,P,v,I,_,S,A,D,w,b){switch(w=e.pick(w,["widgetId","showPageAddedPanel","x","y","width","height","shouldNavigate","pageId","containerRef","componentOptions"]),_){case"tpaSection":o.bi.reportBIOnAppIntent(y,l.events.APP_INTENT,P,S,s.BI.type.ADD_APP),function(a,s,c,l,u,f,y,P){var v=(u=u||{}).widgetId;if(a.documentServices.tpa.section.alreadyInstalled(s)){var I=function(){var e=a.documentServices.tpa.app.getFirstAppCompPageId(s);o.bi.reportTpaAddedBiEvent(a,s,v,e.pageId,e.compId,!0,f,y)},_=function(){p.openProvisionFailedAlert(a.panelManager.openPanel,s)};i.isOpen("se_tpaProvisionOnAdd")&&c.notProvisioned?a.saveManager.saveInBackground(I,_):c.demoMode&&a.documentServices.tpa.provision.provisionAppDemoSave(c.applicationId,I,_);var S=a.documentServices.tpa.app.getFirstAppCompPageId(s);if(S){var A=a.documentServices.pages.getFocusedPageId();u.shouldNavigate&&S.pageId!==A&&a.pages.navigateTo(S.pageId)}a.documentServices.tpa.appMarket.getDataAsync(s).then(function(t){a.panelManager.openPanel("tpaPanels.message.sectionAlreadyInstalled",{appName:l,appIcon:e.get(t,"colorSvgIcon")||e.get(t,"appIcon"),appDefId:s})})}else d.prePageAppInstalling(a,l,u.showPageAddedPanel),u.componentOptions&&(u.componentOptions.layout=m(u.componentOptions)),r.addSection(a,s,{widgetId:v,layout:h(u),componentOptions:u.componentOptions,callback:function(r){if(u.showPageAddedPanel&&(i.isOpen("se_santaMembers")?d.onPageAppInstallingCompleted(a,l):a.panelManager.openPanel("tpaPanels.message.newPageAdded",{appName:l,appDefId:s},i.isOpen("photographyPromotionFixed")||i.isOpen("photographyPromotionRotation"))),n.updateNotification(a),o.bi.reportTpaAddedBiEvent(a,s,v,r.page.id,r.sectionId,!0,f,y),"14bcded7-0066-7c35-14d7-466cb3f09103"===s&&!t.siteHasOldBlog(a)){var p=e.cloneDeep(a.store.getState().leftBar);p.superApps.desktop=e.reject(p.superApps.desktop,{panelName:"blog.menuPanel"}),a.store.dispatch(g.legacy.setState({leftBar:p})),i.isOpen("newBlogIntegration")&&t.onNewBlogInstalled(a)}u.shouldNavigate&&a.pages.navigateTo(r.page.id,function(){a.panelManager.closePanelByName("tpa.compPanels.tpaSettings");var e=a.documentServices.tpa.section.getSectionRefByPageId(r.page.id);a.selection.selectComponentByCompRef(e)}),a.documentServices.waitForChangesApplied(function(){if(P){c=a.documentServices.tpa.app.getDataByAppDefId(s);var t=a.documentServices.pages.data.get(r.page.id);P({instanceId:e.get(c,"instanceId"),pageRef:r.page,pageUriSEO:e.get(t,"pageUriSEO"),title:e.get(t,"title")})}})}})}(y,P,I,v,w,A,D,b);break;case"tpaWidget":o.bi.reportBIOnAppIntent(y,l.events.APP_INTENT,P,S,s.BI.type.ADD_APP),function(t,i,s,d,l,g){if(s=s||{},i===c.superAppsConstants.SHOUTOUT_APP_DEF_ID)!function(e){e.documentServices.generalInfo.isFirstSave()?e.saveManager.saveInBackground(function(){c.openSuperAppPanel("shoutout",!0,a.constants.SUPER_APPS.SHOUTOUT_PANEL_NAME,"SiteApp_ShoutOut_Button_Hover_Caption","SiteApp_ShoutOut_Button_Hover_Caption","shoutout-panel","shoutOutLeftBarIcon")},function(){p.openSaveFailedAlertForAppMarket(e)}):c.openSuperAppPanel("shoutout",!0,a.constants.SUPER_APPS.SHOUTOUT_PANEL_NAME,"SiteApp_ShoutOut_Button_Hover_Caption","SiteApp_ShoutOut_Button_Hover_Caption","shoutout-panel","shoutOutLeftBarIcon")}(t);else{var h=u(s),f=t.documentServices.pages.getFocusedPageId(),y=!t.documentServices.tpa.app.isInstalled(i,!0);s.componentOptions&&(s.componentOptions.layout=m(s.componentOptions));var P={widgetId:s.widgetId,layout:h,containerRef:s.containerRef,componentOptions:s.componentOptions,callback:function(a){n.updateNotification(t),o.bi.reportTpaAddedBiEvent(t,i,s.widgetId,f,a.comp.id,y,d,l),t.bi.tryFlushingConditionedEvents(),s.shouldNavigate&&P.pageId&&f!==P.pageId?t.pages.navigateTo(P.pageId,function(){t.panelManager.closePanelByName("tpa.compPanels.tpaSettings")}):P.pageId&&f!==P.pageId||t.panelManager.closePanelByName("tpa.compPanels.tpaSettings"),t.documentServices.waitForChangesApplied(function(){if(g){var a=t.documentServices.tpa.app.getDataByAppDefId(i);g({instanceId:e.get(a,"instanceId")})}})}};s.pageId&&function(t,a){return e.includes(t.documentServices.pages.getPageIdList(!0),a)}(t,s.pageId)&&(P.pageId=s.pageId),r.addWidget(t,i,P)}}(y,P,w,A,D,b);break;case"wixappsPart":f(y,_,D,w,b);break;default:throw new Error("Error: "+_+" is unknown tpa type")}},isAppInstalled:function(e,a,i){return!(a!==c.superAppsConstants.BLOG_APP_DEF_ID||!t.siteHasOldBlog(e))||e.documentServices.tpa.app.isInstalled(a,!i)}}}),define("tpa/services/tpaAddComponentService",["lodash","tpa/constants/constants","tpa/services/tpaAddRemoveDSService","tpa/services/tpaAddAppService","tpa/utils/tpaUtils","tpa/appMarket/utils/appMarketUtils","tpa/bi/bi"],function(e,t,a,i,n,o,s){"use strict";function r(t,a,i,n){t.documentServices.waitForChangesApplied(function(){var o=t.documentServices.pages.data.get(a.id);n({compId:i,pageRef:a,pageUriSEO:e.get(o,"pageUriSEO"),title:e.get(o,"title")})})}var p=function(e,t,a,i,n){if(a)switch(i.componentType){case"WIDGET":m(e,a,t,i,n);break;case"PAGE":d(e,a,t,i,n);break;default:n({onError:"componentType not supported."})}else n({onError:"General Error."})},d=function(t,a,i,n,o){var s=y(t,n.copyStyle,n.styleId,i),r=t.documentServices.tpa.app.getWidgetDataFromTPAPageId(a.appDefinitionId,e.get(n,"page.pageId")),p=c(t,a,r,o);p&&p(t,a.appDefinitionId,{pageId:e.get(n,"page.pageId"),title:e.get(n,"page.title"),styleId:s,layout:u(n),isHidden:e.get(n,"page.isHidden"),requireLogin:e.get(n,"page.requireLogin"),callback:function(e){l(t,e.page,e.sectionId,r,n,o),f(t,a,e.page,e.sectionId,r.widgetId)}})},c=function(e,t,i,o){return i?n.isMultiSectionInstanceEnabled(t,i.widgetId)?a.addMultiSection:g(e,t,i)?(o({onError:"Page already installed."}),null):a.addSubSection:(o({onError:"No page found."}),null)},l=function(t,a,i,n,o,s){!1!==e.get(o,"page.shouldNavigate",null)?t.pages.navigateTo(a.id,function(){r(t,a,i,s),t.panelManager.closePanelByName("tpa.compPanels.tpaSettings")}):r(t,a,i,s)},g=function(t,a,i){var n=e.get(i,"appPage.id");return t.documentServices.tpa.section.isSectionInstalledByTpaPageId(a.applicationId,n)},u=function(t){var a={};return e.isNumber(t.x)&&(a.x=t.x),e.isNumber(t.y)&&(a.y=t.y),e.isNumber(t.width)&&(a.width=t.width),e.isNumber(t.height)&&(a.height=t.height),a},m=function(t,i,n,o,s){var r=y(t,o.copyStyle,o.styleId,n),p=t.documentServices.pages.getFocusedPageId(),d=e.get(o,"widget.wixPageId")||p;if(function(t,a){return e.includes(t.documentServices.pages.getPageIdList(),a)}(t,d)||o.widget.allPages){var c=t.documentServices.tpa.app.getWidgetDataFromTPAWidgetId(i.appDefinitionId,e.get(o,"widget.tpaWidgetId"));if(c){var l=c.widgetId;a.addWidget(t,i.appDefinitionId,{pageId:d,widgetId:l,showOnAllPages:e.get(o,"widget.allPages"),styleId:r,callback:function(e){d!==p&&t.pages.navigateTo(d,function(){t.panelManager.closePanelByName("tpa.compPanels.tpaSettings")}),t.documentServices.waitForChangesApplied(function(){s({compId:e.comp.id}),h(t,i,e.comp,l)})}})}else s({onError:"No widget found."})}else s({onError:"pageId was not found."})},h=function(e,t,a,i){var n=e.components.getPage(a),o=n&&n.id,r={app_id:t.appDefinitionId,app_site_id:t.instanceId,instance_id:a.id,widget_id:i,page_id:o};e.bi.event(s.events.EXTENSION_ADDED,r)},f=function(e,t,a,i,n){var o={app_id:t.appDefinitionId,app_site_id:t.instanceId,instance_id:i,widget_id:n,page_id:a.id};e.bi.event(s.events.EXTENSION_ADDED,o)},y=function(t,a,i,n){var o=void 0;if(a)if(i)e.includes(t.theme.styles.getAllIds(),i)&&(o=i);else{var s=t.components.get.byId(n);o=t.components.style.getId(s)}return o},P=function(a,n,s,r){a.documentServices.tpa.appMarket.getDataAsync(n).then(function(p){if(p&&!p.error){var d="Wix"===p.by;if(d){var c=p.hasSection?"tpaSection":"tpaWidget",l=t.BI.initiator.SDK;i.addApp(a,n,p.name,null,c,l,!d,{adding_method:"sdk"},{componentOptions:s},function(){r()})}else{var g=a.documentServices.tpa.appMarket.getPermissionsUrl({appName:e.get(p,"slug")},n);o.openAppMarketModal(a.panelManager.openPanel,"appMarketPermissionsModal",{url:g}),r()}}else r({onError:"Application with "+n+" appDefinitionId do not exist."})})},v=function(t,a){var i=e.find(t.widgets,function(t){return"WIDGET"===a.componentType?t.tpaWidgetId===a.widget.tpaWidgetId:"PAGE"===a.componentType?e.get(t,"appPage.id")===a.page.pageId:null});return!!e.get(i,"autoAddToSite")},I=function(t,a,i,n){if(i){var o=t.documentServices.tpa.app.getAllCompsByApplicationId(a.applicationId);return e.find(o,{widgetId:e.get(i,"widgetId")})||e.find(o,{widgetId:null})}return n({onError:"No widget found."}),null},_=function(e,t,a,i){var n=void 0,o=void 0;if("WIDGET"===e.componentType)n=t.documentServices.tpa.app.getWidgetDataFromTPAWidgetId(a.appDefinitionId,e.widget.tpaWidgetId),(o=I(t,a,n,i))&&i({compId:o.id});else if("PAGE"===e.componentType&&(n=t.documentServices.tpa.app.getWidgetDataFromTPAPageId(a.appDefinitionId,e.page.pageId),o=I(t,a,n,i))){var s=t.documentServices.components.get.byId(o.pageId);l(t,s,o.id,n,e,i)}};return{addComponent:function(t,a,i,n){i=i||{},n=e.isFunction(n)?n:e.noop;var o=void 0;if(i.appDefinitionId)t.documentServices.tpa.app.isInstalled(i.appDefinitionId)?(o=t.documentServices.tpa.app.getDataByAppDefId(i.appDefinitionId),p(t,a,o,i,n)):P(t,i.appDefinitionId,i,function(){o=t.documentServices.tpa.app.getDataByAppDefId(i.appDefinitionId),v(o,i)?_(i,t,o,n):p(t,a,o,i,n)});else{var s=t.selection.getSelectedComponentData();s?(o=t.documentServices.tpa.app.getData(s.applicationId),p(t,a,o,i,n)):n({onError:"General Error."})}}}}),define("tpa/handlers/editorSuperAppsHandlers",["lodash","tpa/constants/constants","tpa/packagePicker/packagePicker","tpa/utils/mediaDialogHandlerUtils","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/services/mediaDialogService","tpa/superApps/superApps"],function(e,t,a,i,n,o,s){"use strict";return{trackAppUpgrade:function(e){var t=e.selection.getSelectedComponentData();n.trackAppUpgrade(e,t.applicationId)},superAppsOpenMediaDialog:function(t,a,n){o.openMediaDialogByPayloadParsingMethod(t,a,function(t){e.isArray(t)||(t=[t]);var n=t.map(i.convertMediaManagerResultForSuperApps);return n=a.data.multiSelection?n:n[0]},n)},getWixUpgradeUrl:function(e,t,i){var n=e.selection.getSelectedComponentData(),o=e.documentServices.tpa.app.getData(n.applicationId);e.documentServices.tpa.app.hasPremiumOffering(o.applicationId)&&a.getWixUpgradeUrl(e,o.appDefinitionId,i)},setHelpArticle:function(t,a){var i=e.get(a,"data.articleId");"MODAL"===e.get(a,"data.type")?t.panelManager.updatePanelProps("tpa.compModals.tpaSettingsModal",{articleId:i}):t.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{articleId:i})},openDashboard:function(a,i,n){var o=e.get(i,"data",{}),r=o.state||"",p=o.origin||"",d=function(e){var t=e.selection.getSelectedComponentData();return t?(e.documentServices.tpa.app.getData(t.applicationId)||{}).appDefinitionId||null:null}(a),c=a.selection.getSelectedComponentData().widgetId;s.openDashboardUrl(d,"100%","100%",{state:r,origin:p,widgetId:c,onClose:n,shouldNotCloseOnBlur:!0,leavePanelsOpen:!0},{type:t.BI.type.TPA_SETTINGS})}}}),define("tpa/handlers/editorTPAHandlers",["lodash","util","stateManagement","tpa/utils/mediaDialogHandlerUtils","tpa/utils/tpaUtils","tpa/packagePicker/packagePicker","tpa/constants/constants","tpa/services/dashboardAppService","tpa/bi/bi","tpa/services/tpaAddRemoveDSService","tpa/services/tpaStyleService","tpa/appMarket/utils/appMarketUtils","textControls","tpa/services/tpaHelpService","tpa/services/mediaDialogService","tpa/services/tpaAddComponentService","tpa/services/tpaSettingsModalService","tpa/handlers/editorSuperAppsHandlers","experiment"],function(e,t,a,i,n,o,s,r,p,d,c,l,g,u,m,h,f,y,P){"use strict";function v(t){return e.isNaN(e.toNumber(t))?e.endsWith(t,"px")?{px:parseFloat(t)}:e.endsWith(t,"vw")?{vw:parseFloat(t)}:e.endsWith(t,"%")?{pct:parseFloat(t)}:null:{px:e.toNumber(t)}}function I(t){return e.isNumber(t.pct)?{pct:t.pct}:{vw:t.vw||0,px:t.px||0}}var _=function(a){var i=e.keyBy(g.constants.DEFAULT_STYLES_MAP,"cssClass");return e.transform(a,function(e,a,n){i[a.editorKey]&&(a.displayName=t.translate(i[a.editorKey].displayName),e[n]=a)},{})},S=function(){};return{addComponent:function(t,a,i){if(a.data.appDefinitionId){var n=t.selection.getSelectedComponentData(),o=t.documentServices.tpa.app.getData(e.get(n,"applicationId"));o&&!o.isWixTPA&&delete a.data.appDefinitionId}h.addComponent(t,a.compId,a.data,function(t){i(e.get(t,"compId")?t.compId:t)})},appEngaged:function(t,a){var i=t.selection.getSelectedComponentData();if(i){var n=t.documentServices.tpa.app.getData(i.applicationId),o={app_id:n.appDefinitionId,instance_id:n.instanceId,premium_intent:e.get(a,"data.premiumIntent")};t.bi.event(p.events.APP_ENGAGEMENT,o)}},appIsAlive:function(t,a,i){t.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{isAlive:!0,sdkVersion:e.get(a,"data.version")});var n=t.documentServices.tpa.style.get(a.compId,!0);n.siteTextPresets=_(n.siteTextPresets),i(n)},closeWindow:function(t,a){var i=t.panelManager.getOpenPanels(),n=function(t){switch(e.get(a.data,["message","target"],"").toLowerCase()){case"all":return[s.TPA_SETTINGS_PANEL_ID,s.TPA_SETTING_MODAL];case"settings":return[s.TPA_SETTINGS_PANEL_ID];case"modal":default:return[s.TPA_SETTING_MODAL]}}();(n=e.reject(n,function(t){return!e.find(i,{name:t})})).forEach(function(e){t.panelManager.updatePanelProps(e,{shouldCloseModal:!0,closeModalMessage:a.data.message})})},getCurrentPageId:function(e,t,a){a(e.pages.getCurrentPageId())},getDashboardAppUrl:function(e,t,a){r.getDashboardAppUrlAsync(e,t.data,a)},getExternalId:function(e,t,a){var i=e.components.get.byId(t.compId);a(e.documentServices.tpa.comp.getExternalId(i))},getProducts:function(t,a,i){var n=t.selection.getSelectedComponentData(),s=t.documentServices.tpa.app.getData(e.get(n,"applicationId")),r=e.get(a,"data.appDefinitionId"),p=e.get(a,"data.currency");r&&s.isWixTPA?function(t,a,i,n){var o=t.documentServices.tpa.app.getDataByAppDefId(a);!function(t,a){return P.isOpen("se_tpaProvisionOnAdd")?a&&!t.documentServices.tpa.app.isPermissionsRevoked(a):a&&t.documentServices.tpa.app.isAppProvisionedOnServer(e.get(a,"applicationId"))&&!t.documentServices.tpa.app.isPermissionsRevoked(a)}(t,o)?n({error:"app is not installed"}):t.documentServices.tpa.appMarket.getPackages(a,e.get(o,"instanceId"),{currency:i}).then(n,n)}(t,r,p,i):!P.isOpen("se_tpaProvisionOnAdd")&&o.isSaveSiteNeeded(t,s)?t.saveManager.saveInBackground(function(){t.documentServices.tpa.appMarket.getPackages(e.get(s,"appDefinitionId"),e.get(s,"instanceId"),{currency:p}).then(i,i)}):t.documentServices.tpa.appMarket.getPackages(e.get(s,"appDefinitionId"),e.get(s,"instanceId"),{currency:p}).then(i,i)},getWindowPlacement:function(e,t,a){var i=e.components.properties.get(e.selection.getSelectedComponents());if(!i)throw new Error("Selected widget is not Glued Widget");a({placement:i.placement,verticalMargin:parseFloat(i.verticalMargin),horizontalMargin:parseFloat(i.horizontalMargin)})},isComponentInstalled:function(t,a,i){var n=e.get(a,"data.componentId"),o=t.selection.getSelectedComponentData();if(o){var s=t.documentServices.tpa.app.getData(o.applicationId);if(s){var r=e.find(s.widgets,function(e){return e.appPage?e.appPage.id===n:e.tpaWidgetId===n});if(r)return void i(t.documentServices.tpa.comp.isInstalled(r.widgetId))}}i(!1)},isFullWidth:function(e,t,a){var i=e.selection.getSelectedComponents();a(e.components.layout.isHorizontallyStretchedToScreen(i))},openBillingPage:function(t,a){var i=t.selection.getSelectedComponentData();if(i){var n=t.documentServices.tpa.app.getData(i.applicationId);if(!o.isFullyUpgraded(t,n)){var s={origin:e.get(a,"data.referrer")||"settings"},r=e.get(a,"data.premiumIntent");r&&(s.premiumIntent=r),o.startUpgradeFlow(t,n.appDefinitionId,!0,s)}}},openLinkPanel:function(t,a,i){t.openLinkPanel({link:e.get(a,"data.link"),hideExternalLinkTarget:!0,callback:i,onCancelCallback:function(){i&&i({onCancel:!0})}})},openMediaDialog:function(t,a,n){t.documentServices.tpa.app.isSuperAppByCompId(a.compId)&&"SuperApps.Settings"===a.namespace?y.superAppsOpenMediaDialog(t,a,n):(e.unset(a,["data","options","imageAnalysis"]),m.openMediaDialogByPayloadParsingMethod(t,a,function(t){e.isArray(t)||(t=[t]);var n=t.map(i.convertMediaManagerResult);return n=a.data.multiSelection?n:n[0]},n))},openReviewInfo:function(e){var t=e.selection.getSelectedComponentData(),a=e.documentServices.tpa.app.getData(t.applicationId);e.documentServices.tpa.appMarket.getDataAsync(a.appDefinitionId).then(function(t){if(t){var a={origin:l.origin(),openMarketOrigin:"settings_panel"},i=e.documentServices.tpa.appMarket.getAppReviewsUrl(a,t.slug);l.openAppMarketModal(e.panelManager.openPanel,"appMarketAppModal",{url:i})}})},openSiteMembersSettingsDialog:function(e){e.panelManager.openPanel("panels.focusPanels.siteMembersSettingsPanel",{},!0)},postMessage:function(e,t){var a=e.selection.getSelectedComponentData();a&&e.documentServices.tpa.change.trigger.settingsUpdated(a.applicationId,t.data.compId,t.data.message)},refreshAppsOnDashboardClose:function(t,i){if(i&&i.data){var n=i.data.appsToRefresh;(e.isString(n)||e.isArray(n)&&n.every(e.isString))&&(n=[].concat(n),t.store.dispatch(a.tpa.logic.addAppDefIdsToRefreshOnDashboardClose(n)))}},setExternalId:function(e,t,a){var i=e.components.get.byId(t.compId);e.documentServices.tpa.comp.setExternalId(i,t.data.externalId,a)},setFullWidth:function(t,a,i){var n=a.data.stretch,o=t.selection.getSelectedComponents(),s=t.components.layout.isHorizontallyStretchedToScreen(o);if(n){var r=function(e){if(e){var t=v(e.left),a=v(e.right);return t&&a?{left:t||{},right:a||{}}:null}return{}}(e.get(a,"data.margins"));r?function(t,a,i,n){var o=e.get(a,"left")||{},s=e.get(a,"right")||{},r={left:I(o),right:I(s)};t.components.layout.setDock(i,r),t.documentServices.waitForChangesApplied(n)}(t,r,o,i):i({onError:"Margin values are not valid."})}else s&&t.documentServices.waitForChangesApplied(function(){!function(e,t,a){var i=e.selection.getSelectedComponentData(),n=e.documentServices.tpa.app.getDefaultLayout(i.applicationId,i.widgetId);n.height=e.components.layout.get(t).height,e.components.layout.unDock(t),e.documentServices.waitForChangesApplied(function(){e.components.layout.update(t,n),a()})}(t,o,i)})},setStyleParam:function(e,t,a){c.setStyleParam(e,t.compId,t.data,a),e.documentServices.tpa.style.setParamOldSDK(t.compId,t.data)},settingsOpenModal:function(e,t,a){f.settingsOpenModal(e,t,a)},setWindowPlacement:function(t,a){var i=a.data.placement;if("CENTER"===i)throw new Error("Invalid position: "+i+". please use a valid position");var n=a.data.verticalMargin||0,o=a.data.horizontalMargin||0,s=t.components.get.byId(a.compId,"masterPage"),r=t.components.properties.get(s);e.assign(r,{placement:i,verticalMargin:n,horizontalMargin:o}),t.components.properties.update(s,r),t.documentServices.tpa.change.trigger.windowPlacement(a)},stylesReady:function(t,a){t.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{stylesReady:!0,sdkVersion:e.get(a,"data.version")})},getViewModeInternal:S,toWixDate:S,getCompId:S,getOrigCompId:S,getWidth:S,getLocale:S,getCacheKiller:S,getTarget:S,getInstanceId:S,getSignDate:S,getUid:S,getPermissions:S,getIpAndPort:S,getDemoMode:S,getDeviceType:S,getInstanceValue:S,getSiteOwnerId:S,getImageUrl:S,getResizedImageUrl:S,getAudioUrl:S,getDocumentUrl:S,getSwfUrl:S,getPreviewSecureMusicUrl:S,getStyleParams:S,getStyleColorByKey:S,getColorByreference:S,getEditorFonts:S,getSiteTextPresets:S,getFontsSpriteUrl:S,getStyleFontByKey:S,getStyleFontByReference:S,getSiteColors:S,setUILIBParamValue:S}}),define("tpa/handlers/editorSettingsModalHandlersService",[],function(){"use strict";return function(e){return{resizeWindow:function(t,a,i){e.panelManager.updatePanelProps(i.name,{width:t.data.width,height:t.data.height})}}}}),define("tpa/settings/uiLib/fontPickerStyleService",["lodash","textControls","tpa/services/tpaStyleService"],function(e,t,a){"use strict";var i=function(e,a,i){var n=e.documentServices.tpa.style.getNameToFontsKeyMap()[a],o=e.documentServices.theme.fonts.get(a),s=t.fontUtils.parseStyleFont(o,e.documentServices.theme.fonts.getAll(),e.theme.colors.getAll());return{preset:n,editorKey:a,displayName:i,size:s.size,family:s.family.toLowerCase(),style:{bold:s.bold,italic:s.italic,underline:!1}}},n=function(t,a,n,o,s,r){var p={style:{italic:!1,bold:!1,underline:!1},family:"arial"},d=t.documentServices.tpa.style.get(a);switch(d.style&&d.style.fonts&&d.style.fonts[n]&&(delete(p=d.style.fonts[n]).displayName,delete p.value),o){case"theme":e.assign(p,i(t,s,r));break;case"family":p.preset="Custom",p.family=s;break;case"size":p.preset="Custom",p.size=s;break;case"bold":p.preset="Custom",p.style.bold=s;break;case"italic":p.preset="Custom",p.style.italic=s;break;case"underline":p.preset="Custom",p.style.underline=s}return p.fontStyleParam=!0,p};return{onStyleChange:function(e,t,i,o,s,r,p){var d={key:i,param:{value:n(e,t,i,s,r,p)},type:"font"};a.setStyleParam(e,t,d),e.documentServices.waitForChangesApplied(function(){var a=e.documentServices.tpa.style.get(t);o({fontParam:a.style.fonts[d.key]})})},onStyleChangeWithoutWixParam:function(t,a,n,o,s,r){a=e.isPlainObject(a)?a:{},"theme"===o?e.assign(a,i(t,s,r)):e.includes(["bold","italic","underline"],o)?e.set(a,["style",o],s):a[o]=s,r?a.displayName=r:delete a.displayName,n({fontParam:a})}}}),define("tpa/settings/uiLib/colorPickerStyleService",["lodash","tpa/services/tpaStyleService"],function(e,t){"use strict";var a=function(t){return!e.isUndefined(t)&&!!e.includes(t,"#")},i=function(e){if(/^rgba\(((\d+),\s*){3}(0?\.\d+)\)$/.test(e)){return e.split(",")[3].split(")")[0]}return 1},n=function(t,a){var i=void 0;if(e.includes(t,"rgba")){var n=t.split(",");n[3]=a+")",i=n.join(",")}else{t=t.replace("#","");i="rgba("+parseInt(t.substring(0,2),16)+","+parseInt(t.substring(2,4),16)+","+parseInt(t.substring(4,6),16)+","+a+")"}return i};return{onStyleChangeWithoutWixParam:function(e,t){var i={};i[a(t)?"value":"themeName"]=t,e({colorParam:i})},onStyleChange:function(e,o,s,r,p){var d=e.documentServices.tpa.style.get(o)||{},c=d.style&&d.style.colors[s]||{},l=i(c.value),g=l?+l:1,u={key:s,param:{value:{opacity:g}},type:"color"};a(p)?u.param.value.rgba=n(p,g):u.param.value.color={name:p},t.setStyleParam(e,o,u),e.documentServices.waitForChangesApplied(function(){(d=e.documentServices.tpa.style.get(o)).style&&d.style.colors&&r({colorParam:d.style.colors[u.key]})})}}}),define("tpa/handlers/editorUILibHandlers",["core","jquery","lodash","tpa/services/tpaStyleService","tpa/settings/uiLib/fontPickerStyleService","tpa/settings/uiLib/colorPickerStyleService"],function(e,t,a,i,n,o){"use strict";var s=function(e){var a=t("#tpaSettingsFrame").offset();return a?{left:(e.left||0)+(a.left||0),top:(e.top||0)+(a.top||0)}:{left:e.left,top:e.top}},r=function(e,t,a,i){e.theme.colors.update(i),e.documentServices.waitForChangesApplied(function(){var n=e.documentServices.tpa.style.get(t);n.style&&n.style.colors&&a({paletteChange:!0,colors:n.style.colors,palette:i})})},p=function(e){e({panelClose:!0})};return{openColorPicker:function(e,t,i){var n=s(a.pick(t.data,["top","left"])),d=t.data.wixParam,c=t.compId,l=t.data.color||"#ffffff",g=void 0;g=d?o.onStyleChange.bind(null,e,c,d,i):a.partial(o.onStyleChangeWithoutWixParam,i),e.panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",{value:l,onChange:g,onClose:p.bind(null,i),sessionStorage:e.userPreferences.session,history:null,palettePresets:e.theme.colors.getColorPresets(),updateSitePalette:r.bind(null,e,c,i),previewOnHover:!1,top:n.top,left:n.left},!0)},openFontPicker:function(e,t,i){var o=t.data.wixParam,r=t.compId,p=s(a.pick(t.data,["top","left"])),d=void 0,c=void 0;o?(c=function(e,t,i){var n=e.documentServices.tpa.style.get(t);if(n&&a.has(n,"style.fonts"))return n.style.fonts[i]}(e,r,o),d=n.onStyleChange.bind(null,e,r,o,i)):(c=a.isPlainObject(t.data.value)?t.data.value:{},d=a.partial(n.onStyleChangeWithoutWixParam,e,c,i)),e.panelManager.openPanel("tpaPanels.uiLib.uiLibTextParamDesignPanel",{title:t.data.title||"Font picker",hideTheme:t.data.hideTheme||!1,hideFont:t.data.hideFont||!1,hideSize:t.data.hideSize||!1,hideStyle:t.data.hideStyle||!1,top:p.top,left:p.left,fontMaxSize:t.data.fontMaxSize,fontMinSize:t.data.fontMinSize,compStyle:c,onStyleChange:d},!0)}}}),define("tpa/handlers/editorPublicDataHandlers",[],function(){"use strict";return{setValue:function(e,t,a){var i=e.components.get.byId(t.compId);e.documentServices.tpa.data.set(i,t.data.key,t.data.value,t.data.scope,a)},removeValue:function(e,t,a){var i=e.components.get.byId(t.compId);e.documentServices.tpa.data.remove(i,t.data.key,t.data.scope,a)},getValue:function(e,t,a){if(t.data.scope===e.documentServices.tpa.data.SCOPE.APP){var i=e.selection.getSelectedComponentData();e.documentServices.tpa.data.app.get(i.applicationId,t.data.key,a)}else{var n=e.components.get.byId(t.compId);e.documentServices.tpa.data.comp.get(n,t.data.key,a)}},getValues:function(e,t,a){if(t.data.scope===e.documentServices.tpa.data.SCOPE.APP){var i=e.selection.getSelectedComponentData();e.documentServices.tpa.data.app.getMulti(i.applicationId,t.data.keys,a)}else{var n=e.components.get.byId(t.compId);e.documentServices.tpa.data.comp.getMulti(n,t.data.keys,a)}}}}),define("tpa/common/editorTPAPostMessageCommon",["lodash"],function(e){"use strict";var t={TPA_MESSAGE:"TPA",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",UI_LIB_RESPONSE:"UI_LIB_RESPONSE",PINGPONG_PREFIX:"pingpong:"},a=function(t,a,i){if(!e.isUndefined(t)){var n="";try{n=JSON.stringify(a)}catch(e){return}t.postMessage||(t=t.contentWindow),t.postMessage(n,i||"*")}},i=function(i,n){var o=t.TPA_RESPONSE;return e.includes(["openColorPicker","openFontPicker"],n.type)&&(o=t.UI_LIB_RESPONSE),function(e){try{a(i,{intent:o,callId:n.callId,type:n.type,res:e,status:!0})}catch(e){}}},n=function(e){return(e.intent===t.TPA_MESSAGE||e.intent===t.TPA_MESSAGE2)&&!o(e)},o=function(e){return"[UNKNOWN]"===e.compId};return{Intents:t,callPostMessage:a,generateResponseFunction:i,isTPAMessage:n,fixOldPingPongMessageType:function(e){return e.replace(t.PINGPONG_PREFIX,"")},handleTPAMessage:function(e,t,a){var o=void 0;try{a.data?o=JSON.parse(a.data):a.originalEvent&&a.originalEvent.data&&(a=a.originalEvent,o=JSON.parse(a.data))}catch(e){return}o&&n(o)&&t(e,o,i(a.source,o))}}}),define("tpa/services/tpaPostMessageService",["lodash","experiment","tpa/handlers/editorTPAHandlers","tpa/handlers/editorSettingsModalHandlersService","tpa/handlers/editorUILibHandlers","tpa/handlers/editorPublicDataHandlers","tpa/handlers/editorSuperAppsHandlers","tpa/common/editorTPAPostMessageCommon","tpa/utils/tpaUtils","tpa/constants/constants"],function(e,t,a,i,n,o,s,r,p,d){"use strict";function c(t,c){var l=i(t),g=function(e){return function(t,a){return Boolean(e[a.type])}},u=[{test:g(o),handlers:o},{test:function(e,t){return Boolean(s[t.type])&&e.documentServices.tpa.app.isSuperAppByCompId(t.compId)},handlers:s},{test:g(a),handlers:a},{test:g(n),handlers:n}],m=function(a,i,n){e.assign(i,{compId:a.selection.getSelectedComponentId()});var o=p.getOpenedPanel(t.panelManager,d.TPA_SETTING_MODAL);if(o&&l[i.type])l[i.type].call(this,i,n,o),a.documentServices.tpa.bi.sendBIEvent(i,"editor");else{var s=function(t,a){var i=e.find(u,function(e){return e.test(t,a)});if(i)return i.handlers[a.type]}(a,i);s?(s.call(this,a,i,n),a.documentServices.tpa.bi.sendBIEvent(i,"editor")):a.documentServices.tpa.handlers(e.assign(i,{originFrame:"editor"}),n)}};return{addListenerToTpaMessage:function(){c("message",r.handleTPAMessage.bind(this,t,m),!1)}}}return c}),define("tpa/handlers/editorTPAPreviewHandlers",["lodash","util","tpa/constants/constants","tpa/services/tpaHelpService","tpa/services/tpaAddRemoveDSService","tpa/services/tpaAddAppService","tpa/appMarket/utils/appMarketUtils","tpa/superApps/superApps"],function(e,t,a,i,n,o,s,r){"use strict";var p=function(e,t,a){e.preview.togglePreview();var i=e.components.get.byId(t,a);e.selection.selectComponentByCompRef(i);var n={selectedComponent:e.selection.getSelectedComponents(),origCompId:t};e.panelManager.openPanel("tpa.compPanels.tpaSettings",n)};return{openHelp:function(e,t){e.preview.togglePreview();var a=e.documentServices.tpa.app.getFirstAppCompPageId(t.data),n=e.components.get.byId(a.compId,a.pageId);e.selection.selectComponentByCompRef(n);var o=e.selection.getSelectedComponentData(),s=e.documentServices.tpa.app.getData(o.applicationId),r=o.widgetId||e.documentServices.tpa.app.getMainSectionWidgetData(s).widgetId;i.getHelpId(e,s.appDefinitionId,r,i.HELP_END_POINTS.WIDGET).then(function(t){e.panelManager.openHelpCenter(t,{origin:"preview",component:"TPAWidget",learn_more:!1},{panel_name:"preview",origin:"preview"})})},getViewMode:function(e,t,a){return a(e.getPreviewMode()?"preview":"editor")},openSettingsDialog:function(t,a){if(t.isDesktopEditor()&&t.getPreviewMode()){var i=a.data.pageId,n=a.data.compId,o=[t.documentServices.pages.getFocusedPageId()];t.documentServices.pages.popupPages.isPopupOpened()||o.push(t.pages.getMasterPageId()),e.includes(o,i)?p(t,n,i):t.pages.navigateTo(i,p.bind(void 0,t,n,i))}},deselectComponent:function(e){e.selection.deselectComponents()},editorAddApplication:function(t,i,n){var p=e.get(i,"data.appDefinitionId");o.isAppInstalled(t,p,!0)?n({error:"Application already installed."}):t.isMobileEditor()?n({error:"Can't add application in mobile editor."}):t.documentServices.tpa.appMarket.getDataAsync(p).then(function(d){if(d&&!d.error){var c="Wix"===d.by;if(c){var l=d.hasSection?"tpaSection":"tpaWidget";l=p===r.superAppsConstants.BLOG_APP_DEF_ID?"wixappsPart":l;var g=a.BI.initiator.SDK,u={shouldNavigate:e.get(i,"data.shouldNavigate",!1),pageId:e.get(i,"data.pageId"),showPageAddedPanel:e.get(i,"data.showPageAddedPanel",!1)};o.addApp(t,p,d.name,null,l,g,!c,{adding_method:"sdk"},u,function(t){n(e.pick(t,["instanceId"]))})}else{var m=t.documentServices.tpa.appMarket.getPermissionsUrl({appName:e.get(d,"slug")},p);s.openAppMarketModal(t.panelManager.openPanel,"appMarketPermissionsModal",{url:m}),n()}}else n({error:"Application with "+p+" appDefinitionId do not exist."})})},editorIsApplicationInstalled:function(t,a,i){var n=e.get(a,"data.appDefinitionId");i(o.isAppInstalled(t,n,!0))}}}),define("tpa/services/tpaPreviewPostMessageService",["lodash","tpa/handlers/editorTPAPreviewHandlers","tpa/common/editorTPAPostMessageCommon"],function(e,t,a){"use strict";var i=function(e,a,i){t[a.type].call(this,e,a,i)},n=function(e,t){return function(i){var n={intent:"TPA_PREVIEW",callId:t.callId,type:t.type,res:i,status:!0};a.callPostMessage(e,n)}},o=function(e){return"TPA_PREVIEW"===e.intent};return{init:function(e){window.addEventListener("message",function(e,a){var s=void 0;try{a.data?s=JSON.parse(a.data):a.originalEvent&&a.originalEvent.data&&(a=a.originalEvent,s=JSON.parse(a.data))}catch(e){return}s&&o(s)&&function(e){return Boolean(t[e.type])}(s)&&i(e,s,n(a.source,s))}.bind(this,e),!1)}}}),define("tpa/settings/settings",["lodash","util","panels","tpa/superApps/superAppsConstants","tpa/appMarket/utils/appMarketUtils","experiment"],function(e,t,a,i,n,o){"use strict";function s(e){return p[e]+d}function r(t,a){return s(function(t,a){return e.includes(a,t)}(t,function(t){return e.has(t,"settings.languages")?t.settings.languages:[]}(a))?t:"en")}var p={en:116,da:120,sv:120,es:120,tr:128,pl:128,no:128,it:128,fr:128,de:128,ru:128,ja:138,pt:138,nl:138,ko:138},d=288,c=["13afb094-84f9-739f-44fd-78d036adb028","139a41fd-0b1d-975f-6f67-e8cbdf8ccc82","1380bba0-253e-a800-a235-88821cf3f8a4"],l=function(t,a){var i=e.get(t,["widgets",a,"settings"]),n=1!==e.get(i,"version"),s=e.get(i,"urlV2",!1);return n&&s&&function(t,a){return!e.get(t,"abTest")||!(!o.isOpen("se_ecom_galleries_settings2")||!e.includes(c,a))||o.isOpen("se_"+a.replace(/-/g,"_"))}(i,a)},g=function(t,a,i){if(!u("tpa.compPanels.tpaSettings",t.panelManager)){var n=e.merge({selectedComponent:a,origCompId:t.selection.getSelectedComponentId()},i);t.panelManager.openPanel("tpa.compPanels.tpaSettings",n)}},u=function(t,a){var i=a.getOpenPanels();return e.find(i,{name:t})};return{open:function(t,a){a=a||t.selection.getSelectedComponents();var i=t.components.data.get(a),s=t.documentServices.tpa.app.getData(i.applicationId),p=s.appDefinitionId;p?t.documentServices.tpa.appMarket.getDataAsync(p,{verticalsPremium:!0}).then(function(p){var d=i.widgetId||t.documentServices.tpa.app.getMainSectionWidgetData(s).widgetId;!function(t,a,i,s,p){var d=t.appDefinitionId;if(!o.isOpen("se_tpaProvisionOnAdd")&&t.demoMode&&"Wix"!==a.by){var c=i.documentServices.tpa.appMarket.getPermissionsUrl({appName:e.get(a,"slug")},d);c=c.concat("&demoMode=true"),n.openAppMarketModal(i.panelManager.openPanel,"appMarketPermissionsModal",{url:c})}else{var u=e.find(a.widgets,{widgetId:p}),m=l(t,p),h=m?r(i.documentServices.generalInfo.getLanguage(),u):t.settingsWidth;g(i,s,{width:h,isNewVersion:m})}}(s,p,t,a,d)}):g(t,a)}}}),define("tpa/services/navigateAndOpenAppService",["lodash","util","tpa/appMarket/services/appMarketTabService","tpa/settings/settings","blog","core","stateManagement"],function(e,t,a,i,n,o,s){"use strict";var r={},p=function(e,t){"61f33d50-3002-4882-ae86-d319c1a249ab"===t?function(e){e.store.dispatch(s.leftBar.logic.collapseMenu()),e.panelManager.openPanel(o.constants.SUPER_APPS.BLOG_PANEL_NAME,{})}(e):function(e,t){var a=d(e,t);a&&i.open(e,a)}(e,t)},d=function(e,t){var a=e.documentServices.tpa.app.getFirstAppCompPageId(t,!0);if(a){var i=e.components.get.byId(a.compId,a.pageId);return e.selection.selectComponentByCompRef(i),i}return null};return r.handleIfComingFromETPA=function(i){var n=t.url.getParameterByName("etpa");if(n){if(i.documentServices.tpa.app.getFirstAppCompPageId(n)){var o="settings"===(t.url.getParameterByName("etpaMode")||"settings")?p:d;r.navigateAndScrollToComp(i,n,e.partial(o,i,n))}else a.openAppMarketTab({urlParams:{openAppDefId:n,openMarketOrigin:t.url.getParameterByName("referral_info")}},i.panelManager.openPanel)}},r.navigateAndScrollToComp=function(e,t,a){var i=void 0;(i="61f33d50-3002-4882-ae86-d319c1a249ab"===t?{pageId:n.getBlogPageId(e),compId:void 0}:e.documentServices.tpa.app.getFirstAppCompPageId(t,!0))&&function(e,t,a){t.pageId===e.pages.getMasterPageId()||t.pageId===e.documentServices.pages.getFocusedPageId()?a():e.pages.navigateTo(t.pageId,a)}(e,i,function(){e.pages.scrollToComponent(i.compId,{onComplete:a,onUpdate:function(e){e.getPreviewMode()||(e.shouldUpdateEditorScrollAfterHeightUpdate=!0,e.applyPreviewScrollToEditorScroll())}.bind(null,e)})})},r.navigateAndOpenSettingsForAppDefId=function(t,a){r.navigateAndScrollToComp(t,a,e.partial(p,t,a))},r}),define("tpa/componentsData/addCompKeyToCompTypeMap",[],function(){"use strict";var e={addAccordion:"tpa.viewer.components.Accordion",addAdminLoginButton:"wysiwyg.viewer.components.AdminLoginButton",addAudioPlayer:"wysiwyg.viewer.components.AudioPlayer",addBgImageStrip:"wysiwyg.viewer.components.BgImageStrip",addCollage:"tpa.viewer.components.Collage",addContactForm:"wysiwyg.viewer.components.ContactForm",addDocumentMedia:"wysiwyg.viewer.components.documentmedia.DocumentMedia",addFacebookComment:"wysiwyg.viewer.components.WFacebookComment",addFacebookLike:"wysiwyg.viewer.components.WFacebookLike",addDisqusComment:"wysiwyg.common.components.disquscomments.viewer.DisqusComments",addFacebookShare:"wysiwyg.viewer.components.FacebookShare",addFlashComponent:"wysiwyg.viewer.components.FlashComponent",addFreestyle:"tpa.viewer.components.Freestyle",addGoogleMap:"wysiwyg.viewer.components.GoogleMap",addGooglePlusOne:"wysiwyg.viewer.components.WGooglePlusOne",addHtmlComponent:"wysiwyg.viewer.components.HtmlComponent",addHoneycomb:"tpa.viewer.components.Honeycomb",addImpress:"tpa.viewer.components.Impress",addItunesButton:"wysiwyg.viewer.components.ItunesButton",addLoginButton:"wysiwyg.viewer.components.LoginButton",addMasonry:"tpa.viewer.components.Masonry",addMatrixGallery:"wysiwyg.viewer.components.MatrixGallery",addPaginatedGridGallery:"wysiwyg.viewer.components.PaginatedGridGallery",addPayPalButton:"wysiwyg.viewer.components.PayPalButton",addPinterestFollow:"wysiwyg.viewer.components.PinterestFollow",addSliderGallery:"wysiwyg.viewer.components.SliderGallery",addSlideShowGallery:"wysiwyg.viewer.components.SlideShowGallery",addSocialBar:"wysiwyg.viewer.components.LinkBar",addSoundCloud:"wysiwyg.viewer.components.SoundCloudWidget",addStripShowcase:"tpa.viewer.components.StripShowcase",addStripSlideshow:"tpa.viewer.components.StripSlideshow",addSvgShape:"wysiwyg.viewer.components.svgshape.SvgShape",addThumbnails:"tpa.viewer.components.Thumbnails",addTPA3DCarousel:"wysiwyg.viewer.components.tpapps.TPA3DCarousel",addTPA3DGallery:"wysiwyg.viewer.components.tpapps.TPA3DGallery",addTwitterFollow:"wysiwyg.viewer.components.WTwitterFollow",addTwitterTweet:"wysiwyg.viewer.components.WTwitterTweet",addVideo:"wysiwyg.viewer.components.Video",addVKShare:"wysiwyg.viewer.components.VKShareButton"};return{getCompType:function(t){return e[t]||t}}}),define("tpa/componentsData/componentsDefaultData.json",[],function(){return{"wysiwyg.viewer.components.tpapps.TPA3DCarousel":{layout:{width:803,height:272},componentType:"wysiwyg.viewer.components.tpapps.TPA3DCarousel",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"SlideShowGalleryProperties",metaData:{schemaVersion:"1.0"},expandEnabled:!0,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",imageMode:"clipImage",transition:"swipeHorizontal",autoplayInterval:5,autoplay:!1,transDuration:1,bidirectional:!0,reverse:!1,showAutoplay:!0,showNavigation:!0,showCounter:!0,showExpand:!1,showSocial:!1},style:"tfc1"},"wysiwyg.viewer.components.tpapps.TPA3DGallery":{layout:{width:790,height:237},componentType:"wysiwyg.viewer.components.tpapps.TPA3DGallery",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525,alt:""}]},props:{type:"SlideShowGalleryProperties",metaData:{schemaVersion:"1.0"},expandEnabled:!0,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",imageMode:"clipImage",transition:"swipeHorizontal",autoplayInterval:5,autoplay:!1,transDuration:1,bidirectional:!0,reverse:!1,showAutoplay:!0,showNavigation:!0,showCounter:!0,showExpand:!1,showSocial:!1},style:"tfg1"},"tpa.viewer.components.Accordion":{layout:{width:473,height:270},componentType:"tpa.viewer.components.Accordion",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"AccordionProperties",metaData:{schemaVersion:"1.0"},font:"arial",descFont:"arial",alignText:"left",textMode:"titleOnly",galleryImageOnClickAction:"zoomMode",borderWidth:0,textColor:"#2F2E2E",alphaTextColor:"1",descriptionColor:"#605E5E",alphaDescriptionColor:"1",textBackgroundColor:"#FFFFFF",alphaTextBackgroundColor:"0.8",borderColor:"#FFFFFF",alphaBorderColor:"1"},style:{componentClassName:"tpa.viewer.components.Accordion",pageId:"",compId:"i6rzx2vz",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_14",color3:"color_11",color4:"color_11",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.8"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAAccordionSkin"}},"wysiwyg.viewer.components.AdminLoginButton":{layout:{width:125,height:20},componentType:"wysiwyg.viewer.components.AdminLoginButton",data:{type:"LinkableButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},label:"Webmaster Login"},props:{type:"ButtonProperties",metaData:{schemaVersion:"1.0"},align:"center",margin:0},style:"admb0"},"wysiwyg.viewer.components.PaginatedGridGallery":{layout:{width:273,height:204},componentType:"wysiwyg.viewer.components.PaginatedGridGallery",style:"pagg1"},"wysiwyg.viewer.components.AudioPlayer":{layout:{width:42,height:40},componentType:"wysiwyg.viewer.components.AudioPlayer",style:"ap1"},"tpa.viewer.components.Collage":{layout:{width:631,height:846},componentType:"tpa.viewer.components.Collage",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"Describe your image here",width:800,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"Describe your image here",width:1e3,height:673},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"Describe your image here",width:2294,height:1524},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dramatic Dew Drops",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here",width:800,height:1067},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"Describe your image here",width:555,height:580},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"Describe your image here",width:600,height:900},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"Describe your image here",width:1e3,height:1500},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"Describe your image here",width:700,height:814},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Raindrops on Window",uri:"e5433a67390ddeb83e13ebda5ddade7d.jpg",description:"Describe your image here",width:532,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tropical Berries Close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"Describe your image here",width:803,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"Describe your image here",width:750,height:1e3}]},props:{type:"CollageProperties",metaData:{schemaVersion:"1.0"},font:"arial",alignText:"center",textMode:"titleOnly",galleryImageOnClickAction:"zoomMode",minImageSize:1,maxImageSize:3,margin:5,fitToScreenWidth:!1,showNavButtons:!0,orientation:"vertical",layoutSeed:50,numOfCells:5,textColor:"#2F2E2E",alphaTextColor:"1",descriptionColor:"#605E5E",alphaDescriptionColor:"1",backgroundMouseoverColor:"#FFFFFF",alphaBackgroundMouseoverColor:"0.7"},style:{componentClassName:"tpa.viewer.components.Collage",pageId:"",compId:"i6rzzs7n",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_14",color3:"color_11",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.7"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPACollageSkin"}},"wysiwyg.viewer.components.documentmedia.DocumentMedia":{layout:{width:70,height:90},componentType:"wysiwyg.viewer.components.documentmedia.DocumentMedia",data:{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Document Title",uri:"https://static.parastorage.com/services/skins/2.1144.0/images/wysiwyg/core/themes/editor_web/add_image_thumb.png",width:0,height:0,alt:"",link:{type:"DocumentLink"}},props:{type:"DocumentMediaProperties",metaData:{schemaVersion:"1.0"},showTitle:!0},style:"dm1"},"wysiwyg.viewer.components.WFacebookComment":{layout:{width:555,height:116},componentType:"wysiwyg.viewer.components.WFacebookComment",props:{type:"WFacebookCommentProperties",metaData:{schemaVersion:"1.0"},numPosts:2,width:555,colorScheme:"light",canBeShownOnAllPagesBug:!0},data:{type:"WFacebookComment",urlFormat:"hashBang"},style:"fbc1"},"wysiwyg.common.components.disquscomments.viewer.DisqusComments":{type:"Component",skin:"wysiwyg.common.components.disquscomments.viewer.skins.DisqusCommentsSkin",layout:{width:500,height:325,x:0,y:1,scale:1,rotationInDegrees:0},componentType:"wysiwyg.common.components.disquscomments.viewer.DisqusComments",data:{type:"DisqusComments",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},disqusId:""},style:"disq2"},"wysiwyg.viewer.components.FacebookShare":{layout:{width:71,height:30,rotationInDegrees:0,scale:1,fixedPosition:!1},componentType:"wysiwyg.viewer.components.FacebookShare",data:{type:"FacebookShareButton",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},urlChoice:"Current page",urlFormat:"hashBang",label:"Share"},skin:"skins.viewer.facebookshare.FacebookShareSkin",style:"fs1"},"wysiwyg.viewer.components.WFacebookLike":{layout:{width:250,height:40},data:{type:"WFacebookLike",urlFormat:"hashBang"},componentType:"wysiwyg.viewer.components.WFacebookLike",style:"fbl1"},"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox":{layout:{width:280,height:575},componentType:"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox",data:{type:"FacebookLikeBox",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},facebookPageId:"wix",colorScheme:"light",showFaces:!0,showStream:!0,showBorder:!0,showHeader:!0},props:{type:"FacebookLikeBoxProperties",metaData:{schemaVersion:"1.0"},transparentBg:!1},style:"FacebookLikeBox_1"},"wysiwyg.viewer.components.FlashComponent":{layout:{width:128,height:128},componentType:"wysiwyg.viewer.components.FlashComponent",data:{type:"LinkableFlashComponent",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:"",placeHolderImage:{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Default Flash",uri:"7ff659c252dfd1ca5c76533695cb9611.wix_mp",description:"Some description here",width:128,height:128,alt:""}},props:{type:"FlashComponentProperties",metaData:{schemaVersion:"1.0"},displayMode:"original"},style:"swf1"},"tpa.viewer.components.Freestyle":{layout:{width:602,height:600},componentType:"tpa.viewer.components.Freestyle",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"FreestyleProperties",metaData:{schemaVersion:"1.0"},galleryImageOnClickAction:"zoomMode",layoutSeed:50,cropAndFitStage:"fit",imageDecoration:"none",borderWidth:3,orientation:"horizontal",applyRotationInLayout:!0,borderColor:"#2F2E2E",alphaBorderColor:"1"},style:{componentClassName:"tpa.viewer.components.Freestyle",pageId:"",compId:"i6s02gma",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_15",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAFreestyleSkin"}},"wysiwyg.viewer.components.WGooglePlusOne":{layout:{width:250,height:24},componentType:"wysiwyg.viewer.components.WGooglePlusOne",style:"gp1"},"wysiwyg.viewer.components.GoogleMap":{layout:{width:500,height:400},componentType:"wysiwyg.viewer.components.GoogleMap",style:"gm1"},"wysiwyg.viewer.components.MatrixGallery":{layout:{width:675,height:712},componentType:"wysiwyg.viewer.components.MatrixGallery",style:"mg1"},"tpa.viewer.components.Honeycomb":{layout:{width:550,height:271},componentType:"tpa.viewer.components.Honeycomb",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"",width:800,height:594},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"",width:1e3,height:673},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"",width:2294,height:1524},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"",width:555,height:580},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"",width:600,height:900},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"",width:1e3,height:1500},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"",width:700,height:814},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tropical Berries close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"",width:803,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"",width:750,height:1e3}]},props:{type:"HoneycombProperties",metaData:{schemaVersion:"1.0"},expandEnabled:!1,galleryImageOnClickAction:"zoomMode",font:"arial",alignText:"left",textMode:"titleAndDescription",margin:1,numOfColumns:4,layoutSeed:50,rolloverAnimation:"colorOnly",imageShape:"hexagon",imageScale:"x1",textColor:"#30BDFF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#2F2E2E",alphaTextBackgroundColor:"1",backgroundMouseoverColor:"#FFFFFF",alphaBackgroundMouseoverColor:"0.7",holesColor:"#FFFFFF",alphaHolesColor:"1"},style:{componentClassName:"tpa.viewer.components.Honeycomb",pageId:"",compId:"i6s04hn3",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"0.7","alpha-color5":"1",color1:"color_18",color2:"color_1",color3:"color_15",color4:"color_11",color5:"color_11",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin"}},"wysiwyg.viewer.components.HtmlComponent":{layout:{width:200,height:200},componentType:"wysiwyg.viewer.components.HtmlComponent",data:{type:"HtmlComponent",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},url:"",sourceType:"external",freezeFrame:!1},style:"htco1"},"tpa.viewer.components.Impress":{layout:{width:980,height:390},componentType:"tpa.viewer.components.Impress",data:{type:"ImageList",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525,alt:""}]},props:{type:"ImpressProperties",metaData:{schemaVersion:"1.0"},font:"arial",textMode:"titleAndDescription",alignText:"left",autoplayInterval:5,autoplay:!1,galleryImageOnClickAction:"zoomMode",cropAndFitStage:"crop",transition:"random",showPagination:!0,bcgColor1:"#A0A09F",alphaBcgColor1:"1",bcgColor2:"#30BDFF",alphaBcgColor2:"1",bcgColor3:"#41BAAE",alphaBcgColor3:"1",bcgColor4:"#DE5021",alphaBcgColor4:"1",bcgColor5:"#DEC328",alphaBcgColor5:"1",textColor:"#BAE9FF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#605E5E",alphaTextBackgroundColor:"1"},style:{componentClassName:"tpa.viewer.components.Impress",pageId:"",compId:"i6s05c77",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1","alpha-color6":"1","alpha-color7":"1","alpha-color8":"1",color1:"color_13",color2:"color_18",color3:"color_23",color4:"color_28",color5:"color_33",color6:"color_16",color7:"color_1",color8:"color_14","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",color6:"theme",color7:"theme",color8:"theme"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAImpressSkin"}},"wysiwyg.viewer.components.ItunesButton":{layout:{width:110,height:40},componentType:"wysiwyg.viewer.components.ItunesButton",data:{type:"ItunesButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},downloadUrl:""},props:{type:"ItunesButtonProperties",metaData:{schemaVersion:"1.0"},language:"en",openIn:"_blank"},style:"ib1"},"tpa.viewer.components.Masonry":{layout:{width:980,height:1450},componentType:"tpa.viewer.components.Masonry",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"0bfb60ff6550b68a849ada091f254158.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"d5281560853f147420a877b24be7daec.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:536},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray Of Light",uri:"84b2ba7d33c6c76e0976354bfeb53223.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:800,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil Forest",uri:"0560932b578ed39cc5ff0d4f9b257496.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom ",uri:"c18ef262eff1988801adc0c6cd9f69c2.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:511},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"ae505cb9630a240ff39bd7e3a6a30e5b.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"bab38d8e951657c1122c9ef971e512b3.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"bbb19657224f3880b7af258ffe1329ec.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:532},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:800,height:1067}]},props:{type:"MasonryProperties",metaData:{schemaVersion:"1.0"},font:"arial",galleryImageOnClickAction:"zoomMode",numCols:3,margin:25,textMode:"titleAndDescription",alignText:"left",boxShadowIsOn:!0,boxShadow:"0 1px 3px 0 rgba(0,0,0,0.33)",textColor:"#000000",alphaTextColor:"1",descriptionColor:"#000000",alphaDescriptionColor:"1",textBackgroundColor:"#ffffff",alphaTextBackgroundColor:"1",backgroundMouseoverColor:"#000000",alphaBackgroundMouseoverColor:"0.4",textButtonColor:"#2F2E2E",alphaTextButtonColor:"1"},style:{componentClassName:"tpa.viewer.components.Masonry",pageId:"",compId:"i6s06d18",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"0.4","alpha-color5":"1",color1:"#000000",color2:"#000000",color3:"#ffffff",color4:"#000000",color5:"color_15",version:"2","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"value",color2:"value",color3:"value",color4:"value",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAMasonrySkin"}},"wysiwyg.viewer.components.LoginButton":{layout:{width:190,height:46},componentType:"wysiwyg.viewer.components.LoginButton",data:{type:"LoginButton",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},language:"en"},style:"lgn0"},"wysiwyg.viewer.components.PayPalButton":{layout:{width:170,height:47},componentType:"wysiwyg.viewer.components.PayPalButton",data:{type:"PayPalButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},merchantID:""},props:{type:"PayPalButtonProperties",metaData:{schemaVersion:"1.0"},buttonType:"buy",itemName:"",itemID:"",organizationName:"",organizationID:"",amount:"",currencyCode:"USD",target:"_blank",showCreditCards:!0,smallButton:!1},style:"ppb0"},"wysiwyg.viewer.components.PinterestFollow":{layout:{width:40,height:20},componentType:"wysiwyg.viewer.components.PinterestFollow",data:{type:"PinterestFollow",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},urlChoice:"www.pinterest.com/wixcom/",label:"Pinterest"},style:"pf1"},"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":{layout:{width:40,height:20},componentType:"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt",data:{type:"PinterestPinIt",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:"",urlFormat:"hashBang",description:"Check it out!"},props:{type:"PinterestPinItProperties",metaData:{schemaVersion:"1.0"},size:"small",color:"gray",counterPosition:"none"},style:"PinterestPinIt_1"},"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":{layout:{width:237,height:377,x:385,y:6358},componentType:"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget",data:{type:"PinItPinWidget",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},pinId:"http://www.pinterest.com/pin/204421270560540859/"},style:"PinItPinWidget_1"},"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":{layout:{width:280,height:68},componentType:"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",style:"SingleAudioPlayer_1"},"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":{layout:{width:56,height:24},componentType:"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton",data:{type:"SkypeCallButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},skypeName:"",buttonType:"call"},props:{type:"SkypeCallButtonProperties",metaData:{schemaVersion:"1.0"},imageSize:"medium",imageColor:"blue"},style:"SkypeCallButton_1"},"wysiwyg.viewer.components.SliderGallery":{layout:{width:480,height:160},componentType:"wysiwyg.viewer.components.SliderGallery",style:"sg1"},"wysiwyg.viewer.components.SlideShowGallery":{layout:{width:480,height:360},componentType:"wysiwyg.viewer.components.SlideShowGallery",style:"ssg1"},"wysiwyg.viewer.components.LinkBar":{layout:{width:105,height:30},componentType:"wysiwyg.viewer.components.LinkBar",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Wix Facebook page",uri:"b1cd13f9d4dfb1450bbb325285106177.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"https://www.facebook.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Wix Twitter page",uri:"01113281ebb7dfb57a8dc2a02eb1cb92.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"http://www.twitter.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Wix Google+ page",uri:"806f5f56d9a7b8849f2f2ea71ff5c0cc.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"https://plus.google.com/117167403531518744294/posts",target:"_blank"}}]},props:{type:"LinkBarProperties",metaData:{schemaVersion:"1.0"},gallery:"social_icons",iconSize:30,spacing:5,bgScale:1,orientation:"HORIZ"},style:"lb1"},"wysiwyg.viewer.components.SoundCloudWidget":{layout:{width:482,height:171},componentType:"wysiwyg.viewer.components.SoundCloudWidget",data:{type:"SoundCloudWidget",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},url:"",showArtWork:!0,autoPlay:!1},style:"scw1"},"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":{layout:{width:300,height:56},componentType:"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow",data:{type:"SpotifyFollow",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:""},props:{type:"SpotifyFollowProperties",metaData:{schemaVersion:"1.0"},size:"large",theme:"light",showFollowersCount:!0},style:"SpotifyFollow_1"},"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":{layout:{width:250,height:82},componentType:"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer",data:{type:"SpotifyPlayer",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:""},props:{type:"SpotifyPlayerProperties",metaData:{schemaVersion:"1.0"},size:"compact",color:"black",style:"list"},style:"SpotifyPlayer_1"},"tpa.viewer.components.StripShowcase":{layout:{width:500,height:500},componentType:"tpa.viewer.components.StripShowcase",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"Describe your image here",width:800,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"Describe your image here",width:1e3,height:673},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"Describe your image here",width:2294,height:1524},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dramatic Dew Drops",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here",width:800,height:1067},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"Describe your image here",width:555,height:580},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"Describe your image here",width:600,height:900},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"Describe your image here",width:1e3,height:1500},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"Describe your image here",width:700,height:814},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Raindrops on Window",uri:"e5433a67390ddeb83e13ebda5ddade7d.jpg",description:"Describe your image here",width:532,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tropical Berries Close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"Describe your image here",width:803,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"Describe your image here",width:750,height:1e3}]},props:{type:"StripShowcaseProperties",metaData:{schemaVersion:"1.0"},galleryImageOnClickAction:"disabled",cropAndFitStage:"fit",imageScale:"4:3",imageMargin:5,showThumbnails:!0,thumbsScale:"4:3",thumbsMargin:5,autoplay:!1,autoplayInterval:5,arrowMode:!1},style:{componentClassName:"tpa.viewer.components.StripShowcase",pageId:"",compId:"i6s28d55",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_1",color2:"color_15",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"0.5","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAStripShowcaseSkin"}},"tpa.viewer.components.StripSlideshow":{layout:{width:500,height:500},componentType:"tpa.viewer.components.StripSlideshow",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"27f904ad057a38ab22a806fba8051170.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"632212ab58f9280a24539800cf453443.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"f1aba941244eda43f8ed7116ab2a98d4.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"60562c9106f4ca8ba07bb4d430935993.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600}]},props:{type:"StripSlideshowProperties",metaData:{schemaVersion:"1.0"},font:"arial",textMode:"titleAndDescription",alignText:"left",autoplayInterval:5,autoplay:!1,transDuration:1,transition:"scroll",titleColor:"#30BDFF",alphaTitleColor:"1",descriptionColor:"#2F2E2E",alphaDescriptionColor:"1",backgroundColor:"#FFFFFF",alphaBackgroundColor:"0.75"},style:{componentClassName:"tpa.viewer.components.StripSlideshow",pageId:"",compId:"i6s2b7bp",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_18",color2:"color_15",color3:"color_11",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.75"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAStripSlideshowSkin"}},"tpa.viewer.components.Thumbnails":{layout:{width:980,height:500},componentType:"tpa.viewer.components.Thumbnails",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"ThumbnailsProperties",metaData:{schemaVersion:"1.0"},font:"arial",cropAndFitStage:"crop",componentScale:"4:3",margin:5,textMode:"titleAndDescription",arrowMode:!0,alignText:"left",autoplayInterval:5,autoplay:!1,transDuration:1,transition:"crossFade",thumbnailsGravity:"bottom",galleryImageOnClickAction:"disabled",textColor:"#FFFFFF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#2F2E2E",alphaTextBackgroundColor:"0.6"},style:{componentClassName:"tpa.viewer.components.Thumbnails",pageId:"",compId:"i6s2bmjp",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_11",color2:"color_11",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.6"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAThumbnailsSkin"}},"wysiwyg.viewer.components.WTwitterFollow":{layout:{width:183,height:22},componentType:"wysiwyg.viewer.components.WTwitterFollow",data:{type:"TwitterFollow",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},accountToFollow:"wix"},props:{type:"WTwitterFollowProperties",metaData:{schemaVersion:"1.0"},showCount:!0,width:100,dataLang:"en",showScreenName:!0},style:"tf1"},"wysiwyg.viewer.components.WTwitterTweet":{layout:{width:100,height:20},componentType:"wysiwyg.viewer.components.WTwitterTweet",data:{type:"TwitterTweet",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},defaultText:"",urlFormat:"hashBang",accountToFollow:""},style:"twt1"},"wysiwyg.viewer.components.Video":{layout:{width:480,height:360},componentType:"wysiwyg.viewer.components.Video",style:"v1"},"wysiwyg.viewer.components.VKShareButton":{layout:{width:100,height:21},componentType:"wysiwyg.viewer.components.VKShareButton",data:{type:"VKShareButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},style:"Button",urlFormat:"hashBang",text:"Share"},props:{type:"VKShareProperties",metaData:{schemaVersion:"1.0"},rightAngles:!1},style:"vks1"},"wysiwyg.viewer.components.ContactForm":{layout:{width:480,height:180},componentType:"wysiwyg.viewer.components.ContactForm",style:"cf1"},"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":{layout:{width:212,height:55},componentType:"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",data:{type:"YouTubeSubscribeButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},youtubeChannelId:"wix"},props:{type:"YouTubeSubscribeButtonProperties",metaData:{schemaVersion:"1.0"},layout:"full",theme:"light"},style:"YouTubeSubscribeButton_1"}}}),define("tpa/componentsData/componentsDefaultData",["lodash","tpa/componentsData/componentsDefaultData.json"],function(e,t){"use strict";return{getComponentDefaultData:function(a){return e.cloneDeep(t[a])||{}}}}),define("tpa/componentsData/componentsDefaultDataGenerator",["lodash","jquery","constants","tpa/componentsData/addCompKeyToCompTypeMap","tpa/componentsData/componentsDefaultData"],function(e,t,a,i,n){"use strict";function o(e,i){var n=function(e){var i=e.documentServices.siteSegments.getPagesContainer(),n=e.documentServices.siteSegments.layout.get(i);return{x:n.width/2,y:t(window).scrollTop()+window.innerHeight/2-n.y-a.UI.TOPBAR_HEIGHT}}(e);return{x:n.x-i.width/2,y:n.y-i.height/2}}return{getComponentDefinition:function(t,a){var s=i.getCompType(a.compType),r=n.getComponentDefaultData(s);return new Promise(function(a){require(["addPanelInfra"],function(i){var n=i.componentsDefaultData.getComponentDefault(s);n&&(r.layout=function(t,a){var i={};return e.forIn(a,function(a,n){e.includes(["width","height"],n)&&(i[n]=t?t.stageLayout?t.stageLayout[n]:t.panelLayout[n]:a)}),i}(n,r.layout),r.data=function(t){var a=t&&t.data,i=e.merge({},e.omit(a,"id"),t.stageData);return e.isEmpty(i)?null:i}(n)||r.data,r.props=n.props||r.props);var p=o(t,r.layout);e.merge(r.layout,p),r.type="Component",a(r)})})}}}),define("tpa/appMarket/appMarketHandlers",["lodash","blog","experiment","tpa/appMarket/services/appMarketTabService","tpa/appMarket/utils/appMarketUtils","tpa/services/pendingAppsService","tpa/services/navigateAndOpenAppService","tpa/componentsData/componentsDefaultDataGenerator","tpa/utils/tpaUtils","tpa/constants/constants","tpa/bi/bi","tpa/services/tpaAddAppService","tpa/services/tpaAlertsService","tpa/settings/settings","tpa/superApps/superApps","tpa/packagePicker/packagePicker"],function(e,t,a,i,n,o,s,r,p,d,c,l,g,u,m,h){"use strict";var f=function(e){n.closeAppMarketModal(e.panelManager.closePanelByName,"appMarketPermissionsModal")},y=function(e){n.closeAppMarketModal(e.panelManager.closePanelByName,"appMarketAppModal")};return{openMarketPopup:function(e,t,a){n.openAppMarketModalWithAppDefinitionId(e.panelManager.openPanel,"appMarketAppModal",{url:t.params.url,appDefinitionId:t.params.appDefinitionId,onClose:a})},closeMarketPopup:y,openDeletePopupMessage:function(t,a){var n=e.get(a,"params.appDefinitionId"),o=function(e,t){var a=e.documentServices.tpa.app.getDataByAppDefId(t);a&&(e.documentServices.tpa.app.hasMainSection(a)?e.panelManager.openPanel("tpa.message.cannotDeleteSection",{title:"tpa_messages_oops_title",appName:a.appDefinitionName,appDefId:a.appDefinitionId},!0):e.panelManager.openPanel("tpaPanels.message.deleteTPAWidgetInstructions",{appName:a.appDefinitionName,appDefId:a.appDefinitionId},!0))}.bind(null,t,n);i.closeAppMarketTab(t.panelManager.closePanelByName),s.navigateAndScrollToComp(t,n,o)},openTPAUpgradeModal:function(t,a){var n=e.get(a,"params.appDefinitionId"),o=e.partial(h.startUpgradeFlow,t,n,!0);i.closeAppMarketTab(t.panelManager.closePanelByName),s.navigateAndScrollToComp(t,n,o)},openModal:function(e,t){n.openAppMarketModalWithAppDefinitionId(e.panelManager.openPanel,"appMarketPermissionsModal",{url:t.params.url,appDefinitionId:t.params.appDefinitionId})},closeModal:f,openAppMarketModal:function(e,t){t.params.shouldTranslateTitle=void 0!==t.params.shouldTranslateTitle&&t.params.shouldTranslateTitle,e.ui.focus.setOnEditor(),n.openAppMarketModal(e.panelManager.openPanel,"appMarketModal",t.params)},closeAppMarketModal:function(e,t){n.closeAppMarketModalById(e,t.params.id)},closeAppMarket:function(e){n.closeAppMarket(e.panelManager.closePanelByName)},openAppMarketHelp:function(e){n.openAppMarketHelp(e)},addComponentToSite:function(e,t){var a=t.params,n=a&&a.pageId||e.documentServices.pages.getFocusedPageId(),o=e.documentServices.pages.getReference(n);r.getComponentDefinition(e,a).then(function(t){e.components.add(o,t,void 0,function(t){e.selection.selectComponentByCompRef(t),e.history.add("add component from app market"),p.bi.reportAddComponentBIEvent(e,t.id,a.type,a.biData)}),i.closeAppMarketTab(e.panelManager.closePanelByName)})},getUserDetails:function(e,t,a){var i=e.documentServices.generalInfo.getUserInfo();a(i&&i.name||"")},getPendingAppsList:function(e,t,a){a(o.getPendingApps(e))},addAppToSite:function(t,n){var o=e.get(n,"params.appDefinitionDataObj"),s=e.get(o,"appDefinitionId"),r=n.params.widgetId,c=t.documentServices.pages.getFocusedPageId(),m=t.documentServices.tpa.app.getDataByAppDefId(s),h=n.params.biData,P=n.params.is_permissions_app;if(n.params.provision_demo_app){var v=function(){u.open(t,t.selection.getSelectedComponents()),p.bi.reportTpaAddedBiEvent(t,s,r,c,null,!0,P,h,!0)},I=function(){g.openProvisionFailedAlert(t.panelManager.openPanel,s)};a.isOpen("se_tpaProvisionOnAdd")?t.saveManager.saveInBackground(v,I):t.documentServices.tpa.provision.provisionAppDemoSave(m.applicationId,v,I)}else{var _=n.params.type,S=function(t){return"ADD_PANEL"===e.get(t,"params.biData.referral_info")?d.BI.initiator.EDITOR:d.BI.initiator.APP_MARKET}(n),A=e.get(o,"appName"),D={widgetId:r,showPageAddedPanel:!e.get(o,"doNotShowPageAddedPanel"),x:n.params.x,y:n.params.y,shouldNavigate:!0};l.addApp(t,s,A,m,_,S,P,h,D)}f(t),y(t),i.closeAppMarketTab(t.panelManager.closePanelByName)},appIsInstalled:function(t,a,i){var n=e.get(a,"params.appDefinitionId"),o=e.get(a,"params.includingDemoMode");i(l.isAppInstalled(t,n,o))},removePendingApp:function(e,t){o.dismiss(e,t.params.id)},addPendingApp:function(e,t){o.add(e,t.params.id)},save:function(e,t,a){e.documentServices.generalInfo.isFirstSave()?e.saveManager.saveInBackground(function(){a({response:"success",metaSiteId:e.documentServices.generalInfo.getMetaSiteId()})},function(){g.openSaveFailedAlertForAppMarket(e),a({response:"site was not saved."})}):a({response:"success",metaSiteId:e.documentServices.generalInfo.getMetaSiteId()})},openApp:function(t,a){var n=e.get(a,"params.appDefinitionId");p.bi.reportBIOnAppIntent(t,c.events.APP_INTENT,n,d.BI.initiator.EDITOR,d.BI.type.OPENAPP_SETTINGS),i.closeAppMarketTab(t.panelManager.closePanelByName),s.navigateAndOpenSettingsForAppDefId(t,n)},setAppMarketState:function(t,a){var i=e.get(a,"params.state","");n.setAppMarketSessionUserPrefs(t,{state:i})},isDevMode:function(e,t,a){a({isDevMode:p.isInDevMode()})}}}),define("tpa/appMarket/utils/appMarketPostMessageUtils",["tpa/common/editorTPAPostMessageCommon","util","tpa/appMarket/utils/appMarketUtils"],function(e,t,a){"use strict";var i={OPEN_MARKET_POPUP:"openMarketPopup",CLOSE_MARKET_POPUP:"closeMarketPopup",OPEN_MODAL:"openModal",CLOSE_MODAL:"closeModal",ADD_APP_TO_SITE:"addAppToSite",ADD_COMPONENT_TO_SITE:"addComponentToSite",GET_USER_DETAILS:"getUserDetails",GET_PENDING_APPS_LIST:"getPendingAppsList",APP_IS_INSTALLED:"appIsInstalled",REMOVE_PENDING_APP:"removePendingApp",ADD_PENDING_APP:"addPendingApp",OPEN_APP_MARKET_MODAL:"openAppMarketModal",CLOSE_APP_MARKET_MODAL:"closeAppMarketModal",CLOSE_APP_MARKET:"closeAppMarket",OPEN_APP_MARKET_HELP:"openAppMarketHelp",SAVE:"save",OPEN_APP:"openApp",SET_APP_MARKET_STATE:"setAppMarketState",IS_DEV_MODE:"isDevMode",OPEN_DELETE_POPUP_MESSAGE:"openDeletePopupMessage",OPEN_TPA_UPGRADE_MODAL:"openTPAUpgradeModal"},n=function(e){return i[e]};return{getMethodName:n,isAppMarketMessage:function(e){return"APP_MARKET"===e},shouldHandleMessage:function(e){return!!n(e)},sendOnOpenEvent:function(t){e.callPostMessage(t,{eventType:"ON_MARKET_OPEN"},a.getAppMarketTargetOrigin())},sendMessageToAppMarket:function(t,i,n){var o={eventType:"ON_COMMAND_RESPONSE",callerId:i,params:n};e.callPostMessage(t,o,a.getAppMarketTargetOrigin())}}}),define("tpa/appMarket/services/appMarketPostMessageService",["lodash","core","tpa/appMarket/appMarketHandlers","tpa/appMarket/utils/appMarketPostMessageUtils"],function(e,t,a,i){"use strict";var n=function(e,t,n){var o=i.getMethodName(t.cmd);a[o].apply(this,[e,t,n])},o=function(e,t){var a=void 0;try{t.data?a=JSON.parse(t.data):t.originalEvent&&t.originalEvent.data&&(t=t.originalEvent,a=JSON.parse(t.data))}catch(e){return}a&&i.isAppMarketMessage(a.intent)&&i.shouldHandleMessage(a.cmd)&&n(e,a,s(t.source,a))},s=function(e,t){return function(a){i.sendMessageToAppMarket(e,t.id,a)}};return{init:function(e){window.addEventListener("message",o.bind(this,e),!1)},callHandler:n,handleAppMarketMessage:o}}),define("tpa/services/tpaCompNameService",["lodash"],function(e){"use strict";return{getCompName:function(t,a){var i=t.components.data.get(a),n=t.documentServices.tpa.app.getData(i.applicationId),o=t.documentServices.tpa.appMarket.getData(n.appDefinitionId);if(o){var s=e.find(o.widgets,{widgetId:i.widgetId});return s?s.title:o.name}return n.appDefinitionName}}}),define("tpa/settings/frames/tpaSettingsPanelFrameSimple.rt",["react","lodash","symbols","baseUI","baseUILib"],function(e,t,a,i,n){"use strict";return function(){return e.createElement("div",function(e,a){var i=t.assign({},e,a);return e.hasOwnProperty("style")&&(i.style=t.defaults(i.style,e.style)),e.hasOwnProperty("className")&&a.hasOwnProperty("className")&&(i.className=a.className+" "+e.className),i}({className:"tpa-settings-panel-frame"},this.getPanelProps()),e.createElement(n.PanelHeader,{className:"dragger dark",onMouseDown:function(e){this.startDrag(e,this.getDragLimits())}.bind(this),onHelp:this.props.openHelpCenter,onClose:this.props.close},e.createElement("span",{},this.props.title)),this.props.shouldAddScroll?e.createElement(n.CustomScroll,{key:"549"},e.createElement("div",{className:"content",style:this.getContentStyle()},this.props.children)):null,this.props.shouldAddScroll?null:e.createElement("div",{className:"content",style:this.getContentStyle(),key:"733"},this.props.children))}}),define("tpa/settings/frames/tpaSettingsPanelFrameSimple",["lodash","react","core","util","panels","constants","tpa/settings/frames/tpaSettingsPanelFrameSimple.rt"],function(e,t,a,i,n,o,s){"use strict";return t.createClass({displayName:o.PANEL_TYPES.TPA_SETTINGS,mixins:[i.draggableMixin,n.mixins.panelDragLimitsMixin,a.mixins.editorAPIMixin],propTypes:{panelName:t.PropTypes.string.isRequired,title:t.PropTypes.string.isRequired,width:t.PropTypes.number,height:t.PropTypes.number,top:t.PropTypes.string,left:t.PropTypes.string,onHelpClicked:t.PropTypes.func,shouldAddScroll:t.PropTypes.bool.isRequired},getInitialState:function(){return{showHelp:!1}},getPanelProps:function(){var t={};return e.forEach(["width","top","left"],e.bind(function(e){this.props[e]&&(t[e]=this.props[e])},this)),e({style:t}).defaults(this.props).omit("children","top","left").value()},toggleHelp:function(){var e=!this.state.showHelp;this.setState({showHelp:e})},getContentStyle:function(){return{height:e.isNumber(this.props.height)?this.props.height+"px":"100%"}},render:s})}),define("tpa/settings/frames/tpaSettingsPanelFrame",["higherOrderComponents","tpa/settings/frames/tpaSettingsPanelFrameSimple"],function(e,t){"use strict";return e.panelFrame(t)}),define("tpa/settings/compPanels/tpaSettings.rt",["react","lodash","baseUI","util","constants","tpa/settings/frames/tpaSettingsPanelFrame"],function(e,t,a,i,n,o){"use strict";return function(){return e.createElement(o,t.assign({},{className:t({"tpa-settings-panel-frame-padding":!this.state.isNewVersion,version2:this.state.isNewVersion}).transform(function(e,t,a){t&&e.push(a)},[]).join(" "),title:this.getAppName(),width:this.state.width,height:this.state.isNewVersion?this.state.height:null,ref:"tpaSettingsFrame",top:n.UI.TOPBAR_HEIGHT+24+"px",left:"78px",onHelpClicked:this.onHelpClicked,shouldAddScroll:!this.state.isNewVersion},this.getFrameProps()),e.createElement("div",{className:t({"tpa-settings-iframe-wrapper":!0,"tpa-settings-iframe-wrapper-padding":!this.state.isNewVersion}).transform(function(e,t,a){t&&e.push(a)},[]).join(" "),style:this.getDialogStyle()},this.shouldShowPreloader()?e.createElement("div",{key:"preloader",className:"tpa-preloader"},e.createElement("div",{},e.createElement(a.preloader,{}),e.createElement("div",{className:"text"},i.translate("tpa_loading_settings"),"."))):null,this.state.overlay===this.OVERLAY_STATE.UNRESPONSIVE?e.createElement("div",{key:"unavailableMessage",className:"tpa-unresponsive"},e.createElement("header",{},e.createElement(a.symbol,{name:"alert"}),"\n                ",i.translate("tpa_oops"),"\n            "),e.createElement("div",{id:"textContainer"},e.createElement("span",{id:"text",dangerouslySetInnerHTML:{__html:this.getUnresponsiveText()}}),e.createElement("span",{id:"dismissButton",onClick:this.refs.tpaSettingsFrame.openHelpCenter},e.createElement("a",{}," ",this.getAppName()," ")),e.createElement("span",{id:"text_2",dangerouslySetInnerHTML:{__html:this.getUnresponsiveContact()}}))):null,e.createElement("iframe",{scrolling:"no",frameBorder:"0",marginHeight:"0",marginWidth:"0",className:"tpa-iframe",width:"100%",height:this.getIframeHeight(),id:"tpaSettingsFrame",src:this.state.url})))}}),define("tpa/common/withOnCloseMessage",["react","core"],function(e,t){"use strict";return function(a){var i=e.createClass({mixins:[t.mixins.editorAPIMixin],displayName:"closeMessageWrapperFor-"+a.displayName,propTypes:{onClose:e.PropTypes.func,shouldCloseModal:e.PropTypes.bool,closeModalMessage:e.PropTypes.any,panelName:e.PropTypes.string.isRequired},componentWillUnmount:function(){this.props.onClose&&this.props.onClose(this.props.closeModalMessage)},componentWillReceiveProps:function(e){e.shouldCloseModal&&this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:function(){return e.createElement(a,this.props)}});return i._BaseClass=a,i}}),define("tpa/settings/compPanels/tpaSettings",["lodash","react","jquery","core","compPanels","tpa/bi/bi","util","stateManagement","tpa/utils/tpaUtils","tpa/services/tpaCompNameService","tpa/services/tpaHelpService","tpa/services/tpaAlertsService","tpa/settings/compPanels/tpaSettings.rt","tpa/constants/constants","tpa/common/withOnCloseMessage","experiment"],function(e,t,a,i,n,o,s,r,p,d,c,l,g,u,m,h){"use strict";var f=528;return m(t.createClass({ALIVE_TIMEOUT:2e4,STYLES_READY_SDK_VERSION:"1.64.0",OVERLAY_STATE:{PRELOADER:"preloader",UNRESPONSIVE:"unresponsive",NONE:"none"},mixins:[n.compPanelMixin],displayName:"TPASettings",propTypes:{width:t.PropTypes.string},getDefaultProps:function(){return{panelName:"tpa.compPanels.tpaSettings"}},getInitialState:function(){var t=this.getEditorAPI();this.selectedComponent=e.isArray(this.props.selectedComponent)?this.props.selectedComponent[0]:this.props.selectedComponent,this.data=t.components.data.get(this.selectedComponent),this.appData=t.documentServices.tpa.app.getData(this.data.applicationId),this.maxScreenHeight=a(window).height()-126;var i=!!this.props.isNewVersion;if(this.helpId="",this.appDataIsValid()){var n=this.getContentSize(i);return{url:!0!==this.appData.demoMode||h.isOpen("se_tpaProvisionOnAdd")?this.getUrl():void 0,width:this.props.width||n.width,height:n.height,overlay:this.OVERLAY_STATE.PRELOADER,isNewVersion:i}}return{width:400,height:200}},appDataIsValid:function(){return!(e.isArray(this.appData)&&0===e.size(this.appData)||e.isObject(this.appData)&&e.isEmpty(this.appData))},componentDidMount:function(){var t=this.getEditorAPI();if(this.isAppReady(this.props)||(this._appAliveTimeout=window.setTimeout(this.onAppAliveTimeoutExpires,this.ALIVE_TIMEOUT)),t.store.dispatch(r.leftBar.logic.collapseMenu()),this.appDataIsValid()){if(h.isOpen("se_tpaProvisionOnAdd")&&this.appData.notProvisioned)t.saveManager.saveInBackground(e.noop,e.partial(l.openProvisionFailedAlert,t.panelManager.openPanel,this.appData.appDefinitionId));else if(this.appData.demoMode){t.documentServices.tpa.provision.provisionAppDemoSave(this.appData.applicationId,function(){this.appData=t.documentServices.tpa.app.getData(this.data.applicationId),this.setState({url:this.getUrl()}),this.reportTpaAddedBiEvent(t)}.bind(this),function(){l.openProvisionFailedAlert(t.panelManager.openPanel,this.appData.appDefinitionId),this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE})}.bind(this))}}else this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE});this.panelOpenTime=this.getTime();var a={app_id:this.appData.appDefinitionId,app_site_id:this.appData.instanceId,instance_id:this.props.origCompId};t.bi.event(o.events.TPA_OPEN_SETTINGS,a)},componentWillReceiveProps:function(t){this.helpId=e.get(t,"articleId");var a=this.getEditorAPI();a.components.is.exist(this.props.selectedComponent)||a.panelManager.closePanelByName(this.props.panelName),this.isAppReady(t)&&this.setState({overlay:this.OVERLAY_STATE.NONE})},reportTpaAddedBiEvent:function(e){var t=e.documentServices.generalInfo.isFirstSave()?e.documentServices.generalInfo.getMetaSiteId():"",a={is_permissions_app:"Wix"===this.appData.by?0:1,is_first:1,app_id:this.appData.appDefinitionId,widget_id:this.data.widgetId,app_site_id:this.appData.instanceId,instance_id:this.props.origCompId,category:"",section:"",search_term:"",item_position:"",referral_info_category:"",referral_info:"",template_guid:t,modal_tab_name:"",origin:"template_provision",adding_method:"template",page_id:e.documentServices.pages.getFocusedPageId()};e.bi.event(o.events.TPA_ADDED,a)},getContentSize:function(e){var t=this.isSection()?this.appData.widgets[this.data.widgetId].settings:this.appData.sectionSettings;return{height:function(e,t){return t=parseInt(t,10),e?Math.min(f,t):t}(e,t.height),width:parseInt(t.width,10)}},isSection:function(){return this.appData.widgets&&this.data.widgetId},getUrl:function(){var e=this.getEditorAPI(),t=this.data.widgetId||e.documentServices.tpa.app.getMainSectionWidgetData(this.appData).widgetId;return e.documentServices.tpa.app.url.getSettingsUrl(this.appData.applicationId,t,this.props.origCompId,{width:this.props.width,isNewVersion:this.props.isNewVersion,bi:p.bi.getAppIntentBiParamsToAddToUrl(e,this.appData.appDefinitionId,u.BI.type.GFPP_SETTINGS)})},getDialogStyle:function(){var t="100%";return this.state.isNewVersion||(t=this.state.overlay===this.OVERLAY_STATE.NONE?"100%":e.min([this.maxScreenHeight,this.state.height])),{height:t,position:"relative"}},getIframeHeight:function(){return this.state.isNewVersion?"100%":this.state.height},onAppAliveTimeoutExpires:function(){this.showUnresponsiveOverlay()},showUnresponsiveOverlay:function(){this.isAppReady(this.props)?(this.clearAliveTimeout(),this.setState({overlay:this.OVERLAY_STATE.NONE})):(this.reportBIAppNotResponsive(),this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE}))},reportBIAppNotResponsive:function(){var t=this.getEditorAPI(),a=this.data.widgetId?e.get(this.appData.widgets,this.data.widgetId):t.documentServices.tpa.app.getMainSectionWidgetDataFromApplicationId(this.data.applicationId),i={endpoint:e.get(a,"settings.url"),app_id:this.appData.appDefinitionId};t.documentServices.bi.error(o.errors.APP_IS_NOT_RESPONSIVE,i)},getTime:function(){return Date.now()},sendClosePanelBI:function(){var e=this.getEditorAPI(),t=this.props.origCompId,a={app_id:this.appData.appDefinitionId,app_site_id:this.appData.instanceId,instance_id:t,seconds_opened:parseInt((this.getTime()-this.panelOpenTime)/1e3,10)};e.bi.event(o.events.TPA_CLOSE_SETTINGS,a)},componentWillUnmount:function(){this.clearAliveTimeout(),this.sendClosePanelBI()},clearAliveTimeout:function(){this._appAliveTimeout&&window.clearTimeout(this._appAliveTimeout)},isAppReady:function(t){var a=e.get(t,"sdkVersion")||this.props.sdkVersion;return p.sdkVersionIsAtLeast(a,this.STYLES_READY_SDK_VERSION)?this.shouldShowSettingsPanelFromStyleReadyEvent(t):this.shouldShowSettingsPanelFromIsAliveEvent(t)},shouldShowSettingsPanelFromStyleReadyEvent:function(t){return e.get(t,"stylesReady")||!1},shouldShowSettingsPanelFromIsAliveEvent:function(t){return e.get(t,"isAlive")||!1},shouldShowPreloader:function(){return!this.isAppReady(this.props)&&this.state.overlay===this.OVERLAY_STATE.PRELOADER||!0===this.appData.demoMode&&!h.isOpen("se_tpaProvisionOnAdd")},onHelpClicked:function(){var t=this.getEditorAPI(),a=o.events.TPA_HELP_CLICK,n=this.data.widgetId||t.documentServices.tpa.app.getMainSectionWidgetData(this.appData).widgetId,s={widget_id:n,app_id:this.appData.appDefinitionId,origin:"settings"},r=this.props.panelName,p={openPanelBiEvent:a,openPanelBiParams:e.merge({help_status:"open"},s),closePanelBiEvent:a,closePanelBiParams:e.merge({help_status:"close"},s),origin:"settings"},d={panel_name:r,origin:i.constants.BI.HELP.ORIGIN.PANEL,component:t.selection.getSelectedComponentType(),learn_more:!1};this.helpId?t.panelManager.openHelpCenter(this.helpId,p,d):c.getHelpId(t,this.appData.appDefinitionId,n,c.HELP_END_POINTS.SETTINGS).then(function(e){t.panelManager.openHelpCenter(e,p,d)})},getUnresponsiveText:function(){var t=this.appData.appDefinitionName;if(t){return e.template(s.translate("tpa_unavail_problems"))({appName:t})}},getAppName:function(){var e=this.getEditorAPI();return e.components.is.exist(this.props.selectedComponent)?d.getCompName(e,this.selectedComponent):""},getUnresponsiveContact:function(){if(!e.isEmpty(this.appData))return s.translate("tpa_unavail_problems_2")},render:g}))}),define("tpa/compPanels/appMarketPanel.rt",["react","lodash","panels","experiment"],function(e,t,a,i){"use strict";return function(){return e.createElement(a.frames.leftPanelFrame,t.assign({},{panelName:this.props.panelName,label:i.isOpen("appMarketNoHeader")?void 0:this.translateIfNeeded("app_market_title"),className:this.getAppMarketPanelClass(),panelClass:this.getAppMarketContainingPanelClass(),panelIndex:this.props.panelIndex},this.getPanelProps()),e.createElement("iframe",{src:this.state.appMarketUrl,className:this.getAppMarketIframeClass(),frameBorder:"0",scrolling:"no"}))}}),define("tpa/compPanels/appMarketPanel",["lodash","react","core","util","tpa/appMarket/utils/appMarketUtils","tpa/utils/tpaUtils","tpa/compPanels/appMarketPanel.rt","tpa/bi/bi","helpIds","experiment"],function(e,t,a,i,n,o,s,r,p,d){"use strict";function c(){var e=["app-market-panel-20"];return d.isOpen("appMarketNoHeader")&&e.push("no-header"),e}return t.createClass({displayName:"AppMarketPanel",propTypes:{urlParams:t.PropTypes.shape({openMarketOrigin:t.PropTypes.string.isRequired,referralInfoCategory:t.PropTypes.string,section:t.PropTypes.string,openAppDefId:t.PropTypes.string,appDefinitionId:t.PropTypes.string,categorySlug:t.PropTypes.string,query:t.PropTypes.string,tags:t.PropTypes.string,tests:t.PropTypes.string}).isRequired,helpId:t.PropTypes.string.isRequired},mixins:[i.translationMixin,a.mixins.editorAPIMixin],getInitialState:function(){return{appMarketUrl:function(t,a){var i={};return"market_button"===a.openMarketOrigin&&(i=n.getAppMarketUrlParams()),e.assign(i,a),i.origin=n.origin(),i.newUrl=!0,i.state=e.get(n.getAppMarketSessionUserPrefs(t),"state",""),t.documentServices.tpa.appMarket.getUrl(i)}(this.getEditorAPI(),this.props.urlParams)}},getDefaultProps:function(){return{panelName:"tpa.compPanels.appMarketPanel",helpId:p.EXTERNAL.APP_MARKET}},timeMarketOpened:void 0,openMarketOrigin:void 0,getTime:function(){return Date.now()},componentDidMount:function(){this.timeMarketOpened=this.getTime(),this.openMarketOrigin=this.props.urlParams&&this.props.urlParams.openMarketOrigin},componentWillUnmount:function(){var e={open_origin:this.openMarketOrigin,seconds_opened:parseInt((this.getTime()-this.timeMarketOpened)/1e3,10)};this.getEditorAPI().bi.event(r.events.MARKET_CLOSED,e)},getPanelProps:function(){return{urlParams:this.props.urlParams,onHelpClicked:this.onHelpClicked,helpId:this.props.helpId}},onHelpClicked:function(){this.getEditorAPI().bi.event(r.events.MARKET_HELP_CLICK)},getAppMarketContainingPanelClass:function(){var e=c();return d.isOpen("appMarketResponsivePanel")&&e.push("app-market-responsive"),e.join(" ")},getAppMarketIframeClass:function(){return d.isOpen("appMarketResponsivePanel")?"app-market-frame-responsive":"app-market-frame-20"},getAppMarketPanelClass:function(){return c().join(" ")},render:s})}),define("tpa/compModals/appMarketAppModal.rt",["react","lodash","panels"],function(e,t,a){"use strict";return function(){return e.createElement(a.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.translateIfNeeded("app_market_title"),shouldHideHelp:!0,onClose:this.onClose},e.createElement("div",{className:"app-market-app-modal-container"},e.createElement("iframe",{src:this.props.iframeUrl,width:"100%",height:"100%",frameBorder:"0"})))}}),define("tpa/compModals/appMarketAppModal",["react","core","util","tpa/compModals/appMarketAppModal.rt"],function(e,t,a,i){"use strict";return e.createClass({propTypes:{onClose:e.PropTypes.func.isRequired},displayName:"appMarketAppModal",mixins:[a.translationMixin,t.mixins.editorAPIMixin],render:i,onClose:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onClose&&this.props.onClose()}})}),define("tpa/compModals/appMarketPermissionsModal.rt",["react","lodash","panels"],function(e,t,a){"use strict";return function(){return e.createElement(a.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.getTitle(),onClose:this.onClose,shouldHideHelp:!0},e.createElement("div",{className:"app-market-permissions-modal-container"},e.createElement("iframe",{src:this.props.iframeUrl,className:"app-market-permissions-modal",width:"100%",height:"100%",frameBorder:"0"})))}}),define("tpa/compModals/appMarketPermissionsModal",["lodash","react","core","util","tpa/compModals/appMarketPermissionsModal.rt","tpa/bi/bi","experiment"],function(e,t,a,i,n,o,s){"use strict";return t.createClass({displayName:"appMarketPermissionsModal",mixins:[i.translationMixin,a.mixins.editorAPIMixin],onClose:function(){var e={closing_method:"X",app_id:this.props.appDefinitionId};return this.getEditorAPI().bi.event(o.events.PERMISSION_MODAL_CLOSED,e),!0},getTitle:function(){return!s.isOpen("se_tpaProvisionOnAdd")&&e.includes(this.props.iframeUrl,"demoMode=true")?this.translateIfNeeded("app_market_permissions_template_message_title"):this.translateIfNeeded("app_market_permissions_message_title")},render:n})}),define("tpa/compModals/tpaSettingsModal.rt",["react","lodash","panels","core"],function(e,t,a,i){"use strict";return function(){return e.createElement(a.frames.focusPanelFrame,{title:this.props.title,shouldHideHeader:this.shouldHideHeader(),panelName:"tpa.compModals.tpaSettingsModal",width:this.getPanelWidth(),height:this.getPanelHeight(),onHelpClicked:this.helpClicked,isBareMode:this.props.isBareMode,className:this.getClassName(),containerBackground:t.get(this.props.options,"background"),overlayBackground:t.get(this.props.options,"overlay"),shouldNotCloseOnBlur:this.props.isBareMode||this.props.shouldNotCloseOnBlur},e.createElement("iframe",{id:"settingsModalIframe",src:this.props.url,style:{width:"100%",height:"100%",border:"0px"}}))}}),define("tpa/compModals/tpaSettingsModal",["lodash","react","core","util","tpa/bi/bi","constants","tpa/utils/tpaUtils","tpa/common/withOnCloseMessage","tpa/compModals/tpaSettingsModal.rt"],function(e,t,a,i,n,o,s,r,p){"use strict";return r(t.createClass({mixins:[a.mixins.editorAPIMixin],displayName:"settingsModal",getInitialState:function(){return this.helpId="",{}},modalShouldNotHaveMargin:function(){return!1===e.get(this.props.options,"margin")},getPanelHeight:function(){var e=s.getWindow().innerHeight,t=this.parsePercentToPixel(this.props.height,e);this.props.title&&(t+=54);var a=.05*e;return this.modalShouldNotHaveMargin()&&(a=o.UI.TOPBAR_HEIGHT),this.resizeToFitContainer(t,e,a).toString()},getPanelWidth:function(){var e=s.getWindow().innerWidth,t=this.parsePercentToPixel(this.props.width,e),a=.02*e;return this.modalShouldNotHaveMargin()&&(a=0),this.resizeToFitContainer(t,e,a).toString()},getClassName:function(){var t=e.template("tpa-settings-modal<%= c %>");return this.modalShouldNotHaveMargin()?t({c:" no-margin"}):this.props.isBareMode?"tpa-settings-modal bare":t({c:""})},parsePercentToPixel:function(t,a){return e.isString(t)&&/^[0-9]+%$/.test(t)?t=a*parseInt(t.replace("%",""),10)/100:e.isNumber(t)||(t=parseInt(t.replace("px",""),10)),t},resizeToFitContainer:function(e,t,a){var i=t-a;return e>i?i:e},shouldHideHeader:function(){return this.props.isBareMode},helpClicked:function(){var t=this.getEditorAPI(),a=this.props.appDefinitionId,i=this.helpId||this.props.helpId,s=this.props.widgetId,r=n.events.TPA_HELP_CLICK,p={widget_id:s||null,app_id:a,origin:"settings_modal"},d={openPanelBiEvent:r,openPanelBiParams:e.merge({help_status:"open"},p),closePanelBiEvent:r,closePanelBiParams:e.merge({help_status:"close"},p),origin:p.origin},c={panel_name:this.props.panelName,origin:o.BI.HELP.ORIGIN.PANEL,component:t.selection.getSelectedComponentType(),learn_more:!1};t.panelManager.openHelpCenter(i,d,c)},componentWillReceiveProps:function(t){this.helpId=e.get(t,"articleId")},render:p}))}),define("tpa/compModals/appMarketModal.rt",["react","lodash","panels"],function(e,t,a){"use strict";return function(){return e.createElement(a.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.getTitle(),onClose:this.onClose,shouldHideHelp:!0,width:this.props.width,height:this.props.height,keyboardShortcuts:this.getShortcuts()},e.createElement("div",{className:"app-market-modal-container"},e.createElement("iframe",{src:this.props.iframeUrl,width:"100%",height:"100%",frameBorder:"0"})))}}),define("tpa/compModals/appMarketModal",["react","core","util","tpa/compModals/appMarketModal.rt"],function(e,t,a,i){"use strict";var n={ESC:"esc"};return e.createClass({propTypes:{iframeUrl:e.PropTypes.string.isRequired,width:e.PropTypes.string.isRequired,height:e.PropTypes.string.isRequired,id:e.PropTypes.string.isRequired,title:e.PropTypes.string,closeModalBiEvent:e.PropTypes.object,closeModalBiParams:e.PropTypes.object},displayName:"appMarketModal",mixins:[a.translationMixin,t.mixins.editorAPIMixin],render:i,getTitle:function(){if(this.props.title)return this.translateIfNeeded(this.props.title)},onClose:function(e){var t=this.getEditorAPI();if(this.props.closeModalBiEvent){var a=this.props.closeModalBiParams||{};a.closeMethod=e,t.bi.event(this.props.closeModalBiEvent,a)}},getShortcuts:function(){var e=this;return{esc:function(){e.onClose(n.ESC)}}}})}),define("tpa/superApps/superAppsCustomData",["lodash","tpaGfppData"],function(e,t){"use strict";return{getSuperAppsGfppData:function(){return t.getData()},getSuperAppsAddPanelStyles:function(a,i){var n=a+"."+i;return e.get(t.getAddPanelData(),n)}}}),define("tpa/addPanelData/addPanelAddCompService",["lodash","tpa/superApps/superApps","experiment"],function(e,t,a){"use strict";function i(t){return{width:e.get(t,"layout.width"),height:e.get(t,"layout.height")}}function n(t,a){var i={styleId:e.get(t,"style")||null};return a&&(i.dontStretch=!a.isFullWidth),i}return{addCompOnClick:function(o,s,r,p,d,c){return new Promise(function(l){require(["addPanelInfra"],function(g){var u=i(r),m=g.addPanelUtils.calcCompPastePosition(c,r,d);e.merge(u,m);var h=n(r,p);a.isOpen("se_santaMembers")?(h.cb=function(e){l(e)},t.addWidget(o,s,u,h)):(t.addWidget(o,s,u,h),l())})})},addCompOnDrop:function(o,s,r,p,d,c){var l=i(p.structure),g={x:r.x||0,y:r.y||0};e.merge(l,g);var u=n(p.structure,e.get(p,"tags"));return u.parentContainerRef=d,a.isOpen("se_santaMembers")&&c&&(u.cb=c),t.addWidget(o,s,l,u)}}}),define("tpa/addPanelData/music/musicSection",["lodash","addPanelDataConsts","tpa/superApps/superApps","tpa/superApps/superAppsConstants","tpa/superApps/superAppsCustomData","tpa/addPanelData/addPanelAddCompService","util"],function(e,t,a,i,n,o,s){"use strict";var r=i.WIXMUSIC.APP_DEF_ID,p=i.WIXMUSIC.WIDGET,d=function(e,t,a,i,n){o.addCompOnClick(r,p,e,a,i,n)},c=function(e,t,a){return o.addCompOnDrop(r,p,e,t,a)},l=function(e){return{type:t.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_proplayer",showSectionHeader:!0,additionalBehaviours:{labelMode:t.LABEL_BEHAVIOUR.HOVER,infoIcon:t.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:t.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},props:{onClick:d,onDrop:c,image:function(e,t){return"addPanelData/sections/wixMusicPlayerSection_"+e+"/"+"wixMusicPlayerSection2_"+e+".png"}(s.languages.getLanguageCode()),items:[{id:"Music_Prop_Player_2",appDefinitionId:r,slug:"wix-music",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:680,height:210,x:14,y:71,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",applicationId:"16",tpaData:{type:"TPAData",content:"{'wmp::paymentsId':'0352442c-26dc-415d-81f8-79d681c7efcf'}"},widgetId:p},style:{type:"TopLevelStyle",style:n.getSuperAppsAddPanelStyles(r,"compact"),componentClassName:"",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:324,height:160,x:0,y:0},label:"add_preset__WixMusic_Compact"}},{id:"Music_Prop_Player_1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:350,height:700,x:315,y:18,scale:1,rotationInDegrees:0},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",appDefinitionId:r,slug:"wix-music",data:{type:"TPAWidget",applicationId:"16",widgetId:p},style:"tpaw0"},preset:{rect:{width:324,height:470,x:0,y:160},label:"add_preset__WixMusic_Classic"}}]},help:{hide:!1,text:"add_section_info_text_proplayer"},teaser:{id:"proplayer_section_teaser",hide:!1,title:"add_section_teaser_title_proplayer",text:"add_section_teaser_text_proplayer",linkText:"add_category_teaser_link",learnMore:function(){a.openAppMarketInfoModal("wix-music"),e.panelManager.closePanelByName("rEditor.addPanel")}}}};return{registerSection:function(t){t.addPanel.registerToAddSectionAtTheStartOfCategory(["music"],e.partial(l,t))}}}),define("tpa/addPanelData/music/soundCloudSection",["util","addPanelDataConsts","tpa/superApps/superAppsConstants","tpa/addPanelData/addPanelAddCompService"],function(e,t,a,i){"use strict";var n=a.WIX_SOUNDCLOUD.APP_DEF_ID,o=a.WIX_SOUNDCLOUD.WIDGET,s=function(e,t,a,s,r){i.addCompOnClick(n,o,e,a,s,r)},r=function(e,t,a){return i.addCompOnDrop(n,o,e,t,a)},p=function(){return{type:t.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_soundcloud",showSectionHeader:!0,additionalBehaviours:{labelMode:t.LABEL_BEHAVIOUR.NONE,infoIcon:t.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:t.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},props:{imageHover:null,onClick:s,onDrop:r,image:function(){var t=e.languages.getLanguageCode();return"addPanelData/sections/soundCloudAudioPlayerSection_"+t+"/soundCloudAudioPlayerSection_"+t+".png"}(),items:[{id:"soundcloud_preset_1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",layout:{width:482,height:450,x:241,y:-38,scale:1,rotationInDegrees:0,fixedPosition:!1},style:"tpaw0",data:{type:"TPAWidget",applicationId:"applicationId",widgetId:o},mobileStructure:{layout:{width:280,height:261,x:20,y:201,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0}},preset:{rect:{width:324,height:110,x:0,y:0},label:""}}]},help:{hide:!1,text:"add_section_info_text_soundcloud"}}};return{registerSection:function(e){e.addPanel.registerToAddSectionAtTheStartOfCategory(["music"],p)}}}),define("tpa/addPanelData/video/videoSection",["lodash","tpa/addPanelData/addPanelAddCompService","tpa/superApps/superAppsConstants","tpa/superApps/superAppsCustomData","addPanelDataConsts","experiment"],function(e,t,a,i,n,o){"use strict";function s(){var e="addPanelData/sections/videoSection_en/wixVideoSection_en.png",t=null;o.isOpen("se_wixVideo_addPanel_Compact")&&(e="addPanelData/sections/videoSection_en/WixVideo_addpanel_regular.png",t="addPanelData/sections/videoSection_en/WixVideo_addpanel_hover.png");return{title:"ADD_SECTION_LABEL_WIXVIDEO",type:n.SECTIONS_TYPES.PRESET,hide:!1,sectionNumber:1,showSectionHeader:!0,additionalBehaviours:{labelMode:n.LABEL_BEHAVIOUR.HOVER,infoIcon:n.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:o.isOpen("se_wixVideo_addPanel_Compact")?n.HOVER_IMAGE_ACTIONS.IMAGE:n.HOVER_IMAGE_ACTIONS.NONE,iconEnabledForComps:[]},props:{image:e,imageHover:t,items:function(){var e=[{id:"Video_Video_1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:480,x:0,y:50,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",applicationId:"1598",widgetId:p},style:{componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",style:i.getSuperAppsAddPanelStyles(r,"strip"),type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:324,height:130,x:0,y:0},label:"add_preset_WixVideo_Strip",tags:{isFullWidth:!0,googleFontsCssUrl:"",uploadFontFaces:""}}},{id:"Video_Video_2",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:800,height:706,x:90,y:50,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",applicationId:"1598",widgetId:p},style:{componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",style:i.getSuperAppsAddPanelStyles(r,"classic"),type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:324,height:234,x:0,y:130},label:"add_preset_WixVideo_Classic"}}],t=[{id:"compact",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:600,height:368,x:76,y:56,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1598",referenceId:"a1ca9dac-7ee4-4d52-a418-68329471105b",widgetId:"144097ea-fea0-498e-ade7-e6de40127106"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:i.getSuperAppsAddPanelStyles(r,"compact"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{layout:{width:280,height:247,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:160,height:140,x:0,y:0},label:"add_preset_WixVideo_Compact"}},{id:"classic",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:800,height:761,x:90,y:34,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1598",referenceId:"a1ca9dac-7ee4-4d52-a418-68329471105b",widgetId:"144097ea-fea0-498e-ade7-e6de40127106"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:i.getSuperAppsAddPanelStyles(r,"classic_new"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{layout:{width:320,height:279,x:0,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:164,height:140,x:160,y:0},label:"add_preset_WixVideo_Classic"}},{id:"strip",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:979,height:410,x:0,y:58,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:.5,vw:0},right:{px:.5,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1598",referenceId:"a1ca9dac-7ee4-4d52-a418-68329471105b",widgetId:"144097ea-fea0-498e-ade7-e6de40127106"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:i.getSuperAppsAddPanelStyles(r,"strip_new"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{layout:{width:280,height:247,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:324,height:170,x:0,y:140},label:"add_preset_WixVideo_Strip",tags:{isFullWidth:!0,googleFontsCssUrl:"",uploadFontFaces:""}}}];return o.isOpen("se_wixVideo_addPanel_Compact")?t:e}(),onClick:d,onDrop:c},help:{hide:!1,text:"ADD_SECTION_INFO_TEXT_WIXVIDEO"}}}var r=a.WIX_VIDEO.APP_DEF_ID,p=a.WIX_VIDEO.WIDGET,d=function(e,a,i,n,o){t.addCompOnClick(r,p,e,i,n,o)},c=function(e,a,i){return t.addCompOnDrop(r,p,e,a,i)};return{registerSection:function(e){e.addPanel.registerToAddSectionAtTheStartOfCategory(["video"],s)}}}),define("tpa/addPanelData/styleParamUtils",["lodash"],function(e){"use strict";function t(t,a,i){e.has(t,a)&&i.push({key:a,type:"number",param:{value:t[a]}})}function a(t,a,i){e.has(t,a)&&i.push({key:a,type:"boolean",param:{value:t[a]}})}function i(t,a,i){if(e.has(t,a)){var n={opacity:e.isNumber(t[a].opacity)?t[a].opacity:1};t[a].rgba?n.rgba=t[a].rgba:t[a].name&&(n.color={name:t[a].name}),i.push({key:a,type:"color",param:{value:n}})}}function n(t,a,i){e.has(t,a)&&i.push({key:a,type:"font",param:{value:t[a]}})}return{getTagsAsStyleParamsArray:function(o){var s=[],r={numbers:t,booleans:a,colors:i,fonts:n};return e.forEach(r,function(t,a){var i=o[a];e.forEach(i,function(e,a){t(i,a,s)})}),s}}}),define("tpa/addPanelData/gallery/proGalleriesSection",["lodash","addPanelDataConsts","panels","tpa/addPanelData/styleParamUtils","tpa/superApps/superApps","tpa/superApps/superAppsCustomData","tpa/addPanelData/addPanelAddCompService","experiment"],function(e,t,a,i,n,o,s,r){"use strict";var p="14271d6f-ba62-d045-549b-ab972ae1f70e",d="142bb34d-3439-576a-7118-683e690a1e0d",c=function(e,t,a,i,n){s.addCompOnClick(p,d,e,a,i,n)},l=function(e,t,a){return s.addCompOnDrop(p,d,e,t,a)},g=function(){return{type:t.SECTIONS_TYPES.PRESET,hide:!1,title:r.isOpen("se_pro_gallery_label")?"add_section_label_progallery_v2":"design_section_label_explore_gallery_progallery",showSectionHeader:!0,sectionNumber:0,additionalBehaviours:{labelMode:t.LABEL_BEHAVIOUR.HOVER,infoIcon:t.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:t.HOVER_IMAGE_ACTIONS.VIDEO,iconEnabledForComps:{}},props:{onClick:c,onDrop:l,image:"addPanelData/sections/proGalleriesSection_en/add-panel-pro-gallery-section.png",items:u(),compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:!1,text:"add_section_info_text_progallery"}}},u=function(){return[{id:"collageFullWidth",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"5dbd0eb3-d14f-449b-9e0e-170fdab99931",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"collageFullWidth"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-iqhqgi44','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:421,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:324,height:174,x:0,y:0},label:"add_preset_Galleries_Pro_Galleries_1",tags:{isFullWidth:!0},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-1"}}},{id:"gridFullWidth",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"f57fea8e-f497-480f-a40c-a341106fb371",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"gridFullWidth"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-iqhqgi44','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:373,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:324,height:192,x:0,y:174},label:"add_preset_Galleries_Pro_Galleries_2",tags:{isFullWidth:!0},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-2",ignoreMargins:!0}}},{id:"masonryFullWidth",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"34d252cb-0516-4a30-9372-4bf86d3ec898",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"masonryFullWidth"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-iqhqgi44','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:264,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:324,height:190,x:0,y:366},label:"add_preset_Galleries_Pro_Galleries_3",tags:{isFullWidth:!0},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-3",ignoreMargins:!0}}},{id:"grid",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"3a13e72a-cc26-4550-85ea-63050b253376",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"grid"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-irag4gis','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:320,height:390,x:0,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:162,height:182,x:0,y:556},label:"add_preset_Galleries_Pro_Galleries_5",tags:{isFullWidth:!1},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-4",ignoreMargins:!0}}},{id:"masonryVertical",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:-1,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"76d4dea1-c0ab-4adb-8cb3-d67f3a3a9fce",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"masonryVertical"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-ivi2gvj2','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:290,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:162,height:198,x:0,y:738},label:"add_preset_Galleries_Pro_Galleries_6",tags:{isFullWidth:!1},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-5",ignoreMargins:!0}}},{id:"oneColumn",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"759d03bd-9915-481e-91f3-51f4eb446f34",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"oneColumn"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-iqhqgi44','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:2337,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:162,height:380,x:162,y:556},label:"add_preset_Galleries_Pro_Galleries_4",tags:{isFullWidth:!1},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-6",ignoreMargins:!0}}}]};return{registerSection:function(e){e.addPanel.registerToAddSectionAtTheStartOfCategory(["gallery"],function(){return g()})}}}),define("tpa/addPanelData/contact/contactSection",["staticAssets","addPanelDataConsts","util","tpa/superApps/superApps"],function(e,t,a,i){"use strict";var n="1375baa8-8eca-5659-ce9d-455b2009250d",o="1375babd-6f2b-87ed-ff19-5778602c8b86",s=function(){return i.addWidget(n,o)},r=function(e){var t={width:350,height:700,x:e.x,y:e.y};return i.addWidget(n,o,t)},p=function(e){return{type:t.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_getsubscribers",additionalBehaviours:{labelMode:t.LABEL_BEHAVIOUR.NONE,infoIcon:t.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:t.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},showSectionHeader:!0,props:{onClick:s,onDrop:r,image:"addPanelData/sections/getSubscribersSection_"+a.languages.getLanguageCode()+"/getSubscribersSection_"+a.languages.getLanguageCode()+".png",items:[{structure:{layout:{x:315,y:650,width:500,height:122,scale:1,rotationInDegrees:0},type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",appDefinitionId:n,slug:"wix-get-subscribers",data:{widgetId:o,applicationId:"18",type:"TPAWidget",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},style:"tpaw0"},preset:{rect:{width:324,height:110,x:0,y:0},label:""}}]},help:{hide:!1,text:"add_section_info_text_getsubscribers"},teaser:{id:"get_subscribers_section_teaser",hide:!1,title:"add_section_teaser_title_getsubscribers",text:"add_section_teaser_text_getsubscribers",linkText:"add_category_teaser_link",learnMore:function(){i.openAppMarketInfoModal("wix-get-subscribers"),e.panelManager.closePanelByName("rEditor.addPanel")}}}};return{registerSection:function(e){e.addPanel.registerToAddSectionAtTheStartOfCategory(["contact"],function(){return p(e)})}}}),define("tpa/addPanelData/members/membersSection",["staticAssets","constants","addPanelDataConsts","tpa/superApps/superAppsConstants","tpa/addPanelData/addPanelAddCompService"],function(e,t,a,i,n){"use strict";var o=i.MEMBER_PROFILE_CARD.APP_DEF_ID,s=i.MEMBER_PROFILE_CARD.WIDGET,r=function(e,a){var i=e.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,n=e.documentServices.platform.getAppDataByAppDefId(i);e.documentServices.platform.notifyApplication(n.applicationId,{eventType:t.EVENTS.ADD_PANEL.COMPONENT_ADDED_TO_STAGE,eventPayload:{compRef:a}})},p=function(e,t,a,i,p){n.addCompOnClick(o,s,e,a,i,p).then(r.bind(this,p))},d=function(e,t,a,i){var p=r.bind(this,i);return n.addCompOnDrop(o,s,e,t,a,p)},c=function(){return{type:a.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_memberprofile",showSectionHeader:!0,additionalBehaviours:{labelMode:a.LABEL_BEHAVIOUR.NONE,infoIcon:a.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:a.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},props:{onClick:p,onDrop:d,image:"addPanelData/sections/membersProfileSection_en/membersProfileSection_en.png",items:[{id:"Member_Profile_1",structure:{layout:{x:224,y:127,fixedPosition:!1,width:250,height:183,scale:1,rotationInDegrees:0},type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{widgetId:s,type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},referenceId:""},style:"tpaw0",activeModes:{}},preset:{rect:{width:324,height:217,x:0,y:0}}}]},help:{hide:!1,text:"add_section_label_membermenu_tooltip_description"}}};return{registerSection:function(e){e.addPanel.registerToAddSectionAtTheStartOfCategory(["members"],function(){return c(e)})}}}),define("tpa/addPanelData/newBlog/triggerElementAddedBiEvent",["lodash","core","blog","tpa/superApps/superAppsConstants"],function(e,t,a,i){"use strict";var n=i.NEW_BLOG_APP_DEF_ID;return function(i,o){var s=i.tpa.app.getDataByAppDefId(n),r=i.panelHelpers.isPanelOpen(t.constants.SUPER_APPS.NEW_BLOG_PANEL_NAME);i.bi.event(a.newBlogBi.events.BLOG_ELEMENT_ADDED,e.assign({instance_id:s.instanceId,origin:r?"6th_button":"add_panel",is_first_time_view:!1},o))}}),define("tpa/addPanelData/newBlog/customFeedSection",["lodash","addPanelDataConsts","blog","tpa/addPanelData/addPanelAddCompService","tpa/addPanelData/newBlog/triggerElementAddedBiEvent","tpa/superApps/superAppsCustomData","tpa/superApps/superAppsConstants"],function(e,t,a,i,n,o,s){"use strict";function r(){return{type:t.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_newblog_customfeed",showSectionHeader:!0,additionalBehaviours:{labelMode:t.LABEL_BEHAVIOUR.HOVER,infoIcon:t.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:t.HOVER_IMAGE_ACTIONS.NONE,iconEnabledForComps:{}},props:{onClick:u,onDrop:m,image:"addPanelData/sections/blogCustomFeedSection_en/blogCustomFeedSection_en.png",imageHover:null,items:[{id:c.SIDE_BY_SIDE,structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:800,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1977",widgetId:"14e5b39b-6d47-99c3-3ee5-cee1c2574c89"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,c.SIDE_BY_SIDE),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",type:"Component",conversionData:{isCustomPreset:!0},layout:{width:280,height:229,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1}},activeModes:{}},preset:{rect:{width:162,height:154,x:0,y:0},label:"add_preset_newblog_sidebyside",tags:null}},{id:c.MAGAZINE,structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:980,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1977",widgetId:"14e5b39b-6d47-99c3-3ee5-cee1c2574c89"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,c.MAGAZINE),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",type:"Component",conversionData:{isCustomPreset:!0},layout:{width:280,height:280,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1}},activeModes:{}},preset:{rect:{width:162,height:182,x:162,y:0},label:"add_preset_newblog_magazine",tags:null}},{id:c.POSTCARD,structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:656,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1977",widgetId:"14e5b39b-6d47-99c3-3ee5-cee1c2574c89"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,c.POSTCARD),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",type:"Component",conversionData:{isCustomPreset:!0},layout:{width:280,height:187,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1}},activeModes:{}},preset:{rect:{width:162,height:136,x:0,y:154},label:"add_preset_newblog_postcard",tags:null}},{id:c.ONE_COLUMN,structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:1410,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1977",widgetId:"14e5b39b-6d47-99c3-3ee5-cee1c2574c89"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,c.ONE_COLUMN),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",type:"Component",conversionData:{isCustomPreset:!0},layout:{width:280,height:403,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1}},activeModes:{}},preset:{rect:{width:162,height:239,x:162,y:182},label:"add_preset_newblog_onecolumn",tags:null}},{id:c.EDITORIAL,structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:698,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1977",widgetId:"14e5b39b-6d47-99c3-3ee5-cee1c2574c89"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,c.EDITORIAL),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",type:"Component",conversionData:{isCustomPreset:!0},layout:{width:280,height:199,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1}},activeModes:{}},preset:{rect:{width:162,height:162,x:0,y:290},label:"add_preset_newblog_editorial",tags:null}}],compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:!1,text:"add_section_info_text_customfeed"}}}var p=s.NEW_BLOG_APP_DEF_ID,d="14e5b39b-6d47-99c3-3ee5-cee1c2574c89",c={SIDE_BY_SIDE:"customFeedSideBySide",MAGAZINE:"customFeedMagazine",POSTCARD:"customFeedPostcard",ONE_COLUMN:"customFeedOneColumn",EDITORIAL:"customFeedEditorial"},l={};l[c.SIDE_BY_SIDE]="side_by_side",l[c.MAGAZINE]="magazine",l[c.POSTCARD]="postcard",l[c.ONE_COLUMN]="one_column",l[c.EDITORIAL]="editorial";var g=function(e){return{element_type:"custom_feed",layout:l[e]}},u=function(e,t,a,o,s){n(s,g(o)),i.addCompOnClick(p,d,e,a,o,s)},m=function(e,t,a,o){return n(o,g(t.itemId)),i.addCompOnDrop(p,d,e,t,a)};return{registerSection:function(t){t.addPanel.registerToAddSectionAtTheStartOfCategory(["newBlog"],e.partial(r,t))}}}),define("tpa/addPanelData/newBlog/recentPostsSection",["lodash","blog","addPanelDataConsts","tpa/addPanelData/newBlog/triggerElementAddedBiEvent","tpa/addPanelData/addPanelAddCompService","tpa/superApps/superAppsConstants"],function(e,t,a,i,n,o){"use strict";function s(){return{type:a.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_newblog_recentposts",showSectionHeader:!0,additionalBehaviours:{labelMode:a.LABEL_BEHAVIOUR.NONE,infoIcon:a.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:a.HOVER_IMAGE_ACTIONS.NONE,iconEnabledForComps:{}},props:{onClick:c,onDrop:l,image:"addPanelData/sections/blogRecentPostsSection_en/blogRecentPostsSection_en.png",imageHover:null,items:[{id:"recentPosts",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:353,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1708",widgetId:"14e5b36b-e545-88a0-1475-2487df7e9206"},style:"tpaw0",mobileStructure:{componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",type:"Component",conversionData:{isCustomPreset:!0},layout:{width:280,height:101,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1}},activeModes:{}},preset:{rect:{width:324,height:132,x:0,y:0},label:"",tags:null}}],compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:!1,text:"add_section_info_text_customfeed"}}}var r=o.NEW_BLOG_APP_DEF_ID,p="14e5b36b-e545-88a0-1475-2487df7e9206",d={element_type:"recent_posts"},c=function(e,t,a,o,s){i(s,d),n.addCompOnClick(r,p,e,a,o,s)},l=function(e,t,a,o){return i(o,d),n.addCompOnDrop(r,p,e,t,a)};return{registerSection:function(t){t.addPanel.registerToAddSectionAtTheStartOfCategory(["newBlog"],e.partial(s,t))}}}),define("tpa/experiments/experiments",["experiment"],function(e){"use strict";return{isEcomAddAppExperimentOn:function(){return e.isOpen("se_ecomAddApp")},isStorePagesUsability1bExperimentOn:function(){return e.isOpen("StorePagesUsability1b")},isShouldShowPhotoAlbumsAboutExperimentOn:function(){return e.isOpen("se_shouldShowPhotoAlbumsAbout")}}}),define("tpa/superApps/gfpp/superAppsGfppDataCacheService",["lodash","panels","tpa/superApps/superApps","tpa/superApps/superAppsCustomData","tpa/constants/constants","tpa/experiments/experiments"],function(e,t,a,i,n,o){"use strict";var s={},r=function(t,a){return e.forEach(a,function(a){e.forEach(a,function(a){a.actions=e.filter(a.actions,function(e){return d(e)&&p(t,e)})})}),a},p=function(t,i){var n={openDashboardUrl:c,openSuperAppsModal:a.openSuperAppsModal,openPanel:t.openPanel};if(e.get(i,"onClick.name")&&e.get(i,"onClick.params")){var o=n[i.onClick.name];return!!e.isFunction(o)&&(i.onClick=o.bind.apply(o,[null].concat(i.onClick.params)),!0)}return!1},d=function(t){if(!t.experiment)return!0;var a=o[t.experiment];return e.isFunction(a)&&a()?(delete t.experiment,!0):void 0},c=function(e){e=e||{},a.openDashboardUrl(e.appDefId,e.width,e.height,{state:e.state,title:e.title,origin:e.origin,widgetId:e.widgetId,onClose:a.refreshAppCompsForAppDefId.bind(void 0,e.appDefId),shouldNotCloseOnBlur:e.shouldNotCloseOnBlur,isBareMode:e.isBareMode,options:e.options},{type:n.BI.type.GFPP_MANAGE})};return{init:function(e){var t=i.getSuperAppsGfppData();s=r(e,t)},getCustomMainActions:function(){return s},clearCustomMainActions:function(){s={}}}}),define("tpa/superApps/gfpp/superAppsGfppData",["lodash","tpa/superApps/superApps","tpa/superApps/gfpp/superAppsGfppDataCacheService"],function(e,t,a){"use strict";var i=function(){return a.getCustomMainActions()};return{getCustomMainActionsFor:function(e,t,a){var n=i()[t];return n&&n[a]?n[a]:n&&n[t]?n[t]:void 0},hasCustomActions:function(t){var a=i();return!e.isUndefined(a[t])},hasExternalUpgrade:function(e,a){if(t.hasPremiumOffering(e)){var n=i()[e];if(n&&n[a])return n[a].showUpgrade;if(n&&n[e])return n[e].showUpgrade}return!1}}}),define("tpa/gfpp/tpaGfppConfig",[],function(){"use strict";return{connectableTpaWidgetIds:["142bb34d-3439-576a-7118-683e690a1e0d"]}}),define("tpa/gfpp/tpaGfppData",["lodash","core","tpa/packagePicker/packagePicker","tpa/services/dashboardAppService","tpa/superApps/gfpp/superAppsGfppData","tpa/constants/constants","tpa/bi/bi","tpa/utils/tpaUtils","tpa/settings/settings","tpa/services/tpaHelpService","tpa/gfpp/tpaGfppConfig","experiment"],function(e,t,a,i,n,o,s,r,p,d,c,l){"use strict";function g(e,t){var a=e.components.data.get(t)||{},i=e.documentServices.tpa.app.getData(a.applicationId);i&&i.appDefinitionId&&function(e,t,a){r.bi.reportBIOnAppIntent(e,t,a,o.BI.initiator.EDITOR,o.BI.type.GFPP_SETTINGS)}(e,s.events.APP_INTENT,i.appDefinitionId)}function u(t,a){var i=e.get(a,"appDefinitionId");e.forEach(t,function(e){e.appId=i})}var m={label:"gfpp_mainaction_tpa",isApplied:!0,onClick:function(e,t){g(e,t),p.open(e,t)}},h=function(e){var t=e.selection.getSelectedComponentData(),a=e.documentServices.tpa.app.getData(t.applicationId),i={app_id:a.appDefinitionId,app_site_id:a.instanceId,instance_id:t.id,origin:"gfpp"};e.bi.event(s.events.OPEN_DASHBOARD_APP_CLICK,i)},f=function(e,t){var i=e.documentServices.tpa.app.getData(t.applicationId);if(n.hasExternalUpgrade(i.appDefinitionId,t.widgetId))return!0;if(e.documentServices.tpa.app.hasPremiumOffering(t.applicationId)){return!a.isFullyUpgraded(e,i)}return!1},y=function(t,a){return!!l.isOpen("se_addConnectButtonToTpaGalleries")&&e.includes(c.connectableTpaWidgetIds,a.widgetId)},P=function(t,a,i,o){var s=n.getCustomMainActionsFor(t,a,i);e.isEmpty(s)||e.forEach(s.actions,function(e){e.addAtBack?S(e,o):_(e,o)})},v=function(e){var t=e.selection.getSelectedComponentData();return e.documentServices.tpa.app.getData(t.applicationId)},I=function(t,a){var n=function(e){var t=void 0,a=i.getEditorGfppData(e);return a.openInDashboard&&(t=function(e,t){return{label:a.openInDashboardText,isApplied:!0,shouldTranslate:!1,onClick:function(){i.getDashboardAppUrlAsync(e,void 0,function(e,t){t&&(window.open(t),h(e))}.bind(null,e))}}}(e)),t}(t);e.isEmpty(n)||a.push(n)},_=function(t,a){e.isEmpty(t)||a.unshift(t)},S=function(t,a){e.isEmpty(t)||a.push(t)};return{mainActions:function(e){var t=[m];I(e,t);var a=e.selection.getSelectedComponentData(),i=e.documentServices.tpa.app.getData(a.applicationId);return n.hasCustomActions(i.appDefinitionId)&&P(e,i.appDefinitionId,a.widgetId,t),u(t,i),t},mobileMainActions:function(t){var a=t.selection.getSelectedComponentData(),i=t.documentServices.tpa.app.getData(a.applicationId),n=a.widgetId||t.documentServices.tpa.app.getMainSectionWidgetData(i).widgetId;return!0===e.get(i,["widgets",n,"componentFields","mobileSettingsEnabled"],!1)?[m]:[]},enabledActions:function(e,t){var a=[t.HELP],i=e.selection.getSelectedComponentData();return y(e,i)&&a.unshift(t.CONNECT),f(e,i)&&a.unshift(t.UPGRADE),a},presetActions:function(n){var p={help:{isSelected:!1,tooltip:"gfpp_tooltip_help",onClick:function(){var a=v(n),i=n.selection.getSelectedComponentData().widgetId,o={widget_id:i,app_id:a.appDefinitionId,panel_name:n.selection.getSelectedComponentType(),origin:t.constants.BI.HELP.ORIGIN.GFPP},r={openPanelBiEvent:s.events.TPA_HELP_CLICK,openPanelBiParams:e.merge({help_status:"open"},o),closePanelBiParams:e.merge({help_status:"close"},o),closePanelBiEvent:s.events.TPA_HELP_CLICK};i=i||n.documentServices.tpa.app.getMainSectionWidgetData(a).widgetId,d.getHelpId(n,a.appDefinitionId,i,d.HELP_END_POINTS.WIDGET).then(function(e){var a={origin:t.constants.BI.HELP.ORIGIN.GFPP,panel_name:n.selection.getSelectedComponentType(),component:n.selection.getSelectedComponentType(),learn_more:!1};n.panelManager.openHelpCenter(e,r,a)})}},upgrade:{isSelected:!1,shouldTranslate:function(){return!i.getEditorGfppData(n).upgradeText},tooltip:function(){return i.getEditorGfppData(n).upgradeText||"tpa_package_picker_upgrade_title"},icon:"upgrade",onClick:function(){var e=v(n);r.bi.reportBIOnAppIntent(n,s.events.APP_INTENT,e.appDefinitionId,o.BI.initiator.EDITOR,o.BI.type.GFPP_UPGRADE),a.startUpgradeFlow(n,e.appDefinitionId,!1,{origin:"gfpp"});var t={pp_origin:"gfpp",app_site_id:e.instanceId,app_id:e.appDefinitionId};n.bi.event(s.events.CLICK_UPGRADE_APP,t)}}};return u(p,v(n)),p}}}),define("tpa/services/tpaDeleteService",["lodash","util","blog","tpa/services/tpaAddRemoveDSService","tpa/superApps/superAppsConstants","experiment"],function(e,t,a,i,n,o){"use strict";var s=function(e,a,n,o,s){var r=e.documentServices.tpa.app.isLastAppComp(a.applicationId);i.deleteWidget(e,n);var p={app_id:o.appDefinitionId,app_site_id:o.instanceId,instance_id:n.id,is_last_tpa:r?1:0,component_type:"tpa"};e.bi.event(t.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,p),s&&s()},r=function(e,t,a,n){if(o.isOpen("us_groupRightClick"))return i.deleteSection(e,t,n),void(a&&a());e.pages.beforePageRemoveHook(t,function(){i.deleteSection(e,t,n),a&&a()})},p=function(a,i,n,o){r(a,i,n,o);var s=e.clone(o);s=e.map(s,function(t){return e.pick(t,["app_id","app_site_id","component_id","component_type","instance_id","is_last_tpa"])}),a.bi.reportBI(t.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,s)};return{deleteWidget:function(e,t,a,n){var o=e.components.data.get(t),r=e.documentServices.tpa.app.isPremium(o.applicationId),p=e.documentServices.tpa.app.getData(o.applicationId),d=e.documentServices.tpa.app.hasSections(p);r&&!d&&a?e.panelManager.openPanel("tpaPanels.confirmation.premiumTPADelete",{appName:p.appDefinitionName,appDefId:p.appDefinitionId,onConfirm:function(){s(e,o,t,p,n)}},!0):(i.deleteWidget(e,t),n&&n())},deleteSection:function(t,a,i,n,s,d,c){e.assign(c,c);var l=t.documentServices.tpa.app.isMultiSectionInstalled(n.applicationId),g=t.documentServices.tpa.app.getInstalledDependentAppsData(n.applicationId);s&&!e.isEmpty(g)?function(t,a,i,n,o,s,r){t.panelManager.openPanel("tpaPanels.confirmation.sectionDeleteMultipleApps",{appName:a.appDefinitionName,pageName:i,appDefId:a.appDefinitionId,dependentAppNames:e.map(r,"appDefinitionName"),onConfirm:function(){p(t,n,o,s)}},!0)}(t,n,i,a,d,c,g):!s||l||!o.isOpen("se_tpaProvisionOnAdd")&&n.demoMode?!o.isOpen("us_groupRightClick")&&s?function(e,t,a,i,n){e.panelManager.openPanel("panels.messagePanels.deletePageMessage",{pageTitle:t,onConfirm:function(){r(e,a,i,n)}},!0)}(t,i,a,d,c):r(t,a,d,c):function(e,t,a,i,n,o){e.panelManager.openPanel("tpaPanels.confirmation.sectionDelete",{appName:t.appDefinitionName,pageName:a,appDefId:t.appDefinitionId,onConfirm:function(){p(e,i,n,o)}},!0)}(t,n,i,a,d,c)},displaySectionDeleteMessage:function(e,t){var a=e.components.data.get(t),i=e.documentServices.tpa.app.getData(a.applicationId);e.panelManager.openPanel("tpaPanels.message.cannotDeleteSection",{title:"tpa_messages_oops_title",appName:i.appDefinitionName,appDefId:i.appDefinitionId},!0)}}}),define("tpa/services/tpaCopyPasteService",["lodash","tpa/services/tpaDeleteService","tpa/services/tpaAddRemoveDSService"],function(e,t,a){"use strict";return{copyComponentPlugin:function(e,t){return t.originCompId=e.id,t},addComponentPlugin:function(t,i,n){var o=e.get(n,"data.applicationId"),s=e.get(n,"data.widgetId"),r=e.get(n,"originCompId"),p=t.documentServices.tpa.app.getData(o),d=t.components.get.byId(r),c=t.components.layout.isHorizontallyStretchedToScreen(d);return a.addWidgetSync(t,p.appDefinitionId,{widgetId:s,componentDefinition:n,parentContainerRef:i,invokeAddAppCallbacks:!1,dontStretch:!c})},cutComponentPlugin:function(e,a){t.deleteWidget(e,a,!1)}}}),define("tpa",["lodash","core","experiment","stateManagement","tpa/utils/tpaUtils","tpa/constants/constants","tpa/services/tpaPostMessageService","tpa/services/tpaPreviewPostMessageService","tpa/appMarket/services/appMarketPostMessageService","tpa/appMarket/services/appMarketTabService","tpa/settings/compPanels/tpaSettings","tpa/compPanels/appMarketPanel","tpa/packagePicker/packagePicker","tpa/compModals/appMarketAppModal","tpa/compModals/appMarketPermissionsModal","tpa/compModals/tpaSettingsModal","tpa/compModals/appMarketModal","tpa/services/navigateAndOpenAppService","tpa/addPanelData/section","tpa/addPanelData/music/musicSection","tpa/addPanelData/music/soundCloudSection","tpa/addPanelData/video/videoSection","tpa/addPanelData/gallery/proGalleriesSection","tpa/addPanelData/contact/contactSection","tpa/addPanelData/members/membersSection","tpa/addPanelData/newBlog/customFeedSection","tpa/addPanelData/newBlog/recentPostsSection","tpa/bi/bi","tpa/superApps/superApps","tpa/services/pendingAppsService","tpa/services/dashboardAppService","tpa/gfpp/tpaGfppData","tpa/addPanelData/addPanelService","tpa/services/tpaDeleteService","tpa/services/tpaCompNameService","tpa/handlers/editorTPAHandlers","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/appMarket/utils/appMarketUtils","tpa/appMarket/appMarketHandlers","tpa/settings/settings","tpa/experiments/experiments","tpa/superApps/superAppsConstants","tpa/superApps/gfpp/superAppsGfppDataCacheService","tpa/services/tpaCopyPasteService","tpa/handlers/editorSuperAppsHandlers","tpa/services/tpaAddComponentService","tpa/services/tpaAddAppService","tpa/services/tpaAddRemoveDSService","tpa/services/tpaAppInstallingService"],function(e,t,a,i,n,o,s,r,p,d,c,l,g,u,m,h,f,y,P,v,I,_,S,A,D,w,b,T,E,C,M,k,O,N,B,x,F,L,R,H,V,W,U,G,j,Y,K,z,q){"use strict";var X=!1,J=void 0,Z=function(n){a.isOpen("se_expandAppMarketAfterPublish")&&n.registerSitePublishedCallbacks(function(){!n.getUserPreferences().site.get("tpa.compPanels.appMarketPanel"+t.constants.LEFT_BAR.WAS_BUTTON_CLICKED_KEY)&&e.isEmpty(i.leftBar.selectors.getCollapseOnClick(n.store.getState()))&&(n.store.dispatch(i.leftBar.actions.expandButton("tpa.compPanels.appMarketPanel")),n.bi.event(T.events.APP_MARKET_ICON_EXPANDED,{site_id:n.documentServices.generalInfo.getSiteId()}))})},$=function(e){e.documentServices.tpa.app.isInstalled(W.ECOM.APP_DEF_ID)&&(Q(e)||(e.documentServices.bi.error(T.errors.ECOM_MISSING_PAGES),V.isEcomAddAppExperimentOn()&&e.panelManager.openPanel("tpaPanels.confirmation.addEcom",{onConfirm:function(){e.documentServices.tpa.section.add(W.ECOM.APP_DEF_ID)}},!0)))},Q=function(t){var a=t.documentServices.tpa.app.getDataByAppDefId(W.ECOM.APP_DEF_ID).applicationId,i=t.documentServices.tpa.app.getSections(a);return i&&!e.isEmpty(i)},ee=function(t,a){var i=e.head(a.comp),s=t.components.data.get(i),r=t.documentServices.tpa.app.getData(s.applicationId);if(t.isDesktopEditor()){var p=e.get(r,"appDefinitionId",null);n.bi.reportBIOnAppIntent(t,T.events.APP_INTENT,p,o.BI.initiator.EDITOR,o.BI.type.DOUBLECLICK_SETTINGS),H.open(t,i)}},te=function(e){ae(e),_.registerSection(e),A.registerSection(e),D.registerSection(e),w.registerSection(e),b.registerSection(e),S.registerSection(e)},ae=function(e){I.registerSection(e),v.registerSection(e)},ie=function(e){e.documentServices.tpa.appMarket.getDataForPage(e.documentServices.pages.getFocusedPageId()),e.registerPageNavigationCallback(function(t){e.documentServices.tpa.appMarket.getDataForPage(t)})},ne=function(e,t){e.documentServices.tpa.change.editMode(t?"preview":"editor"),X=t,t||e.documentServices.tpa.closePopupsAndModal()},oe=function(e){e.documentServices.tpa.change.sitePublished()},se=function(e){e.documentServices.tpa.change.deviceType(e.getDeviceType())},re=function(e){e.registerToViewerChange(function(){var t=e.getPreviewMode();t!==X&&ne(e,t)})},pe=function(e){O.init(e,E.relatedApps.addPanelCategories,function(){P.registerAddPanelSection(e)})};return{initEditor:function(e){J=e,s(e,window.addEventListener).addListenerToTpaMessage(),r.init(e),p.init(e),E.init(e),U.init(e.panelManager),Z(e)},onPreviewReady:function(t){var i=n.isInDevMode();t.documentServices.tpa.initEditor(i,V),re(t);var o=t.pluginService;e.forEach(t.documentServices.tpa.constants.COMP_TYPES,function(e){t.registerCompNamePlugin(e,B.getCompName.bind(null,t)),o.registerPlugin(o.pluginConstants.DOUBLE_CLICK,e,ee)}),e.forEach(t.documentServices.tpa.constants.TPA_COMP_TYPES,function(e){t.registerCompNamePlugin(e,B.getCompName.bind(null,t)),o.registerPlugin(o.pluginConstants.DOUBLE_CLICK,e,ee)}),t.registerRemovePlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_WIDGET,N.deleteWidget.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,N.deleteWidget.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,N.deleteWidget.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,N.deleteWidget.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_SECTION,N.deleteSection.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,N.deleteSection.bind(null,t)),t.registerCopyComponentPlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_WIDGET,G.copyComponentPlugin),t.registerCopyComponentPlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,G.copyComponentPlugin),t.registerCopyComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,G.copyComponentPlugin),t.registerCopyComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,G.copyComponentPlugin),t.registerAddComponentPlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_WIDGET,G.addComponentPlugin),t.registerAddComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,G.addComponentPlugin),t.registerAddComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,G.addComponentPlugin),t.registerAddComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,G.addComponentPlugin),t.registerCutComponentPlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_WIDGET,G.cutComponentPlugin.bind(null,t)),t.registerCutComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,G.cutComponentPlugin.bind(null,t)),t.registerCutComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,G.cutComponentPlugin.bind(null,t)),t.registerCutComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,G.cutComponentPlugin.bind(null,t)),t.registerCannotRemovePlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_SECTION,N.displaySectionDeleteMessage.bind(null,t)),t.registerCannotRemovePlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,N.displaySectionDeleteMessage.bind(null,t)),a.isOpen("us_groupRightClick")||(t.tooltipTextService.registerTooltipText(t.documentServices.tpa.constants.COMP_TYPES.TPA_SECTION,"DELETE","tpa_section_cant_delete_tooltip"),t.tooltipTextService.registerTooltipText(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,"DELETE","tpa_section_cant_delete_tooltip")),t.tooltipTextService.registerTooltipText(t.documentServices.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,"SHOW_ON_ALL_PAGES","tpa_glued_show_on_all_pages_tooltip"),t.tooltipTextService.registerTooltipText(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,"SHOW_ON_ALL_PAGES","tpa_glued_show_on_all_pages_tooltip"),d.openAppMarketTabFromUrlParamIfNeeded(t.panelManager.openPanel),y.handleIfComingFromETPA(t),t.registerInitUserPrefsCallback(function(){C.updateNotification(t)}),pe(t),te(t),t.documentServices.tpa.billing.getPremiumApps(t.site.getMetaSiteId()),t.registerSitePublishedCallbacks(oe.bind(null,t)),t.registerDeviceTypeChangeCallbacks(se.bind(null,t)),ie(t),T.registerEvents(t),$(t)},editModeChange:ne,packagePicker:g,compPanels:{tpaSettings:c,appMarketPanel:l},compModals:{tpaSettingsModal:h,appMarketAppModal:u,appMarketPermissionsModal:m,appMarketModal:f},constants:o,superApps:E,superAppsConstants:W,dashboardApps:M,gfpp:k,getEditorAPI:function(){return J},editorTPAHandlers:x,editorSuperAppsHandlers:j,editorRefreshTPADataAfterUpgrade:F,appMarketUtils:L,settings:H,appMarketTabService:d,appMarketHandlers:R,bi:T,services:{tpaAddComponentService:Y,tpaAddAppService:K,tpaAddRemoveDSService:z,tpaAppInstallingService:q}}});
//# sourceMappingURL=tpa.min.js.map